<HTML>
<HEAD>
<TITLE>
All the PAW FAQs ...
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 WIDTH=100%>
<TR BGCOLOR=#0000FF><TD><A HREF=http://www.cern.ch/>
<IMG SRC="cernbanner.gif" BORDER=0></A>
</TD></TR></TABLE>
<H1>
All the PAW FAQs ... 
</H1>
<H3>
last update:
Thu Apr  3 09:45:21 METDST 2003
</H3>
<P>
</BODY>
<HR SIZE=6><h1>Text output in PAW: font and precision
</h1>The text aspect in <b>PAW</b> is controlled with two parameters:

 <OL>
    <LI><B>The text font</B>:       selects among possible character shapes,
                            as a roman font, a sans-serif font, etc.
 <P>
    <LI><B>The text precision</B>:  specifies how closely <b>PAW</b> must follow the
                            current size and orientation attributes.
 </OL>

 <FONT COLOR="#993300"><PRE>
    PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">SET</a> TFON ffp  | Title FONT (ff) and PREC (p)
    PAW > SET GFON ffp  | Global title FONT (ff) and PREC (p)
    PAW > SET VFON ffp  | axis Values FONT (ff) and PREC (p)
    PAW > SET LFON ffp  | axis Labels FONT (ff) and PREC (p)
    PAW > SET CFON ffp  | Comment FONT (ff) and PREC (p)
    PAW > SET *FON ffp  | Set the same values for all

    PAW > SET TXFP ffp  | ITX FONT (ff) and PREC (p)
 </PRE></font>

 <P>Example: </P>

 <FONT COLOR="#993300"><PRE>
    PAW > SET *FON -60  | the all the font to -6 (Helvetica-Bold) and all
                        | the precision to 0.
 </PRE></font>

 <P>The possible PostScript fonts are: </P>

 <CENTER><IMG SRC="fonts.gif"> </CENTER>

 <P>Font 0 with the precision 2 is the Software <b>HIGZ</b> font: </P>
 <CENTER><IMG SRC="igtext.gif"> </CENTER>
 <P>The following table gives all the Postscript characters available in
 <b>PAW</b>. Note the <i>Euro</i> symbol is there (<tt>\360</tt> in greek
 or special):
 <p>
 <CENTER><IMG SRC="pstext1.gif"> </CENTER>
 <CENTER><IMG SRC="pstext2.gif"> </CENTER>
 <CENTER><IMG SRC="pstext3.gif"> </CENTER>

 <P>The possible precisions are: </P>

 <TABLE BORDER=1 CELLSPACING=0 CELLPADDING=5 WIDTH="100%" BGCOLOR="#87CEFA" >
 <TR BGCOLOR="#008B8B">
 <TD>
 <CENTER><P><B><FONT SIZE=+1>Precision number</FONT></B></P></CENTER>
 </TD>

 <TD>
 <CENTER><P><B><FONT SIZE=+1>Effect </FONT></B></P></CENTER>
 </TD>
 </TR>

 <TR>
 <TD BGCOLOR="#87CEFA">
 <CENTER><P><B><FONT SIZE=+1>0</FONT></B></P></CENTER>
 </TD>

 <TD BGCOLOR="#FFB6C1">The font used on screen and on Postscript file are
 the same. On the screen the text is rotated and aligned but, for speed purpose,
 the size used is the available on the machine. The control characters special
 characters are not interpreted on the screen but are interpreted on the
 PostScript output. </TD>
 </TR>

 <TR>
 <TD BGCOLOR="#87CEFA">
 <CENTER><P><B><FONT SIZE=+1>1</FONT></B></P></CENTER>
 </TD>

 <TD BGCOLOR="#FFB6C1">The font used on the screen is the HIGZ-Software
 and on PostScript the one selected. So, on the screen the text is rotated,
 aligned and scaled correctly, the control are interpreted but the font used
 doesn't look like the one used on the PostScript output. </TD>
 </TR>

 <TR>
 <TD>
 <CENTER><P><B><FONT SIZE=+1>2</FONT></B></P></CENTER>
 </TD>

 <TD BGCOLOR="#FFB6C1">The font used on screen and on Postscript output are
 the same. On the screen the text is rotated, aligned and correctly scaled,
 the control characters are NOT interpreted but the font used looks like the
 one used on the PostScript output. </TD>
 </TR>
 </TABLE>

 <P>In addition to the character font and precision, the text aspect can
 be modified via a set of control characters. These characters are embedded
 into the characters strings and are interpreted according to the rules
 defined in the HIGZ-software font table. </P>

 <TABLE BORDER=1 CELLSPACING=0 CELLPADDING=5 WIDTH="100%" >
 <TR>
 <TH COLSPAN="4" BGCOLOR="#008B8B"><FONT SIZE=+1>List of escape characters
 and their meaning</FONT></TH>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2><</FONT></TD>

 <TD>go to lower case (optional)</TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>></FONT></TD>

 <TD>go to upper case (optional) </TD>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>[</FONT></TD>

 <TD>go to greek (Roman = default)</TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>]</FONT></TD>

 <TD>end of greek </TD>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>"</FONT></TD>

 <TD>go to special symbols </TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>#</FONT></TD>

 <TD>end of special symbols </TD>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>~</FONT></TD>

 <TD>go to ZapfDingbats </TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>#</FONT></TD>

 <TD>end of ZapfDingbats </TD>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>^</FONT></TD>

 <TD>go to superscript </TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>?</FONT></TD>

 <TD>go to subscript </TD>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>!</FONT></TD>

 <TD>go to normal level of script </TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>&amp;</FONT></TD>

 <TD>backspace one character </TD>
 </TR>

 <TR BGCOLOR="#FFB6C1">
 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>$</FONT></TD>

 <TD>termination character (optional)</TD>

 <TD BGCOLOR="#87CEFA"><FONT SIZE=+2>@</FONT></TD>

 <TD>escape </TD>
 </TR>
 </TABLE>

 <P>Example: </P>

 <FONT COLOR="#993300"><PRE>For/File 44 paw.ps
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:METAFI">Meta</a> 44 -111
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_VIEWING.html#GV:SIZE">Size</a> 40 20
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_MISC.html#GM:NEXT">Next</a>
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_VIEWING.html#GV:SELNT">Sel</a> 1
       Set CHHE 1
       Set TXFP -11
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ITX">Itx</a> 0.2 1. 'L?em! = e J^[m]?&amp;em! A?[m]! , J^[m]?&amp;em!=l&amp;^\261![ g?m]!l , M^j?&amp;i! = [\345&amp;?a]! A?[a! t^a]j?&amp;i! '
       Set TXFP -10
       Itx 0.2 3.5 'L?em! = e J^[m]?&amp;em! A?[m]! , J^[m]?&amp;em!=l&amp;^\261![ g?m]!l , M^j?&amp;i! = [\345&amp;?a]! A?[a! t^a]j?&amp;i! '
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:CLOSE">Close</a> 44
 </PRE></font>

 <P>The output on the screen is the following. Note that the 'octal characters'
 like \261 or \345 are never translated whatever the precision is. </P>

 <P><IMG SRC="t1.xbm" HEIGHT=80 WIDTH=467> </P>

 <P>The output on the PostScript file is the same with precision 0 or 1.
 </P>

 <P><IMG SRC="t2.xbm" HEIGHT=93 WIDTH=417> </P>

 <P><B>Note:</B> If the text output is produced with the command <B>TEXT</B>
 instead of <B>ITX</B> the font and precision used is <B>always</B> 0, 2.
<HR SIZE=6><h1>How to access fit parameters after a fit operation ?
</h1>The following example illustrate how to
 access the fit parameters (eg. CHI2) <b>just after</b> a
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FIT">
 <FONT COLOR="#993300"><tt>HISTO/FIT</tt></font></a>
 or
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:FIT">
 <FONT COLOR="#993300"><tt>VECTOR/FIT</tt></font></a>
 command.

 <FONT COLOR="#993300"><pre>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:DELETE">Vector/Del</a> *
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:CREATE">Vector/Cre</a> x(10) r 1 2 3 4 5 6 7 8 9 10
 Vector/Cre y(10) r 0.9 2.1 2.9 4.1 4.9 6.1 6.9 8.1 8.9 10.1
 Vector/Cre ey(10) r 10*0.3
 Vector/Cre chi2(1) r
 *
 Vector/Fit x y ey p1 e
 *
 <FONT COLOR="#993300"><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP_SET_SHOW.html#KS:APPLIC">Application</a> <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:COMIS">COMIS</a> Quit
       SUBROUTINE chiq
 * NPFITS  Number of points used in the fit
 * NFPAR   Number of free parameters
 * FITCHI  Chisquare
 * FITPAR  Values of parameters
 * FITSIG  Errors on parameters
       COMMON/HCFITS/NCFITS,NPFITS,NFPAR,FITCHI,FITPAR(35),FITSIG(35)
      +             ,FITDER(35)
       vector chi2
       chi2(1)=fitchi
       END
 Quit</FONT>
 *
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:CALL">Call</a> chiq
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:PRINT">Vector/Pri</a> chi2
 *
 return
 </pre></font>

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="chi2.gif">
 </TD><TD>

 <FONT COLOR="#993300"><pre>
       PAW > exe chi2
            **********************************************
            *                                            *
            * Function minimization by SUBROUTINE HFITV  *
            * Variable-metric method                     *
            * ID =          0  CHOPT = E                 *
            *                                            *
            **********************************************
        Convergence when estimated distance to minimum (EDM) .LT.  0.10E+01

        FCN=   1.077442     FROM MINOS     STATUS=SUCCESSFUL    18 CALLS       58 TOTAL
                            EDM=  0.38E-11    STRATEGY= 1      ERROR MATRIX ACCURATE

         EXT PARAMETER                  PARABOLIC         MINOS ERRORS
         NO.   NAME        VALUE          ERROR      NEGATIVE      POSITIVE
          1      P1      -0.33333E-01   0.20507      -0.20494       0.20494
          2      P2        1.0061       0.33054E-01  -0.33029E-01   0.33029E-01

        CHISQUARE = 0.1347E+00  NPFIT =    10

        CHI2(1) = 0.13468
       PAW >
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>A graphical view of the SET parameters.
</h1><center>
          <p>
          <img src="set.gif">
          <p>
          <img src="cmap.gif">
          </center>
<HR SIZE=6><h1>How to retrieve histogram information in macro ?
</h1> Use the <b>PAW</b> system function
 <FONT COLOR="#993300"><tt>$HINFO</tt></font>.
 <FONT COLOR="#993300"><pre>
     $HINFO(id,'ENTRIES')  ........  Number of entries
     $HINFO(id,'MEAN')  ...........  Mean value
     $HINFO(id,'RMS')  ............  Standard deviation
     $HINFO(id,'EVENTS')  .........  Number of equivalent events
     $HINFO(id,'OVERFLOW')  .......  Content of overflow channel
     $HINFO(id,'UNDERFLOW')  ......  Content of underflow channel
     $HINFO(id,'MIN')  ............  Minimum bin content
     $HINFO(id,'MAX')  ............  Maximum bin content
     $HINFO(id,'SUM')  ............  Total histogram content
     $HINFO(id,'NSLIX')  ..........  Number of X slices
     $HINFO(id,'NSLIY')  ..........  Number of Y slices
     $HINFO(id,'NBANX')  ..........  Number of X bands
     $HINFO(id,'NBANY')  ..........  Number of Y bands
     $HINFO(id,'NPROX')  ..........  Projection X (0 or 1)
     $HINFO(id,'NPROY')  ..........  Projection Y (0 or 1)
     $HINFO(id,'XBINS')  ..........  Number of bins in X direction
     $HINFO(id,'XMIN')  ...........  Lower histogram limit in X direction
     $HINFO(id,'XMAX')  ...........  Upper histogram limit in X direction
     $HINFO(id,'YBINS')  ..........  Number of bins in Y direction
     $HINFO(id,'YMIN')  ...........  Lower histogram limit in Y direction
     $HINFO(id,'YMAX')  ...........  Upper histogram limit in Y direction
 </pre></font>
 Example:

 <FONT COLOR="#993300"><pre>
 PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:MESSAG">MESSAGE</a> $HINFO(10,'ENTRIES')
 </pre></font>

 Note that some
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:FUNCTI">other functions</a> are available.
<HR SIZE=6><h1>How to use colours and hatching in PAW ?
</h1>The
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">
 SET</a>
 </tt></font>
 command allows to modify hatching and colours.
 <P>
 For low level drawing commands such as
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:PLINE">
 PLINE</a></tt></font>,
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:PMARKE">
 PMARKER</a></tt></font>,
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ITX">
 ITX</a></tt></font>,
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:FAREA">
 FAREA</a></tt></font>,
 the colours are set via commands like
 <FONT COLOR="#993300"><pre>
    PAW > SET PLCI 2,
    PAW > SET FACI 4.
 </pre></font>
 <p>
 When a command like
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">
 HISTO/PLOT</a></tt></font>
 is performed, the hatching and colour attributes
 can be preset with the
 <FONT COLOR="#993300"><tt>SET</tt></font> command. It allows to change the colour (COL) and
 the hatches type (TYP) of 4 main graphics object in the <b>PAW</b> plots:
 <FONT COLOR="#993300"><pre>
 Bxxx : Box around each histogram/function plot (zone).
 Pxxx : Page. It may contain several zones.
 Hxxx : Histogram
 Fxxx : Function
 </pre></font>

 <FONT COLOR="#993300"><tt>xxx</tt></font> can be
 <FONT COLOR="#993300"><tt>TYP</tt></font> or
 <FONT COLOR="#993300"><tt>COL</tt></font>
 <p>
 Example:
 <FONT COLOR="#993300"><pre>
    PAW > SET HCOL 2
 </pre></tt></font>
 Changes the histogram colour to 2 (red).
 <p>
 The values given to the parameters
 <FONT COLOR="#993300"><tt>PTYP</tt></font>,
 <FONT COLOR="#993300"><tt>BTYP</tt></font> and
 <FONT COLOR="#993300"><tt>HTYP</tt></font> are fill area interior
 style. The two following figures show the available fill area interior styles:
 <p>
 <center><img src="pat.gif"></center>
 <center><img src="fasi.gif"></center>
 <p>
 The parameters
 <FONT COLOR="#993300"><tt>PCOL</tt></font>,
 <FONT COLOR="#993300"><tt>BCOL</tt></font>,
 <FONT COLOR="#993300"><tt>HCOL</tt></font> are equivalent to
 <FONT COLOR="#993300"><tt>PTYP</tt></font>,
 <FONT COLOR="#993300"><tt>BTYP</tt></font>,
 <FONT COLOR="#993300"><tt>HTYP</tt></font>, respectively
 , but instead of changing the hatch style, they change the colour of the same
 areas.
 <p>
 If
 <FONT COLOR="#993300"><tt>PCOL</tt></font>,
 <FONT COLOR="#993300"><tt>BCOL</tt></font>,
 <FONT COLOR="#993300"><tt>HCOL</tt></font> are between 1 and 99,
 then only the contour of the corresponding area is changed. If they are
 between 1001 and 1099, then the surface is filled with the
 corresponding fill area colour index.
 <p>
 It is possible to specify with one
 <FONT COLOR="#993300"><tt>SET</tt></font> command both the border and
 the inside color for the Histogram, Box Page, and Function (
 <FONT COLOR="#993300"><tt>HCOL</tt></font>,
 <FONT COLOR="#993300"><tt>BCOL</tt></font>,
 <FONT COLOR="#993300"><tt>PCOL</tt></font>,
 <FONT COLOR="#993300"><tt>FCOL</tt></font>).
 <br>Example:
 <FONT COLOR="#993300"><pre>
                    +---- 1 The Histogram is filled
                    |     0 Only the border is drawn
                    |+--- Border color (here 2) if the histogram is filled
                    ||++- Inside color (here 3) if the histogram is filled
                    ||||  Border color if the histogram is not filled
                    ||||
                    VVVV
           SET HCOL 1203.
       </pre></tt></font>
 The same mechanism is also available for
 <FONT COLOR="#993300"><tt>FCOL</tt></font>,
 <FONT COLOR="#993300"><tt>BCOL</tt></font> and
 <FONT COLOR="#993300"><tt>PCOL</tt></font>.
 <p>
 In addition,
 <FONT COLOR="#993300"><tt>BCOL</tt></font> has two digits after the dot. The first one specifies
 the colour of the zone box shadowing and the second the colour
 of the statistic box shadowing.
 <p>
 See also the FAQ:
 <b>
 How to define the colour map for the option COLZ of HISTO/PLOT ?
 </b>
<HR SIZE=6><h1>How to fit 2D histograms? Is there a way to fit a line to a scatter plot ?
</h1>When you have simple distributions where the Y value is nearly a function
 of the X variable, it is more convenient to use a profile histogram
 (see
 <b>HBOOK</b> routine <b>HBPROF</b> or <b>PAW</b> command
 <FONT COLOR="#993300"><tt>PROFILE</tt></font>)<p>

 You can use the
 <FONT COLOR="#993300"><tt>Histo/fit
 </tt></font> command with the predefined fitting functions
 on a profile histogram. See the macro below.<p>

 <FONT COLOR="#993300"><pre>
 macro fit2l
 h/del 0
 <FONT COLOR="#000099">application comis quit
       subroutine make2d
       call hbook2(2,'test',40,0.,10.,40,0.,10.,0.)
       call hbprof(1,'test',40,0.,10.,0.,10.,'S')
       do 10 i=1,10000
          dev=0.5-rndm(i)
          x=10.*rndm(i)
          call hfill(1,x,x+dev,1.)
          call hfill(2,x,x+dev,1.)
   10  continue
       end
 quit</font>
 call make2d
 zone 1 2
 h/pl 2
 hi/fit 1 p1
 return
 </pre></font>

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=1 WIDTH="100%" NOSAVE >
 <TR><TD>
 <img src="fit2l.gif">
 </TD><TD>
 <FONT COLOR="#993300"><pre>
 PAW > exe fit2l
      **********************************************
      *                                            *
      * Function minimization by SUBROUTINE HFITPO *
      * Variable-metric method                     *
      * ID =          1  CHOPT = TU                *
      *                                            *
      **********************************************
  Convergence when estimated distance to minimum (EDM) .LT.  0.10E+01

  FCN=   1.792382     FROM MIGRAD    STATUS=CONVERGED     31 CALLS       32 TOTAL
                      EDM=  0.21E-24    STRATEGY= 1      ERROR MATRIX ACCURATE

   EXT PARAMETER                                   STEP         FIRST
   NO.   NAME        VALUE          ERROR          SIZE      DERIVATIVE
    1      A0       0.55398E-01   0.85177E-01   0.26538E-02  -0.96222E-11
    2      A1       0.98826       0.14371E-01   0.25001E-02  -0.82064E-10

  CHISQUARE = 0.4717E-01  NPFIT =    40

 PAW >
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to create very large ntuples (RWN or CWN) ?
</h1>Very large ntuples should be created "disk resident". By default CWN are
 created that way but RWN are not. An other FAQ explain how to do this for RWN.
 But creating the ntuple "disk resident" is not enough to make it "very large".
 If you get one of the following error message:
 <PRE>   <FONT COLOR="#3333FF">RZOUT: current RZ file cannot support > 64K records
          or individual directories > 64K
   RZOUT: previous cycle(s) for this key (      30)  deleted
   RZOUT: please consult ZEBRA manual for further details</FONT></PRE>
 or:
 <PRE><FONT COLOR="#3333FF">
 RZOUT: "Request exceeds quota"
 </FONT></PRE>
 this indicates that some parameters must be tuned in order to bypass these
 limits:

 <p>

 <ol>
  <li> <font color="#993300"><tt>CALL HROPEN</tt></font> with a large value of
 <font color="#993300"><tt>LRECL</tt></font>
 (ex <font color="#993300"><tt>LRECL=4096</tt></font> instead of 1024) and you
 can get files 4 times bigger. When you do that, do not forget in <b>PAW</b> (in
 the command <font color="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE">
 HI/FILE</a></tt></font>) to specify the
 <font color="#993300"><tt>LRECL</tt></font> parameter. Note that if the record
 length is smaller than 8192, the <b>PAW</b> command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE">
 HI/FILE</a></tt></font> is able to determine the correct record length if the
 <font color="#993300"><tt>LRECL</tt></font> parameter is set to 0.

 <p>

 <li>If changing
 <font color="#993300"><tt>LRECL</tt></font> is not sufficient, you can also
 specify the option <font color="#993300"><tt>Q</tt></font> in
 <font color="#993300"><tt>CHOPT</tt></font> and in
 <font color="#993300"><tt>IQUEST(10)</tt></font>
 (<font color="#993300"><tt>COMMON/QUEST/IQUEST(100)</tt></font>) give the
 maximum number of records. The default value is 32000 records.

 <p>

 Example:

 <font color="#993300">
 <pre>
     COMMON/QUEST/IQUEST(100)
     IQUEST(10)=64000
     CALL HROPEN(lun,......,'NQ',4096,istat)
 </pre>
 </font>

 will create a file with a maximum of 64000 records of 4096 words. With this
 technique the largest number of records you can have in an <b>HBOOK</b> file
 will be 64000 (2**16).

 <p>
 <b>Important note:</b> It is very important to initialise 
 <font color="#993300"><tt>IQUEST(10)</tt></font>
 just before the call to
 <font color="#993300"><tt>HROPEN</tt></font>. 
 The
 <font color="#993300"><tt>QUEST</tt></font>
 common block is used a lot in the whole <b>CERNLIB</b>, and in particular
 in <b>HBOOK</b>, so if the value of
 <font color="#993300"><tt>IQUEST(10)</tt></font>
 is defined too far from the call to
 <font color="#993300"><tt>HROPEN</tt></font>, very likely it will not have
 the expected value when needed.

 <p>

 <li> If increasing the number of record to 2**16 is still not enough,
 you can use the option <font color="#993300"><tt>QE</tt></font>
 (<font color="#993300"><tt>E</tt></font> for "Extended") available in
 <b>HBOOK</b> since version 4.27/03. This option allows to have up to 2**32 records
 in an <b>HBOOK</b> file. The following example demonstrates how to use it:

 <font color="#993300"><pre>
       Program Quota
       Parameter (Nwpawc=150000, Nvars=17)
       Character*8 Chtags(Nvars)
       Dimension Event(Nvars)
       Common/Pawc/Paw(Nwpawc)
 *
       Equivalence (Event(1) ,X1)    , (Event(2),Y1)    , (Event(3) ,Z1)
       Equivalence (Event(4) ,Enrgy1), (Event(5),Eloss1)
       Equivalence (Event(6) ,X2)    , (Event(7),Y2)    , (Event(8) ,Z2)
       Equivalence (Event(9) ,Enrgy2), (Event(10),Eloss2)
       Equivalence (Event(11),X3)    , (Event(12),Y3)   , (Event(13),Z3)
       Equivalence (Event(14),Enrgy3), (Event(15),Eloss3)
       Equivalence (Event(16),X4)    , (Event(17),Y4)
 *
       <font color="#FF0000">Common /QUEST/ Iquest(100)</font>
       Data Chtags/'X1','Y1','Z1','Energy1','Eloss1',
      +            'X2','Y2','Z2','Energy2','Eloss2',
      +            'X3','Y3','Z3','Energy3','Eloss3',
      +            'X4','Y4'/
 *
       Call Hlimit(Nwpawc)
 *
       <font color="#FF0000">Iquest(10) = 256000</font>
       Call Hropen (1,'QUOTA','quota.hbook','N<font color="#FF0000">QE</font>',1024,ISTAT)
       If (Istat.Ne.0) Stop
 *
       Call Hbookn (10,'A simple Ntuple',Nvars,'//QUOTA',10000,Chtags)
 *
       Do I=1, 5000000
          Call Rannor(X1,Y1)
          X1     = Float(I)
          Z3     = Sqrt(X1*X1+Y1*Y1)
          Enrgy1 = 50. + 10.*X1
          Eloss1 = 10. * Abs(Y1)
          Call Rannor (X2,Y2)
          Z3     = Sqrt(X2*X2+Y2*Y2)
          Enrgy2 = 50. + 10.*X2
          Eloss2 = 10. * Abs(Y2)
          Call Rannor(X3,Y3)
          Z3     = SQRT(X3*X3+Y3*Y3)
          Enrgy3 = 50. + 10.*X3
          Eloss3 = 10. * Abs(Y3)
          Call Rannor(X4,Y4)
          Call Hfn(10,Event)
       Enddo
       Call Hrout(0,Icycle,' ')
       Call Hrend('QUOTA')
       End
 </pre></font>
 When you run this example you get:
 <font color="#993300"><pre>
 $ ./quota
  RZMAKE. new RZ format selected.
          This file will not be readable with versions of RZ prior to release 94B
 $ ls -l quota.hbook
 -rw-r--r--   1 couet    olivier  340918272 Dec 13 12:06 quota.hbook
 $
 </pre></font>
 </ol>

 To gain some records you can also try to minimise the number of keys in
 the <b>HBOOK/RZ</b> directory. To do that the ntuple buffer size can be
 increased:
 <p>
 <ol>
 <li>If it is a row wise ntuple (RWN: created with
 <font color="#993300"><tt> HBOOKN</tt></font>):
 Set parameter <font color="#993300"><tt>NWPRIM</tt></font> to a large
 value (say 50000 words)
 <p>

 <li>If it is a column wise ntuple (CWN: created with
 <font color="#993300"><tt> HBNT/HBNAME</tt></font>):

 Set the buffer size for each column via
 <font color="#993300"><tt>CALL HBSET('BSIZE',NWORDS,IERR)</tt></font>.
 A convenient value for <font color="#993300"><tt>NWORDS</tt></font> is the
 record size itself (eg, 4096 words)<p>
 </ol>
<HR SIZE=6><h1> GIF ?
</h1>GIF like formats are bitmap oriented files and are produced as a copy
 of a graphics window.

 <H3>Before the Version 2.07/20 of PAW:</H3>

 <P>the program
 <a href="http://salam.cae.wisc.edu/hppd/hpux/X11/Graphics/xwpick-2.20/man.html">
 <FONT COLOR="#993300">xwpick</FONT></a>, available on asis,
 should be used. It has all kind of options to produce GIF, PICT etc ..
 . In <b>PAW</b> just do:</P>

 <PRE><FONT COLOR="#993300"> shell xwpick ....</FONT></PRE>

 <P>This will invoke
 <a href="http://salam.cae.wisc.edu/hppd/hpux/X11/Graphics/xwpick-2.20/man.html">
 <FONT COLOR="#993300">xwpick</font></a> in interactive mode. </P>

 <P>To convert the current <b>PAW</b> window into a gif file, the following script
 (UNIX only) can be used (file xw1): </P>

 <PRE><FONT COLOR="#993300">xwininfo -name 'HIGZ_01 @ hphigz' | grep xwininfo | sed -e 's/^..................../xwpick junk.gif -window/' -e 's/.................
 mv junk.gif $1</FONT></PRE>

 <P>in <b>PAW</b> just do: </P>

 <PRE><FONT COLOR="#993300">PAW > shell xw1 test.gif</FONT></PRE>

 <P>and the current window will be converted in test.gif. </P>

 <H3>After the Version 2.07/20 of PAW:</H3>

 <P>The command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/PICTURE.html#P:PRINT">
 <FONT COLOR="#993300"><tt>PICTURE/PRINT</tt></FONT></a> produces a gif
 file if the file name is <FONT COLOR="#993300">file_name.gif</FONT>. </P>

 <P>Example: </P>

 <PRE><FONT COLOR="#993300">PAW > pict/print test.gif</FONT></PRE>

 <P>produce the file <FONT COLOR="#993300"><tt>test.gif</tt></FONT> from the current
 graphics window. </P>

 This mechanism works only on X11 machines. On NT or Windows one should
 use the general procedure to capture any active windows:
 <ol>
 <li> Select the window to be capture with the mouse.
 <li> Press <tt>Alt-PrintScreen</tt> to copy that window to "clipboard".
 <li> Apply "paste" operation under any Windows tool. For example
      <b>PowerPoint</b> or <b>Microsoft PhotoEditor</b>. Both packages
      can save files in <tt>gif</tt> format.
 </ol>


 <H3>Since the Version 2.08 of PAW:</H3>

 It is possible to load a GIF image in the background of the graphic window.
 As explain in the HELP of the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/PICTURE.html#P:LOAD">
 <FONT COLOR="#993300"><tt>PICT/LOAD</tt></FONT></a>.

 <H3>In a batch HIGZ program:</H3>
 It is also possible to generate a GIF file inside an <b>HIGZ</B> batch program.
 A <b>HIGZ</b> graphics window must be open. To Translate the content of this
 window in a gif file it is enough to do the following procedure call:
 <PRE><FONT COLOR="#993300">
       CALL IGGIF(1,W,H,'name.gif','M')
 </FONT></PRE>
 Where <TT><FONT COLOR="#993300">W</FONT></TT> and
 <TT><FONT COLOR="#993300">H</FONT></tt> are the width and heigh of the GIF
 picture.

 <p>
 <b>Note:</b>
 The GIF file is created by converting the content of the X11 window. So, as
 we said before, the
 <b>HIGZ</b> graphics window is necessary. If the popping up of the <b>HIGZ</b> window
 on the computer screen is annoying, one can install the 
 <a href="http://www.uk.research.att.com/vnc/">VNC</a> server and redirect
 the <b>HIGZ</b> window to that screen like 
 <FONT COLOR="#993300"><tt>setenv DISPLAY :1</tt></FONT>.
<HR SIZE=6><h1>How to create a legend ?
</h1>The command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_HPLOT.html#GH:KEY">
 <FONT COLOR="#993300"><tt>KEY</tt></font></a>
  is designed to create a legend with
 a marker type. Since the version 2.07 of
 <b>PAW</b> this command has been expanded,
 and allows to produce legends with lines and filled areas.
 For the <b>PAW</b> versions
 before 2.07 a macro similar to the following one can be used:

 <FONT COLOR="#993300"><pre>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Expressions.html">Macro</a> Legend
 TYPE = [1]   | Type of hatches
 X1   = [2]   | X bottom left corner of the box.
 X2   = [3]   | X top right corner of the box.
 Y1   = [4]   | Y bottom left corner of the box.
 Y2   = [5]   | Y top right corner of the box.
 TEXT = [6]   | Text to be printed
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">Set</a> FAIS 3
 Set FASI [TYPE]
 Set BORD 1
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:BOX">Box</a> [X1] [X2] [Y1] [Y2]
 Set TXAL 03
 XT = [X2]+$GRAFINFO('?CHHE')
 YT = ([Y2]+[Y1])/2
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:BOX">Itx</a> [XT] [YT] [TEXT]
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:RETURN">Return</a>

 </pre></font>
 Note that this kind of macro is anyway useful to personalise an output.
<HR SIZE=6><h1>A graphical view of the marker types available.
</h1>The marker type available are...
 <ol>
 <li> Point shape (.).
 <li> Plus shape (+).
 <li> Asterisk shape (*).
 <li> Circle shape (o).
 <li> X shape (x).
 </ol>
 <p>
 And also ....
 <center>
 <img src="markers.gif">
 </center>
 <ul>
 <li>The marker type can be changed with the command
 <FONT COLOR="#993300"><TT>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">SET</a> MTYP n</TT></FONT>
 <li>The marker size can be changed with the commands
 <FONT COLOR="#993300"><TT> SET MSCF size</TT></FONT> and
 <TT>SET KSIZ size</TT> for the 1D histogram plotting.
 <li> <B>The marker type 1 is not scalable.</b>
 </ul>
<HR SIZE=6><h1>The PAW graphical window is corrupted when overlapped with another window.
</h1>On (UNIX) machines using X-window, the <b>HIGZ</b> package (and <b>PAW</b>)
 relies on the ``BackingStore''
 facility provided by X-Window to update the content of the graphics window when it
 has been damaged by an other window put on top of it. Very often the X11 (X-Window)
 server start with the ``BackingStore'' activated by default. But some
 servers don't. In that case <B>you should activate the ``BackingStore''
 when you start your X11 server</B>.
 <BR>
 <BR>
 The way to activate the ``BackingStore'' depends on the type of machine you are using.
 <UL>
 <P><LI><B>On X11 platforms:</B><P>
 <UL>
 <P><LI> <b>LINUX</b>: It depends which daemon is in charge of putting up
 the login box on the
 X-Windows screen, and start the X-Window session at login time.
 It can be <TT><FONT COLOR="#993300">xdm</FONT></TT>,
 <TT><FONT COLOR="#993300">kdm</FONT></TT> (provided with the <b>KDE</b>
 environment) or
 <TT><FONT COLOR="#993300">gdm</FONT></TT>. If it is
 <TT><FONT COLOR="#993300">xdm</FONT></TT> or
 <TT><FONT COLOR="#993300">kdm</FONT></TT> the line starting the X server
 in the file
 <TT><FONT COLOR="#993300">/usr/lib/X11/xdm/Xservers</FONT></TT> should not
 contain the option <TT><FONT COLOR="#993300">-bs</FONT></TT> it should look
 something like:
 <FONT COLOR="#993300"><pre>
 :0 local /usr/X11R6/bin/X +bs </pre></font>
 If it is
 <TT><FONT COLOR="#993300">gdm</FONT></TT> the line starting the X server
 in the file
 <TT><FONT COLOR="#993300">/etc/X11/gdm/gdm.conf</FONT></TT> should
 contain the option <TT><FONT COLOR="#993300">+bs</FONT></TT> it could be
 something like:
 <FONT COLOR="#993300"><pre>
 0=/usr/bin/X11/X +bs
 </pre></font>
 With some LINUX systems (for instance <b>Suse Linux 7.2</b>)
 the file <TT><FONT COLOR="#993300">.fvwm2rc</FONT></TT> should contains the
 line:
 <pre><FONT COLOR="#993300">
 Style  "*"  BackingStore
 </font></pre>


 <P><LI><b>XFree86 4.0.1</b>: The <TT><FONT COLOR="#993300">Screen</FONT></TT>
 section of the file <TT><FONT COLOR="#993300">/etc/X11/XF86Config</FONT></TT>
 should be something like:
 <pre><FONT COLOR="#993300">
 Section "Screen"
      .
      .
      .
    Option "backingstore"
      .
      .
      .
 EndSection
 </font></pre>

 <P><LI><b>SGI</b>: In the file <TT><FONT COLOR="#993300">/var/X11/xdm/Xservers</FONT></TT>
 set the option <TT><FONT COLOR="#993300">-wm</FONT></TT>. </LI>

 <P><LI><b>IBM RS 6000</b>: In the file
 <TT><FONT COLOR="#993300">/usr/lpp/X11/defaults/xserverrc</FONT></TT>
 declare: <TT><FONT COLOR="#993300">EXTENSIONS="-bs -su" </FONT></TT></LI>

 <P><LI><b>An other way</b>:
 Start the X server with option <TT><FONT COLOR="#993300">+bs</FONT></TT>.
 This can be done by adding the option in the
 <TT><FONT COLOR="#993300">.xserverrc</FONT></TT> file in user's home
 directory:
 <pre><FONT COLOR="#993300">
 #!/bin/sh
 HOST=`hostname`
 exec X +bs -bpp 32 -auth ${HOME}/.Xauthority
 </font></pre>

 </UL>
 <p>
 Note that once the necessary modifications have been done, the X server should
 be restart. Rebooting the machine may be necessary ...
 <P><LI><B>On Windows 95, 98, 2000 and NT platforms: </B></LI>

 <P>Two possibilities: </P>

 <OL>
 <P><LI>You are running a native PC version of <b>PAW</b>. In that case
 X11 is not involved. <b>HIGZ</b> provides the possibility to restore the
 corrupted window using the "double buffering". If you use <b>PAW</b> you should
 include in your file <FONT COLOR="#993300"><TT>pawlogon.kumac</TT> </FONT>the
 command <TT><FONT COLOR="#993300">SET 2BUF 11</FONT> </TT></LI>.

 <P><LI>Your are running remotely a X11 version of <b>PAW</b>. In that case you should
 activate the 'backing store' option in your X11 emulator on PC.
 For example with Exceed you should proceed as follow: </LI>

 <FONT COLOR="#993300">
 <PRE>Start --->
    More Applications
       ---> Exceed X-terminal
              ---> Exceed Applications
                      ---> Xconfig
                            ---> Performance
 </PRE></font>

 In this window, titled "Performance":

 <UL>
 <LI>Activate the <code>"Save Unders"</code>  option (this eliminates the need
 for the client to refresh the window when the menu is rolled back up).

 <LI>Then select:
 <FONT COLOR="#993300"><PRE>
    Maximum Backing Store: Always (attempt to preserve the contents
                           of any window, whether it is mapped or not,
                           as long as it is displayed on the X server)
    Default Backing Store: When Mapped
    Minimum Backing Store: When Mapped
    Tune... ---> Run All (this runs automatically some tests)
 </PRE></font>
 </UL>
 Press the "OK" button to validate this setting.

 <P>Then start again your X11-session </P>
 </OL>
 </UL>
<HR SIZE=6><h1>How to print the output of HIST/FIT into a text file ?
</h1>The easiest way is to use the command
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_HIO.html#HH:OUTPUT">
 OUTPUT_LP</a></tt></font>:

 <FONT COLOR="#993300"><pre>
  PAW > OUTPUT 60 FIT.DAT
  PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FIT">HI/FIT</a> 10 G
 </pre></pre>

 The <FONT COLOR="#993300"><tt>HI/FIT</tt></font> output is written in the
 file <FONT COLOR="#993300"><tt>FIT.DAT</tt></font>.
<HR SIZE=6><h1>A graphical view of the PostScript characters.
</h1><center><img src="69a.gif"></center>
 <center><img src="69b.gif"></center>
<HR SIZE=6><h1>Axis labelling and divisions optimisation
</h1>By default, labels used by the command AXIS and PIE are numeric labels.
 The command LABELS, allows the user to define up to 9 alphanumeric set
 of labels (numbered from 1 to 9). These labels can then be used in subsequent
 commands using PIE or AXIS primitives of HIGZ.

 The LABELS command has three parameters:
 <ul>
 <li> <b>LABNUM</b> An integer between 1 and 9.
                    It identifies the labels set.
 <li> <b>NLABS</b>  The number of items to be placed on the labels (up to 50).
 <li> <b>CHLABS</b> NLABS character strings specifying the label items.
 </ul>

 The label sets thus defined can be used for axes on all plots produced
 by <b>PAW</b> (HPLOT histograms, graphs, vectors drawing, etc.) via the
 SET NDVX (NDVY) command.
 These commands have the following structure:

 <FONT COLOR="#993300"><pre>
     SET NDVX i            e.g. SET NDVX 512
 </pre></font>
 or
 <FONT COLOR="#993300"><pre>
     SET NDVX i.jk         e.g. SET NDVX 10.25
 </pre></font>

 In the first case the number ``i'' contains 100 times the number of
 secondary divisions plus the number of primary divisions. (e.g. 512 means
 12 primary and 5 secondary division. By adding 10000 times N3 to ``i'' a
 third level of divisions is available.

 <p>

 In the second case the number in front of the dot (i) indicates the total
 number of divisions, the first digit following the dot (j) the label
 identifier (LABNUM) (if this number is equal to 0 numeric labels
 are drawn). The second digit after the dot (k) indicates the position
 where the labels have to be drawn (i.e. the parameter, in this case 5,
 indicating horizontally written text centred on the interval). Study the
 next figures for details. These two figures show
 that the labels can be centred on the tick marks (1 to 4) or on
 the divisions (5 to 8). If the labels are centred on the tick
 marks, note that the number of items in the command LABELS must be equal
 to the number of tick marks (which is equal to the number of divisions
 <b> plus one </b>), otherwise the last alphanumeric label on the axis will be
 undefined.

 <p>

 By default, the number of primary divisions given by SET NDVX n,
 SET NDVY n or SET NDVZ n is optimised to have a reasonable labelling:
 The number of divisions ( NDIV ) is calculated according to
 the following convention:
 <FONT COLOR="#993300"><pre>
                          (NDIV = N1 + 100*N2 + 10000*N3)
 </pre></font>
 Where N1 is the number of primary divisions, N2 is the number of second order
 divisions and N3 is the number of third order divisions. The sign of NDIV is
 also used to control the labelling:
 <ol>
 <li> If NDIV is positive, it is taken as a maximum number and the binning is
      optimised.
 <li> If NDIV is negative, its absolute value is taken as the exact number of
      division without optimisation.
 <li> If NDIV equal zero is given the default (510. i.e. 10 primary divisions
      and 5 secondary) is taken.
 </ol>

 <p>
 The number of primary divisions is also optimised
 according the number of zones  (see command ZONE) i.e :
 along the X direction the number of primary divisions is divided by
 <em> the_number_of_X_zones</em> along the Y direction the number of primary
 divisions in divided by <em>(the_number_of_Y_zones)/2</em>.
 <p>
 If the number of divisions has to be exactly equal to the
 number given by SET NDVX n, SET NDVY n or
 SET NDVZ n, a negative value must be used i.e.:
 <FONT COLOR="#993300"><pre>
     SET NDVX -i            e.g. SET NDVX -512
 </pre></font>
 or
 <FONT COLOR="#993300"><pre>
     SET NDVX -i.jk         e.g. SET NDVX -10.25
 </pre></font>


 For example to label each subsequent X-axis with the names of the
 months of the year centred in the middle of each bin you can use:

 <FONT COLOR="#993300"><pre>
 PAW > LABEL 1 12 JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC
 PAW > SET NDVX -12.15
 </pre></font>
 <b>Limitation:</b> Alpha numeric labels (defined with the command
 <FONT COLOR="#993300"><tt>LABEL</tt></font>) do not work on 3D plots
 like Lego Plots and Surface Plots.
 <p>
 <center>
 <img src="ndvx.gif">
 <img src="ndvy.gif">
 </center>
<HR SIZE=6><h1>How to combine n Ntuples into only one ?
</h1> 2 ways:

 <ol>
  <li> The command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:HMERGE">
 <font color="00993300"><tt>HMERGE</tt></font></a>
       allows to combine several hbook files into one ie: all the
       histogram and all the Ntuples into the source files are grouped
       into one file. Ntuple with the same ID are merged.
 <p>
  <li> You can use
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:CHAIN">
 <font color="00993300"><tt>NTUPLE/CHAIN</tt></font>
 </a>
 . With this mechanism, the ntuples stay
       in there respective file but can be analyse in one go.
 </ol>
<HR SIZE=6><h1>Can I run PAW on my MacIntosh ?
</h1>MacIntosh is not a
 <a href="http://wwwinfo.cern.ch/asd/cernlib/version.html"><b>CERNLIB</b></a>
 supported platform, but some ports have been done outside <b>CERN</b>.
 for example on
 <a href="http://www-jlc.kek.jp/~fujiik/macosx/10.2.X">MacOS X</a>.
 <p>
 It is also possible to run <b>PAW</b> on a remote host
 and display the <b>PAW</b> graphics window on a MacIntosh.

 This can be achieve in two ways:
 <ol>
 <li> With a X11 emulator (like macX) on the MacIntosh and the
      X11 version of <b>PAW</b> running on the host.
      For more details can be found in the
      <a href="http://consult.cern.ch/writeup/xusage">
      Guide for the Usage of X Window at CERN
      </a>.
 <li> With a TELNET emulator using
      Tektronix 4014/Falco graphics emulation (workstation type 7878).
 </ol>
<HR SIZE=6><h1>How to fit 2-D vectors in PAW ?
</h1> Here is an example showing how to proceed:

 <FONT COLOR="#993300"><pre>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">MACRO</a> FIT2D
 *
 * Macro to test 2-D fits of functions F(x1,x2) = Y to data.
 *
 <a href"http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_VIEWING.html#GV:ZONE">ZONE</a> 2 2
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:OPTION">OPT</a> NSTA

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:DELETE">H/DEL</a> *
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:DELETE">VECT/DEL</a> *

 NP= 3
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:CREATE">VECT/CREA</a> PAR([NP])  R 100.0 1.0 1.0
 VECT/CREA STEP(<a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Variables.html#MSV:Number">[NP]</a>) R 1.0 1.0 1.0
 VECT/CREA PMIN([NP]) R 1.0 0.0 1.0
 VECT/CREA PMAX([NP]) R 1.0 1.0 1.0
 *
 * Define number of bins in X and Y, then book vectors:
 *
 NX= 6
 NY= 8
 MINX=  0.0
 MAXX=  3.0
 MINY=  0.0
 MAXY=  4.0
 N= [NX]*[NY]
 VECT/CREA Y([N])
 VECT/CREA EY([N])
 VECT/CREA X([N],2)
 *
 * Make dummy data using random function HRNDM2. Observe that here the values to
 * be expected from the fits are defined:
 *                    |          |
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:FUN2">FUN2</a> 20 EXP(-0.5*(((1.5-X)**2+(2.0-Y)**2)/(3.**2))) 20 [MINX] [MAXX] _
 20 [MINY] [MAXY]
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_CREATE.html#HC:2DHIST">2D</a> 30 'DATA'  [NX] [MINX] [MAXX] [NY] [MINY] [MAXY]
 APPLICATION <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:COMIS">COMIS</a> QUIT
       SUBROUTINE RNDM
       DO 10 I=1,10000
         CALL HRNDM2(20,RX,RY)
         CALL HFILL(30,RX,RY,1.0)
  10   CONTINUE
       END
       CALL RNDM
       END
 QUIT
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">H/PL</a> 30 LEGO
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_GET_VECT.html#HG:CONTEN">GET/CON</a> 30 Y
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_GET_VECT.html#HG:ERRORS">GET/ERR</a> 30 EY
 *
 * Put coordinates x1 and x2 into vector X:
 *
 BINWX= ([MAXX]-[MINX])/[NX]
 BINWY= ([MAXY]-[MINY])/[NY]
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Looping.html#MSL:DO">DO</a> I=1,[NY]
   DO J=1,[NX]
     ZX= <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>( [MINX]+[BINWX]*([J]-0.5) )
     ZY= <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>( [MINY]+[BINWY]*([I]-0.5) )
     N= <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>( ([I]-1)*[NX]+[J] )
     VECT/INP X([N],1) [ZX]
     VECT/INP X([N],2) [ZY]
   ENDDO
 ENDDO
 *
 * Do the fit:
 *
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:INPUT">V/IN</a> PAR 100.0 1.0 1.0
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:FIT">V/FIT</a> X Y EY FUNXY.FOR 0 [NP] PAR STEP PMIN PMAX

 | Plot result:
 P1= PAR(1)
 P2= PAR(2)
 P3= PAR(3)
 ZONE 1 2 2 S
 FUN2 50 [P1]*EXP(-0.5*((([P2]-X)**2+([P3]-Y)**2)/(3.**2))) [NX] [MINX] [MAXX] _
 [NY] [MINY] [MAXY] ' '
 H/PL 50 LEGO

 RETURN
 </pre></font>
 Where the <B>COMIS</B> function <FONT COLOR="#993300"><tt>FUNXY.FOR</tt></font> is:
 <FONT COLOR="#993300"><pre>
       FUNCTION FUNXY(X)
       DIMENSION X(2)
       COMMON/PAWPAR/PAR(3)
       FUNXY= PAR(1)
      &      *EXP( -0.5*(((PAR(2)-X(1))**2+(PAR(3)-X(2))**2)/(3.**2)) )
       END
 </pre></font>

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="fit2d.gif">
 </TD><TD>
 <FONT COLOR="#993300"><pre>
       PAW > exe fit2d
            **********************************************
            *                                            *
            * Function minimization by SUBROUTINE HFITV  *
            * Variable-metric method                     *
            * ID =          0  CHOPT = 0                 *
            *                                            *
            **********************************************
        Convergence when estimated distance to minimum (EDM) .LT.  0.10E+01

        FCN=   44.38704     FROM MIGRAD    STATUS=CONVERGED     70 CALLS       71 TOTAL
                            EDM=  0.92E-04    STRATEGY= 1      ERROR MATRIX ACCURATE

         EXT PARAMETER                                   STEP         FIRST
         NO.   NAME        VALUE          ERROR          SIZE      DERIVATIVE
          1      P1        232.45        2.4176       0.58806       0.23439E-04
          2      P2        1.7379       0.10665       0.24700E-01   0.10854
          3      P3        2.0745       0.81073E-01   0.19395E-01  -0.86093E-01

        CHISQUARE = 0.9864E+00  NPFIT =    48

       PAW >
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to re-scale an histogram ?
</h1>The following routine (file
 <FONT COLOR="#993300"><tt>rescale.f</tt></font>) can be used. It rescale
 the histogram
 Id1 into the histogram Id2 with the new axis coordinates
 X1 and X2. The number of bins of Id2 is computed in order
 to have the same bin width as Id1.

 <FONT COLOR="#993300"><pre>
       Subroutine Rescale(Id1,Id2,X1,X2)
       Character*32 Chtitl
       Logical Hexist
       Call Hgive(Id1,Chtitl,Ncx,Xmin,Xmax,Ncy,Ymin,Ymax,Nwt,Loc)
       Bw   = (Xmax-Xmin)/Ncx
       Nbin = (X2-X1)/Bw
       Bw2  = Bw/2.
       If (Hexist(Id2)) Call Hdelet(Id2)
       Call Hbook1(Id2,Chtitl,NBin,X1,X2,0.)
       Do I=1,Ncx
          Call Hix(Id1,I,X)
          XI = X+Bw2
          W  = Hx(Id1,XI)
          Call Hfill(Id2,XI,0.,W)
       Enddo
       End
 </pre></font>

 Example:

 <FONT COLOR="#993300"><pre>
 PAW > Call rescale.f(10,11,-3.,10.)
 PAW > h/pl 11
 </pre></font>
<HR SIZE=6><h1>How to execute a macro in batch mode ?
</h1><b>PAW</b> should be started as follows:
 <p>
 <table cols=2 width="50%">
 <tr><td>
 <b>on Unix</b>
 </td><td>
 <FONT COLOR="#993300"><pre>
 paw -b macro_name
 </pre></font>
 </td></tr>
 <tr><td>
 <b>on VMS</b>
 </td><td>
 <FONT COLOR="#993300"><pre>
 PAW/batch=macro_name
 </pre></font>
 </td></tr>
 </table>

 If the macro produce a PostScript file, the first parameter
 of the command METAFILE (LUN) must be negative:

 <FONT COLOR="#993300"><pre>
    Macro macro_name
    For/File  1 filename.ps
    Metafile -1 -111
      .
      .
      here put your graphic commands
      .
      .
    close 1
 </pre></font>
 To know if a <b>PAW</b> session is running in batch
 or interactive mode mode, it is enough to put the following
 lines in the <FONT COLOR="#993300"><tt>pawlogon.kumac</tt></font>
 file:
 <FONT COLOR="#993300"><pre>
    if $INDEX($ARGS,'-b') = 0 then
       a/cr batch 0
    else
       a/cr batch 1
    endif
 </pre></font>
 Then every where you need to know the running mode it is
 enough to test the value of the alias
 <FONT COLOR="#993300"><tt>batch</tt></font>.
 <p>
 <b>Arguments passing</b>
 <p>
 It is NOT possible to pass directly arguments to a macro executed in batch.
 Nevertheless this problem can be bypass using environment variables.
 <p>

 <table cols=2 width="50%">
 <tr><td>
 <b>On Unix (csh)</b>
 </td><td>
 <FONT COLOR="#993300"><pre>
 setenv arg1 hello
 paw -b macro_name
 </pre></font>
 </td></tr>
 <tr><td>
 <b>On Unix (ksh)</b>
 </td><td>
 <FONT COLOR="#993300"><pre>
 export arg1=hello
 paw -b macro_name
 </pre></font>
 </td></tr>
 <tr><td>
 <b>On VMS</b>
 </td><td>
 <FONT COLOR="#993300"><pre>
 arg1 :== hello
 PAW/batch=macro_name
 </td></tr>
 </pre></font>
 <p>
 </table>
 <p>
 In all cases (UNIX, VMS ...) in the macro "macro_name" it
 is enough to use <FONT COLOR="#993300"><tt>$ENV(arg1)</tt></font>
 to get the value of the global variable.
 <FONT COLOR="#993300"><tt>arg1</tt></font>
 <br>Example:

 <FONT COLOR="#993300"><pre>
 mess $ENV(arg1)
 </pre></font>
<HR SIZE=6><h1>How to define the colour map for the option COLZ of HISTO/PLOT ?
</h1>The option
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:OPTION"><tt>COL</tt></a>
 (or <FONT COLOR="#993300"><tt>COLZ</tt></font> which draw the colour map in
 addition) uses a colour map from the colour indexes
 0 to 7 (first 8 colours) if the parameter
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET"><tt>NCOL</tt></a> is less
 or equal to 8, or the colour indexes 8 to
 <FONT COLOR="#993300"><tt>NCOL</tt></font> if the
 parameter
 <FONT COLOR="#993300"><tt>NCOL</tt></font> is greater than 8.
 This allows to leave
 as they are the first 8 <b>basic</b> colours. The parameter
 <FONT COLOR="#993300"><tt>NCOL</tt></font>
 can be changed with the command
 <FONT COLOR="#993300"><tt>SET</tt></font>. The following macro
 illustrate the various cases.
 <table>
 <tr>
 <td><img src="colz1.gif"></td>
 <TD ROWSPAN="4" NOSAVE>
 <FONT COLOR="#993300"><pre>
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">Macro</a> Colz
       Set * ; Opt * ; <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:DELETE">H/Del</a> *
       *
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:FUN2">Fun2</a> 100 1000*(x**2+y**2) 100 -1 1 100 -1 1 ' '
       *
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:MESSAG">Mess</a> ' '
       Mess 'The first 8 (0-7) basic colours are used'
       Mess ' '
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">Hist/Plot</a> 100 COLZ
       Wait
       *
       Mess ' '
       Mess 'SET NCOL allows to enlarge the colour map and defines'
       Mess 'a grey scale ramp from color index 8 to NCOL'
       Mess ' '
       Set NCOL 20
       Hist/Plot 100 COLZ
       Wait
       *
       Mess ' '
       Mess 'The command PALETTE defines (by default) a geographical'
       Mess 'palette form 8 to NCOL'
       Mess ' '
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_ATTRIBUTES.html#GA:PALETT">Palette</a> 1
       Hist/Plot 100 COLZ
       Wait
       *
       Mess ' '
       Mess 'The command COLOR allows to define individually the colours.'
       Mess ' '
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_ATTRIBUTES.html#GA:COLORT">Color</a> 20 1 0 0
       Color  8 1 0 0
       Color 15 1 0 0
       Hist/Plot 100 COLZ
       *
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:RETURN">Return</a>
 </pre></font>
 </TD>
 </tr>
 <tr>
 <td><img src="colz2.gif"></td>
 </tr>
 <tr>
 <td><img src="colz3.gif"></td>
 </tr>
 <tr>
 <td><img src="colz4.gif"></td>
 </tr>
 </table>
 <p>
 The following example is in fact a tool allowing to define a smooth colour
 map in a very simple way. This tool consist of 2 <b>COMIS</b> routines which
 should be saved in the files <tt>shade.f</tt> and <tt>setshd.f</tt>. The
 routine <tt>setshd</tt> allows to define a set (up to 20) of fixed colours
 which will be used to define the colour map. Once this set of colours is
 define, a single call to <tt>shade</tt> allows to define the colour map.
 An example is given below, with the macro <tt>shade.kumac</tt>.
 <p>
 <b>File "shade.f":</b>
 <FONT COLOR="#993300"><pre>
       subroutine shade()
       parameter (nmx = 20)
       common /shpt/ npt,idx(nmx),r(nmx),g(nmx),b(nmx)
       if (npt.lt.2) then
          print*, 'Error: at least two colours are needed'
          return
       endif
       do i=2,npt
          j  = i-1
          i1 = idx(j)
          i2 = idx(i)
          r1 = r(j)
          g1 = g(j)
          b1 = b(j)
          r2 = r(i)
          g2 = g(i)
          b2 = b(i)
          n  = i2-i1+1
          do ii=i1,i2
             scale = float(ii-i1)/(n-1)
             rs = (r2 - r1)*scale + r1
             gs = (g2 - g1)*scale + g1
             bs = (b2 - b1)*scale + b1
             call iscr(1,ii,rs,gs,bs)
          enddo
       enddo
       end
 </pre></font>
 <b>File "setshd.f":</b>
 <FONT COLOR="#993300"><pre>
       subroutine setshd(idxi, ri, gi, bi)
       parameter (nmx = 20)
       common /shpt/ npt,idx(nmx),r(nmx),g(nmx),b(nmx)
       if (idxi.lt.0) then
          npt = 0
          return
       endif
       npt = npt+1
       if (npt.gt.nmx) then
          print*, 'Error: too many colours'
          return
       endif
       idx(npt) = idxi
       r(npt)   = ri
       g(npt)   = gi
       b(npt)   = bi
       end
 </pre></font>
 <b>File "shade.kumac":</b>
 <FONT COLOR="#993300"><pre>
 Macro shade
 set ncol 255
 fun2 100 exp(-.5*((x-75)/10)**2)*exp(-.5*((y-60)/10)**2) 100 45 105 100 30 90 ' '
 call setshd.f( -1,0.0,0.0,0.0)
 call setshd.f(  8,0.0,0.0,1.0)
 call setshd.f(100,1.0,0.0,0.0)
 call setshd.f(130,1.0,1.0,0.0)
 call setshd.f(180,0.0,1.0,0.5)
 call setshd.f(255,1.0,0.6,0.5)
 call shade.f
 h/pl 100 colz
 h/del 100
 return
 </pre></font>
 Just do:
 <FONT COLOR="#993300"><pre>
 PAW > Exec shade
 </pre></font>
 and you will get the following picture:
 <center>
 <img src="palette.gif">
 </center>

 The two following files give an other example showing how to use the
 option COLZ with a defined colour table. This example is an extension
 of the previous one. It allows to define the colors in histogram Z coordinates
 (those visible on the COLZ plot).
 <p>
 <b>File "colz.kumac":</b>

 <FONT COLOR="#993300"><pre>
 Macro Colz
 Opt * ; h/del * ; v/del *
 fun2 2 sin(x)/x*cos(y)*y 100 -6 6 100 -6 6 ' '
 N = 6
 V/create Z([N]) R -12  -4  -1   0   1  12
 V/create R([N]) R 1.0 1.0 0.0 1.0 0.0 0.0
 V/create G([N]) R 0.0 1.0 1.0 1.0 1.0 0.0
 V/create B([N]) R 0.0 0.0 1.0 1.0 0.0 1.0
 call colz.f(2,255,[N],Z,R,G,B)
 Return
 </pre></font>

 <b>File "colz.f":</b>

 <FONT COLOR="#993300"><pre>
       Subroutine Colz(Id,Ncol,N,Z,R,G,B)
 *
 * This procedure defines a mapping of a 2D histogram content to a palette
 * of colours defines by R G B values. Ncol is the number of colours in the
 * colour map.
 * Z(i) is mapped to R(i), G(i), B(i).
 * If Z(1) < Zmin, Zmin is used, is Z(N) > Zmax Z max is used
 *
       Dimension Z(N),R(N),G(N),B(N)
       Character*32 Chtitl
 *
       Call Hgive(Id,Chtitl,Ncx,Xmin,Xmax,Ncy,Ymin,Ymax,Nwt,Loc)
 *
       Call Igset('NCOL',Float(Ncol))
 *
       Zmin = Hij(Id,1,1)
       Zmax = Zmin
       Do j=1,Ncy
          Do I=1,Ncx
             Zi = Hij(Id,i,j)
             If (Zi.Gt.Zmax) Zmax = Zi
             If (Zi.Lt.Zmin) Zmin = Zi
          Enddo
       Enddo
       Dz = Zmax-Zmin
 *
       Call Setshd( -1,0.0,0.0,0.0)
       Do I=1,N
          Zi  = Z(I)
          If (Zi.Lt.Zmin) Zi = Zmin
          If (Zi.Gt.Zmax) Zi = Zmax
          Idz = Int(((Zi-Zmin)/Dz)*(Ncol-8)+8)
          Call Setshd(Idz,R(I),G(I),B(I))
       Enddo
       Call Shade
       Call Hplot(Id,'COLZ',' ',0)
       End
 *.__________________________________
 *
       Subroutine Shade()
       Parameter (Nmx = 20)
       Common /SHPT/ Npt,Idx(Nmx),R(Nmx),G(Nmx),B(Nmx)
       If (Npt.Lt.2) Then
          Print*, 'Error: at least two colours are needed'
          Return
       Endif
       Do I=2,Npt
          J  = I-1
          I1 = Idx(j)
          I2 = Idx(i)
          R1 = R(j)
          G1 = G(j)
          B1 = B(j)
          R2 = R(i)
          G2 = G(i)
          B2 = B(i)
          n  = i2-i1+1
          Do Ii=I1,i2
             Scale = Float(Ii-I1)/(N-1)
             Rs    = (R2 - R1)*Scale + R1
             Gs    = (G2 - G1)*Scale + G1
             Bs    = (B2 - B1)*Scale + B1
             Call Iscr(1,Ii,Rs,Gs,Bs)
          Enddo
       Enddo
       End
 *.__________________________________
 *
       Subroutine Setshd(Idxi, Ri, Gi, Bi)
       Parameter (Nmx = 20)
       Common /SHPT/ Npt,Idx(Nmx),R(Nmx),G(Nmx),B(Nmx)
       If (Idxi.Lt.0) Then
          Npt = 0
          Return
       Endif
       Npt = Npt+1
       If (Npt.Gt.Nmx) Then
          Print*, 'Error: too many colours'
          Return
       Endif
       Idx(Npt) = Idxi
       R(Npt)   = Ri
       G(Npt)   = Gi
       B(Npt)   = Bi
       End
 </pre></font>
 Just do:
 <FONT COLOR="#993300"><pre>
 PAW > Exec colz
 </pre></font>
 and you will get the following picture:
 <p>
 <center>
 <img src="colz.gif">
 </center>
<HR SIZE=6><h1>How to use a COMIS function rather than subroutine in a macro ?
</h1>The following example shows how proceed:

 <FONT COLOR="#993300"><pre>
 Appl Comis Quit
       Function Square(x)
       Square = x*x
       End
 Quit

 Do i=1,9
    x = Square( <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$RSIGMA</tt></font></a>([i]) )
    Mess Square of [i] is $CALL([x])
 Enddo
 </pre></font>

 The output of this macro is:

 <FONT COLOR="#993300"><pre>
 PAW > exe test
  Square of 1 is 1
  Square of 2 is 4
  Square of 3 is 9
  Square of 4 is 16
  Square of 5 is 25
  Square of 6 is 36
  Square of 7 is 49
  Square of 8 is 64
  Square of 9 is 81
 </pre></font>

 An other way to use $CALL with macro variable is:

 <FONT COLOR="#993300"><pre>
 Appl Comis Quit
       Function Square(x)
       Square = x*x
       End
 Quit
 x = $Rsigma(16)
 Mess Square of [x] is $CALL('square('//[x]//')')
 </pre></font>

 Note also:

 <FONT COLOR="#993300"><pre>
  $CALL('fun(args)')  ...... Call a Fortran REAL FUNCTION
  $ICALL('ifun(args)')  .... Call an INTEGER FUNCTION
  $LCALL('lfun(args)')  .... Call a LOGICAL FUNCTION and return 0 or 1
  $DCALL('dfun(args)')  .... Call a DOUBLE PRECISION FUNCTION
 </pre></font>
<HR SIZE=6><h1>How to call CERN Library from C or C++ ?
</h1>This can be done with the <TT>cfortran.h</tt> header file.
 The way to use this file is explained in the following pages:

 <UL>
 <li><a href="http://wwwinfo.cern.ch/asdcgi/listcernlibfaqs.pl/3">A CERNLIB FAQ</a>
 <li><a href="http://www.gsi.de/computing/cern/cfortran.html"> A GSI page </a>.
 </UL>
<HR SIZE=6><h1>How to rebuild PAW with a larger memory ?
</h1><b>PAW</b> should be re-link with a modified main program. The standard
 <b>PAW</b> main program is (copy/paste it in
 <FONT COLOR="#993300"><tt>pamain.f</tt></font> for UNIX and in
 <FONT COLOR="#993300"><tt>pamain.for</tt></font> for windows):
 <FONT COLOR="#993300"><pre>
       PROGRAM PAMAIN
 *
 *        MAIN Program for basic PAW
 *
       PARAMETER (NWPAW=2000000)
 *
       COMMON/PAWC/PAWCOM(NWPAW)
 *
 <FONT COLOR="#0000AA">      ON REAL UNDERFLOW IGNORE            <--- For HP only </font>
 *
       CALL PAW(NWPAW,IWTYP)
 *
       CALL KUWHAG
 *
       CALL PAEXIT
 *
       STOP
       END

       SUBROUTINE QNEXT
       END
 <FONT COLOR="#0000AA">
       SUBROUTINE CTL$GL_PCB              \
       ENTRY CTL$T_ACCOUNT                 | For VAX
       ENTRY CTL$T_USERNAME                | only
       END                                /
 </font>
 </pre></font>

 To increase the size of the <b>PAW</b> memory the parameter
 <FONT COLOR="#993300"><tt>NWPAW</tt></font> should
 be changed.
 <p>
 To rebuild <b>paw++</b> instead of <b>pawX11</B> be sure that:
 <ol>
 <li> the main program is
 (copy/paste it in
 <FONT COLOR="#993300"><tt>pamain.f</tt></font>):
 <FONT COLOR="#993300"><pre>
       PROGRAM PAMAIN
 *
       PARAMETER (NWPAW=2000000)
 *
       COMMON /PAWC/ PAWCOM(NWPAW)
 *
       CALL PAWPP(NWPAW,IWTYP)
 *
       IF (IWTYP .EQ. 999) THEN
          CALL KUWHAM('Paw++')
       ELSE
          CALL KUWHAG
       ENDIF
 *
       CALL PAEXIT
 *
       STOP
       END
 </pre></font>
 <li> Motif is available on your machine. If not you can download it from
 <a href="http://www.opengroup.org/openmotif/">http://www.opengroup.org/openmotif/</a>.
 </ol>

 <h3>On UNIX the link procedure is:</h3>

 <FONT COLOR="#993300"><pre>
 <FONT COLOR="#0000AA">OPTION=-O                                   <--- Machine dependent </font>
 CERNLIB=/cern/pro/lib
 <FONT COLOR="#0000AA">LIB=-lX11 -lm -lc                           <--- Machine dependent </font>
 <FONT COLOR="#0000AA">LIBMOTIF=-lXm -lXt                          <--- Machine dependent </font>

 f77 -o <FONT COLOR="#0000AA">pawX11</FONT> pamain.f  $OPTION    \       <FONT COLOR="#0000AA"> <--- replace pawX11 by paw++ to rebuild paw++</font>
   $CERNLIB/libpawlib.a             \
   $CERNLIB/libpacklib.a            \
   $CERNLIB/libgraflib.a            \
   $CERNLIB/libgrafX11.a            \
   $CERNLIB/libpacklib.a            \
   $CERNLIB/libmathlib.a            \
   $CERNLIB/libkernlib.a            \
   $CERNLIB/liblapack3.a            \
   $CERNLIB/libblas.a               \
   -L/usr/local/lib -lshift         \
 <FONT COLOR="#0000AA">  $LIBMOTIF                        \        <--- for paw++ only    </font>
   $LIB
 </pre></font>
 Copy/paste the previous script in an file named
 <FONT COLOR="#993300"><tt>buildpaw</tt></font> and do:
 <FONT COLOR="#993300"><pre>
 $ chmod +x buildpaw
 $ ./buildpaw
 </pre></font>
 The machine dependent variables should be defined as follow:
 <UL>
 <LI> On <B>HPUX</B>:
 <FONT COLOR="#993300"><pre>
 OPTION=+ppu -Wl,-E
 LIB=-L/usr/lib/X11R5 -lX11 -lm -lc -lPW -ldld
 </pre></font>

 <LI> On <B>LINUX</B> with <FONT COLOR="#993300"><tt>g77</tt></font>
 (replace <FONT COLOR="#993300"><tt>f77</tt></font> by
 <FONT COLOR="#993300"><tt>g77</tt></font> in the previous script):
 <FONT COLOR="#993300"><pre>
 OPTION=-O -Wl,-E
 LIB=-L/usr/X11R6/lib -lX11 -lcrypt -ldl -lnsl
 LIBMOTIF=-lXm -lXt -lXext -lXp
 </pre></font>

 <LI> On <B>ALPHA/OSF</B>:
 <FONT COLOR="#993300"><pre>
 OPTION=-D 40000000 -T 20000000 -taso -v
 LIB=-lX11 -ldnet_stub
 LIBMOTIF=-lXm -lXt
 </pre></font>

 <LI> On <B>SUN/SOLARIS</B>:
 <FONT COLOR="#993300"><pre>
 OPTION=-Bdynamic
 LIB=-L/usr/openwin/lib -lX11 -lw -lgen -lsocket -lnsl -lintl -ldl
 LIBMOTIF=-lXm -lXt
 </pre></font>
 </UL>

 <h3>On Windows 95,98, Me,2000 or NT 4 the link procedure is:</h3>
 <FONT COLOR="#993300"><pre>
 df -Fepawbig.exe pamain.for pawlib.lib lapack3.lib blas.lib graflib.lib
 grafX11.lib ix_higz.lib packlib.lib mathlib.lib kernlib.lib user32.lib
 advapi32.lib wsock32.lib
 </pre></font>
 To run properly this script, the following steps must be done:
 <ol>
 <li> Be sure you have <i>Compaq Visual Fortran</i> installed.
 <li> <a href="http://wwwinfo.cern.ch/asd/cernlib/version.html">Download</a>
 in a build folder (let's say
 <FONT COLOR="#993300"><tt>C:\cern</tt></font>) the CERN libraries
 mentioned in this script.
 <li> In <FONT COLOR="#993300"><tt>C:\cern</tt></font> create
 <FONT COLOR="#993300"><tt>pamain.for</tt></font> as explained above.
 <li> In <FONT COLOR="#993300"><tt>C:\cern</tt></font> copy/paste the
 previous script in an file named
 <FONT COLOR="#993300"><tt>buildpaw.bat</tt></font>.
 <li> Open a MS-DOS Prompt with the Visual Fortran environment. It is
 provided with <i>Compaq Visual Fortran</i>, change directory to
 <FONT COLOR="#993300"><tt>C:\cern</tt></font> and do:
 <FONT COLOR="#993300"><pre>
 C:\cern buildpaw
 </pre></font>
 </ol>
<HR SIZE=6><h1>How to interpret a COMIS file from a compiled f77 program ?
</h1> Here is an example. This is a very simple main program invoking
 <b>COMIS</b>.

 <FONT COLOR="#993300"><pre>
       program main
       common/pawc/paw(100000)
       call hlimit(100000)
       call csinit(2000)
     1 call cspaus('Test')
       go to 1
       end
 </pre></font>

 This is the corresponding link procedure for a HP-UX system:

 <FONT COLOR="#993300"><pre>
 f77 -o ctest +ppu  ctest.f \
 /cern/pro/lib/libpawlib.a \
 /cern/pro/lib/libpacklib.a \
 /cern/pro/lib/libkernlib.a -ldld -Wl,-E
 </pre></font>

 You run the program <FONT COLOR="#993300"><tt>ctest</tt></font>. At the
 <b>COMIS</b> prompt, you can compile one or
 more <b>COMIS</b> files with the command

 <FONT COLOR="#993300"><pre>
  Cs > !file mytest.f
  Cs > call mytest#
 </pre></font>
<HR SIZE=6><h1>How to position the axis titles in the middle of each axis instead at the end ?
</h1> <h3>Since PAW version 2.07</h3> The command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_HPLOT.html#GH:ATITLE"><tt>ATITLE</tt></a> is able to
 do that.

 <H3>Before PAW version 2.07</h3> The following macro should be used:

 <FONT COLOR="#993300"><pre>
 MACRO ALABEL XLBL=' ' YLBL=' ' XDEL=0.05 YDEL=0.05
   NT   = $GRAFINFO('NT')
   TSIZ = $GRAFINFO('?TSIZ')
   TFON = $GRAFINFO('?TFON')
   X1   = $GRAFINFO('VPXMIN')  | Lower X limit of viewport in current NT
   X2   = $GRAFINFO('VPXMAX')  | Upper X limit of viewport in current NT
   Y1   = $GRAFINFO('VPYMIN')  | Lower Y limit of viewport in current NT
   Y2   = $GRAFINFO('VPYMAX')  | Upper Y limit of viewport in current NT
   SEL 0
   Xlx  = ([X2]+[X1])/2
   Xly  = [Y1] - [YDEL]
   Ylx  = [X1] - [XDEL]
   Yly  = ([Y2]+[Y1])/2
   SET TXFP [TFON] ; SET CHHE [TSIZ] ; SET TXAL 20
   SET TANG 0  ; ITX [Xlx] [Xly] [XLBL]
   SET TANG 90 ; ITX [Ylx] [Yly] [YLBL]
   SEL [NT]
 RETURN
 </pre></font>


 Example:
 <P>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="alabel.gif">
 </TD><TD>
 <FONT COLOR="#993300"><pre>
       PAW > zone 2 2
       PAW > Nul
       PAW > exe alabel XLBL=X-Title YLBL=Y-Title
 </pre></font>
 </TD></TR>
 </TABLE>
 <P>
 The offset of the labels can be changed (in normalized coordinates)
 with the parameter XDEL and YDEL.
<HR SIZE=6><h1>In a program, how to access histograms produced by an other process ?
</h1>On Unix systems (except HPUX), it is possible to communicate between
 processes using shared memory. In the histogram producer program, use the
 routine <tt>HLIMAP</tt> instead of <tt>HLIMIT</tt> to initialize <b>HBOOK</b>.
 The small program below illustrates the <tt>HLIMAP</tt> usage. The first
 <tt>HLIMAP</tt> parameter is the amount of space requested in the shared area,
 the second one is the name of the shared area.

 <TABLE BORDER=1 CELLSPACING=0 CELLPADDING=0>
 <TR><TH>Fortran version</TH><TH>C version</TH></TR>
 <TR><TD>
 <FONT COLOR="#993300"><pre>
       Program hserver
 *
       Call Hlimap(10000,'TEST')
 *
       Call Hbook1(1,'test1',100,-3.,3.,0.)
 *
       Call Hcopy(1,2,'test2')
       Call Hcopy(1,3,'test3')
 *
       Do i=1,100000000
          call rannor(a,b)
          call hf1(1,a,1.)
          call hf1(2,b,1.)
          call hf1(3,a**2+b**2,1.)
          if(mod(i,100000).eq.0)print *,' hserver in loop index ',i
       Enddo
 *
       End
 </pre></font>
 </TD><TD>
 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>
 #include &lt;stdlib.h>
 #include &lt;math.h>
 #include &lt;cfortran.h>
 #include &lt;hbook.h>

 #define PAWC_SIZE 10000

 typedef struct { float PAW[PAWC_SIZE]; } PAWC_DEF;
 #define PAWC COMMON_BLOCK(PAWC,pawc)
 COMMON_BLOCK_DEF(PAWC_DEF,PAWC);
 PAWC_DEF PAWC;
 #define X11 1


 int main(int argc, char **argv)
 {
    int   i;
    float a, b;

    HLIMAP(PAWC_SIZE, "TEST");

    HBOOK1(1,"test1",100,-3.,3.,0.);
    HCOPY(1,2,"test2");
    HCOPY(1,3,"test3");

    for (i=0;;i++) {
      a=6.*((float)random())/(float)RAND_MAX-3.;
      a=log(a*a);
      b=6.*((float)random())/(float)RAND_MAX-3.;
      b=log(b*b);
      HF1(1,a,1.);
      HF1(2,b,1.);
      HF1(3,a*a+b*b,1.0);
      if (!(i % 100000)) printf("\nloop index i=%d", i);
    }

    return 0;
 }
 </pre></font>
 </TD>
 </TABLE>

 <BR>
 Running this program gives:
 <FONT COLOR="#993300"><pre>
 $ hserver
  GLOBAL MEMORY CREATED, offset from LQ = 235337934
   hserver in loop index  100000
   hserver in loop index  200000
   hserver in loop index  300000
   hserver in loop index  400000
   hserver in loop index  500000
   hserver in loop index  600000
   hserver in loop index  700000
              .
              .
              .
 </pre></font>
 While the histograms producer program is running, it is possible to access
 the histograms in tow ways:
 <ol>
 <li> <b>With PAW</b>: <br><br>
 In <b>PAW</b> one should use the command <tt>GLOBAL_SECT</tt> to "see" shared
 memory:
 <FONT COLOR="#993300"><pre>
 PAW > GLOBAL_SECT TEST
 PAW > H/PL 1
 PAW > H/PL 1 U
 </pre></font>
 <IMG SRC="hserver.gif">
 <li> <b>With a user program</b>:
 <P>
 <TABLE BORDER=1 CELLSPACING=0 CELLPADDING=0>
 <TR><TH>Fortran version</TH><TH>C version</TH></TR>
 <TR><TD>
 <FONT COLOR="#993300"><pre>
       Program hreader
 *
       Character*80 name
       Common /PAWC/ A(10000)
 *
       Call Hlimit(10000)
       Call Hlimap(0,'TEST')
 *
       Call Hrin(1,9999,0)
       Call Hgive(1,name,nx,xmi,xma,ny,ymi,yma,nwt,loc)
       Print*, name,nx,xmi,xma
 *
       End
 </pre></font>
 </TD><TD>
 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>
 #include &lt;stdlib.h>

 #include &lt;cfortran.h>
 #include &lt;hbook.h>

 #define PAWC_SIZE 10000

 typedef struct { float PAW[PAWC_SIZE]; } PAWC_DEF;
 #define PAWC COMMON_BLOCK(PAWC,pawc)
 COMMON_BLOCK_DEF(PAWC_DEF,PAWC);
 PAWC_DEF PAWC;
 #define X11 1


 int main(int argc, char **argv) {

    char   fln[256];

    int    record_size=1024, success=0;
    char   name[80];
    int    nx,ny,nwt,loc;
    float  xmi, xma, ymi, yma, res;

    HLIMIT(PAWC_SIZE);
    HLIMAP(0,"TEST");
    HRIN(1,9999,0);
    HGIVE(histo,name,nx,xmi,xma,ny,ymi,yma,nwt,loc);
    printf("\n>>%d: %s, %d", histo, name, nx);

    return 0;
 }
 </pre></font>
 </TD>
 </TABLE>

 <BR>
 Running this program while <tt>hserver</tt> is running gives:
 <FONT COLOR="#993300"><pre>
 $ hreader
  test1
  100 -3.  3.
 $
 </pre></font>
 With <b>HBOOK</B> version older than
 <a href="http://wwwinfo.cern.ch/asdcgi/listpawbugs.pl/113">4.27/01</a>
 be careful to put the shared memory name in a character variable.
 </ol>
 Note that <b>HBOOK</b> does not delete the shared memory when the job
 finishes, that remains the user's responsibility .
<HR SIZE=6><h1>Dynamic linking (shared libraries).
</h1><B>COMIS</B> supports dynamic compilation and linking on HP-UX,
 SUN/OS/Solaris, ALPHA/OSF,
 Linux, IBM/RT and IRIX systems.
 Everywhere a <B>COMIS</B> filename <TT><FONT COLOR="#993300">file.f
 </FONT></TT>is given (in <TT><FONT COLOR="#993300">CALL</FONT></TT>, <TT><FONT COLOR="#993300">Fun/Plot</FONT></TT>,
 <TT><FONT COLOR="#993300">Ntuple/plot</FONT></TT>, etc...) the <B>COMIS
 </B>interpreter is invoked. To compile (instead of interpret) the code
 the following conventions have been introduced: (here shown with the <TT><FONT COLOR="#993300">CALL</FONT></TT>
 command) </P>

 <PRE><FONT COLOR="#993300">
 PAW > call file.f       | code is interpreted (default)
 PAW > call file.f77     | compilation of file.f with f77 and dynamic linking
 PAW > call file.c       | same with the C compiler</FONT>
 </PRE>
 <TT><FONT COLOR="#993300">file.c</FONT></TT> should have the following form:
 <PRE><FONT COLOR="#993300">
 #include <stdio.h>
 file_(int *i)
 {
    int j=*i*100;
    printf("this is a test %d\n",j);
 }</FONT>
 </PRE>
 Note the <TT><FONT COLOR="#993300">_</FONT></TT> added at the end of the 
 procedure name. Then to call it from <b>PAW</b> it is enough to do:
 <PRE><FONT COLOR="#993300">
 PAW > call file.c(123)
 this is a test 12300
 PAW > </FONT>
 </PRE>

 <P>It is possible to load shared objects without executing the code. The
 following macro gives an example: </P>

 <PRE><FONT COLOR="#993300">
                               Macro comp
                               appl comis quit
                               !file filename.</FONT><FONT COLOR="#DC143C">f77</FONT><FONT COLOR="#993300">
                               quit</FONT>
 </PRE>

 <P>in this case the local compiler is invoked to process <TT><FONT COLOR="#993300">filename.f</FONT></TT>
 (note that the file extension remains
 <TT><FONT COLOR="#993300">.f</FONT></TT> even if the file is called with
 the extension <TT><FONT COLOR="#993300">.f77</FONT></TT>).
 Before invoking the compiler, <B>COMIS</B> perform preliminary operations:</P>

 <OL>
 <LI>fills a list of used variables for ntuple watched common blocks, </LI>

 <LI>replaces <TT><FONT COLOR="#993300">VECTOR'</FONT></TT>s name by <TT><FONT COLOR="#993300">Q(link(i)+offs)</FONT></TT>,
 </LI>

 <LI>replaces calls to watched routines (<TT><FONT COLOR="#993300">CALL
 HFILL(...)</FONT></TT>) by <TT><FONT COLOR="#993300">call jumpcn(jmp(line),[-]line,...)</FONT></TT>
 </LI>
 </OL>

 <P>then <B>COMIS </B>creates and executes a script file to invoke the native <B><I>fortran
 compiler</I></B> and linker to create a shared object and load the shared
 object.</P>

 <P>C code can also be loaded as shared objects. The following macro gives
 an example: </P>

 <PRE><FONT COLOR="#993300">
                               Macro comp
                               appl comis quit
                               !file filename</FONT><FONT COLOR="#DC143C">.c</font><FONT COLOR="#993300">
                               quit
 </PRE>
 </FONT>

 <P>in this case <B>COMIS </B>creates and executes a script file to invoke the native
 <B><I>C compiler</I></B> and linker to create a shared object and load
 the shared object.</P>

 <P>It is also possible to load an existing shared library. In that case
 the local compiler is not invoked. There is two types of shared libraries:</P>

 <OL>
 <LI>shared libraries produced from <B><I>fortran</I></B> code (invoked with extension
 <TT><FONT COLOR="#DC143C">.sl</FONT></TT>),</LI>

 <LI>shared libraries produced from <B><I>C</I></B> code (invoked with extension
 <TT><FONT COLOR="#DC143C">.csl</FONT></TT>).</LI>
 </OL>

 <P>The following macro shows how to load a shared library produced from
 <B><I>fortran</I></B> code:</P>

 <PRE><FONT COLOR="#993300">
                               Macro load
                               appl comis quit
                               !file filename</FONT><FONT COLOR="#DC143C">.sl
 </FONT>                              <FONT COLOR="#993300">quit</FONT>
 </PRE>

 <P>in this case <B>COMIS</B> analyse the file <TT><FONT COLOR="#993300">filename.f
 </FONT></TT>to fill a list of used variables for ntuple watched common
 blocks, and then load the shared object <TT><FONT COLOR="#993300">filename.sl</FONT></TT>.</P>

 <P>The following macro shows how to load a shared library produced from
 <B><I>C</I></B> code:</P>

 <PRE>                               <FONT COLOR="#993300">Macro load
                               appl comis quit
                               !file filename</FONT><FONT COLOR="#DC143C">.csl
 </FONT>                              <FONT COLOR="#993300">quit</FONT>
 </PRE>

 <P>in this case <B>COMIS doesn't</B> analyse the source file, it only load the
 shared object
 <TT><FONT COLOR="#993300">filename</FONT><FONT COLOR="#DC143C"><B>.sl</B>
 </FONT></TT>.</B> This can be a way to use <b><i>fortran</i></b> features
 not supported by <B>COMIS</B> such as <tt>DOUBLE COMPLEX</tt>.</P>

 <P>Note that when a procedure has been is loaded with one of the methods
 described above, it can then be accessed by its name only i.e. the file
 extension is not needed anymore providing the procedure's code has not
 changed.

 <P>To produce and load the shared library, <B>COMIS </B>produced a temporary
 script file which looks like this:</P>

 <PRE><FONT COLOR="#993300">#! /bin/sh
 olddir=`pwd`
 cd CHPATH
 /bin/rm -f name.sl
 # for C compiler
 #    cc -c .... name.c
 CHCC name.c
 #for f77 compiler
 #    f77 -c .... name.f
 CHF77 name.f
 errno=$?'
 if [ $errno != 0 ]
 then
    exit $errno
 fi
 #for HPUX.
 ld -b -o name.sl name.o
 #for SUN.
 #    ld -G -o name.sl name.o     for Solaris
 ld -o name.sl name.o
 #for SGI.
 ld -shared -o name.sl name.o
 #for LINUX.
 ld -shared -o name.sl name.o
 #
 errno=$?
 if [ $errno != 0 ]
 then
   exit $errno
 fi
 /bin/chmod 555 name.sl
 /bin/rm -f name.o
 cd $olddir
 exit 0</FONT>
 </PRE>

 <P>This default script can be customised using <B>COMIS</B> directives.</P>

 <P>The user can redefine <TT><FONT COLOR="#993300">CHPATH </FONT></TT>-
 The new directory where shared object and temporary files will be located
 (default is <TT><FONT COLOR="#993300">/tmp/</FONT></TT>), </P>

 <PRE>                               <FONT COLOR="#993300">Macro SetPath
                               appl comis quit
                               !setopt 'string' path
                               quit</FONT>
 </PRE>

 <P>The user can redefine <TT><FONT COLOR="#993300">CHF77</FONT></TT> -
 <B><I>fortran </I></B>compiler directive:</P>

 <PRE>                               <FONT COLOR="#993300">Macro Setf77Options
                               appl comis quit
                               !setopt 'string' f77
                               quit</FONT></PRE>

 <P>The user can redefine <TT><FONT COLOR="#993300">CHCC </FONT></TT>- <B>C
 </B>compiler directive:</P>

 <PRE>                               <FONT COLOR="#993300">Macro SetCOptions
                               appl comis quit
                               !setopt 'string' cc
                               quit</FONT>
 </PRE>

 <P>To have the current values of the
    <TT><FONT COLOR="#993300">!setopt</FONT></TT> parameters use:
 <PRE>                               <FONT COLOR="#993300">Macro ShowOptions
                               appl comis quit
                               !setopt
                               quit</FONT>
 </PRE>

 <CENTER><TABLE BORDER=1 CELLSPACING=0 CELLPADDING=7 >
 <TR>
 <TD ALIGN=LEFT VALIGN=CENTER><B></B></TD>

 <TD>
 <CENTER><P><B>Default <TT><FONT COLOR="#993300">CHF77</FONT></TT> value
 (fortran options)</B></P></CENTER>
 </TD>

 <TD>
 <CENTER><P><B>Default <TT><FONT COLOR="#993300">CHCC</FONT></TT> value
 (C options)</B></P></CENTER>
 </TD>
 </TR>

 <TR>
 <TD><B>HPUX</B></TD>

 <TD><TT>f77 -c +z +ppu -K -O </TT>(before <A HREF="http://wwwinfo.cern.ch/asd/paw/bugs.html#2.09.03"><B>PAW</B>
 2.10</A>)<BR>
 <TT>f77 -c +z +ppu</TT></TD>

 <TD><TT>cc -c +z -O </TT>(before <A HREF="http://wwwinfo.cern.ch/asd/paw/bugs.html#2.09.03"><B>PAW</B>
 2.10</A>)<BR>
 <TT>cc -c +z</TT></TD>
 </TR>

 <TR>
 <TD><B>SGI</B></TD>

 <TD><TT>f77 -c -pic</TT></TD>

 <TD><TT>cc -c -pic</TT></TD>
 </TR>

 <TR>
 <TD><B>SUN</B></TD>

 <TD><TT>f77 -c</TT></TD>

 <TD><TT>cc -cckr -c</TT></TD>
 </TR>

 <TR>
 <TD><B>IBM/RT</B></TD>

 <TD><TT>xlf -qextname -qrndsngl -qcharlen=32767 -c</TT></TD>

 <TD><TT>cc -c</TT></TD>
 </TR>

 <TR>
 <TD><B>LINUX</B></TD>

 <TD><TT>g77 -c</TT></TD>

 <TD><TT>cc -c</TT></TD>
 </TR>

 <TR>
 <TD><B>ALPHA/OSF</B></TD>

 <TD><TT>f77 -c</TT></TD>

 <TD><TT>cc -c</TT></TD>
 </TR>
 </TABLE></CENTER>

 <H3>Restrictions:</H3>
 <OL>
 <LI> Suppose you load/call a file which contains the <tt>f1</tt> routine and
      then try load/call another file with the <tt>f2</tt> routine which calls
      <tt>f1</tt>. <B>It does not work on IBMRT</B>. You will get error:
 <FONT COLOR="#993300"><PRE>
                     ERROR: Undefined symbol: .f1_
 </PRE></FONT>
       To solve this problem you could add <tt>f1</tt> routine into file with
       <tt>f2</tt> routine.

 <P><LI> The list of the <b>CERNLIB</b> routines callable from a <b>COMIS</b>
         is given in the help of the command
         <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:CALL">
         <tt>FORTRAN/CALL</tt></a>. Only the routines given in that list can
         be called from an <i>interpreted</i> <b>COMIS</b> program. Nevertheless, it is
         possible to call other routines present in the <b>PAW</b> module from
         a <i>compiled</i> <b>COMIS</b> program but this feature is strongly machine
         dependent:
         <P>
         <ul>
         <li><b>It does not work on IBMRT and Digital UNIX</B>.<br><br>
         <li> On <B>HP</B> you can call any <b>PAW</b>
         routines and access any <b>PAW</b> common from any <b>COMIS</b>
         routine.<BR><br>
         <li> On <B>other platforms</B> you can do it after executing the macro:
 <FONT COLOR="#993300"><PRE>
                     APPL COMIS QUIT
                     !FILE 0.csl
                     QUIT
 </PRE></FONT>
         </ul>
         On UNIX, to check if the routine you want to call or the common
         block you want to access is used in the <b>PAW</b> module just do:
 <FONT COLOR="#993300"><PRE>
                     $ nm /cern/pro/bin/pawX11 | grep -i routine_name
 </PRE></FONT>
         If nothing is returned it means that <tt>routine_name</tt> cannot
         be accessed.

 <P><LI> On <B>Linux</B> the function name should not contains the character "<FONT COLOR="#993300"><TT>_</TT></FONT>".

 <P><LI> On <B>all platforms</B> when the routine name has no parameter,
         it is better to put empty parenthesis at the end of the routine name.
         On some platforms it is mandatory:
 <FONT COLOR="#993300"><PRE>
                           REAL FUNCTION select<FONT COLOR="#FF0000">()</FONT>
 </PRE></FONT>

 </OL>

 <H3>Note:</H3>
 We recommend to also have a look at
 <a href="http://www.phy.bnl.gov/~e910/html/doc/soft/sharedlib.html">this page</a>.
<HR SIZE=6><h1>How to use COMIS in FORTRAN ?
</h1>The original question was:
 <hr width=80%><i>
 <br>
 I would like to pass the name of a file containing COMIS-fortran
 statements to a fortran 77
 routine that would open the file and use COMIS to execute the COMIS file
 automatically (not interactively).
 </i>
 <p>
 <hr width=80%>
 <p>
 File main.f:
 <FONT COLOR="#993300"><pre>
        program main
        common/pawc/paw(100000)
        character*80 chfile
        integer csaddr
        call hlimit(100000)
        call csinit(2000)
 *-* file names are given like /xx/yy/file.f
 *-* the subroutine name is assumed to be file
    1   print *,' Give the name of the COMIS file to be executed'
        read (5,'(A)')chfile
        nch=lenocc(chfile)
        islash=index(chfile,'/')
 *-* search for / and .
        if(nch.gt.0)then
           idot=index(chfile,'.')
           if(idot.eq.0)go to 1
           ifirst=1
           do 10 i=idot-1,1,-1
              if(chfile(i:i).eq.'/')then
                 ifirst=i+1
                 go to 20
              endif
   10      continue
   20      continue
           call cltou(chfile)
 *-* compile file
           call csexec('!FILE '//chfile(1:nch),iret)
           if(iret.ne.0)go to 1
 *-* get subroutine address
           iad=csaddr(chfile(ifirst:idot-1))
 *-* execute routine
           call csjcal(iad,0,p,p,p,p,p,p,p,p,p,p)
           go to 1
        endif
        end
 </pre></FONT>
 File test.f:
 <FONT COLOR="#993300"><pre>
       subroutine test
 *-* stupid sum
       sum=0
       do i=1,1000
          sum=sum+i
       enddo
       print *,' SUM=',sum
       end
 </pre></font>
<HR SIZE=6><h1>A macro to draw the histograms statistics.
</h1>It is sometimes useful to draw the statistics
 of an histogram after the histogram drawing (even if the
 option STAT is not set), or to draw the statistics of several
 histograms on the same plot. The following macro allows to do that.

 <FONT COLOR="#993300"><pre>
    Macro Draw_Stat
 *
    Id = [1]
    X1 = [2]
    X2 = [3]
    Y1 = [4]
    Y2 = [5]
    N  = 6
    Dy = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:FUNCTI">$EVAL</a>(([Y2]-[Y1])/([N]+1))
    Xt = $EVAL([X1]+0.1)
    Yt = $EVAL([Y2]-[Dy])
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_VIEWING.html#GV:SELNT">Selnt</a> 1
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:BOX">Box</a> [X1] [X2] [Y1] [Y2]
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">Set</a> CHHE $EVAL(0.7*[Dy])
    Set TXAL 03
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ITX">Itx</a> [Xt] [Yt] ID        ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] Entries   ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] Mean      ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] Rms       ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] Overflow  ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] Underflow
 *
    Yt = $EVAL([Y2]-[Dy])
    Xt = $EVAL([X2]-0.1)
    Set TXAL 33
    Itx [Xt] [Yt] [Id]                     ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] $HINFO([Id],'ENTRIES')   ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] $HINFO([Id],'MEAN')      ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] $HINFO([Id],'RMS')       ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] $HINFO([Id],'OVERFLOW')  ; Yt = $EVAL([Yt]-[Dy])
    Itx [Xt] [Yt] $HINFO([Id],'UNDERFLOW')
 *
    Return
 </pre></font>

 This macro has five parameters:
 <ol>
 <li> The histogram identifier
 <li> X coordinate of bottom left corner
 <li> X coordinate of top right corner
 <li> Y coordinate of bottom left corner
 <li> Y coordinate of top right corner
 </ol>

 Example:

 <P>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="drawstat.gif">
 </TD><TD>
 <FONT COLOR="#993300"><pre>
       PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">H/Plot</a> 10
       PAW > Exec draw_stat 10 2 10 2 6    | the position is in cm
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to redefine the scale and redraw axis on the current plot ?
</h1>The commands
 <FONT COLOR="#993300"><tt>NULL</TT></font> and
 <FONT COLOR="#993300"><TT>TICKS</TT></font> combined allow to do that.
 <p>
 Example:
 <P>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="ticks.gif">
 </TD><TD>
 <FONT COLOR="#993300"><pre>
    SET * ; OPT *       | Reset the defaults
    Nul 0 1 0 1         | draw an empty frame with axis
    Set ndvy 5          | Change number of Y divisions
    Nul 0 10 0 10 ABS   | Redefine the scales
    Ticks XR 5 !        | Axis in the new coordinates
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to produce a graph from data stored in an ASCII file ?
</h1>The following example shows how to read data in a file and produce
 a graph with these data:

 <FONT COLOR="#993300"><pre>
    PAW > VECTOR/DELETE *
    PAW > VECTOR/READ   X,Y snoopy.dat
    PAW > GRAPH $VDIM(X,1) X Y
 </pre></font>

 The output produced is:
 <center><img src="snoopy.gif"></center>

 The file used is the following:
 <FONT COLOR="#993300"><pre>
   10.45700      19.02800
   9.867000      18.91000
   9.308000      18.61600
   8.630000      18.46800
   8.012000      18.38000
   7.393000      18.49800
   6.834000      18.61600
   5.862000      18.61600
   4.860000      18.38000
   3.829000      17.76100
   3.240000      16.96600
   2.710000      16.23000
   2.769000      14.90400
   2.209000      14.96300
   1.826000      15.28700
   1.708000      15.75800
   1.767000      16.20000
   2.150000      16.40600
   2.504000      16.46500
   2.828000      16.31800
   2.739000      14.78600
   3.063000      13.96200
   3.535000      13.34300
   3.976000      12.96000
   4.801000      12.48900
   5.596000      12.28300
   6.274000      12.16500
   6.863000      11.95900
   7.305000      11.51700
   7.806000      10.86900
   8.012000      10.51500
   7.894000      10.19100
   7.688000      9.838000
   7.246000      9.543000
   7.010000      9.779000
   7.452000      10.30900
   6.745000      11.34000
   5.803000      11.90000
   5.037000      11.72300
   5.214000      11.60500
   5.420000      11.16300
   5.125000      10.92800
   4.772000      10.72200
   4.242000      10.75100
   3.711000      10.54500
   3.358000      10.13300
   3.152000      9.602000
   3.417000      9.161000
   4.300000      9.013000
   4.624000      8.866000
   4.948000      8.277000
   4.890000      8.189000
   4.683000      8.159000
   4.536000      7.629000
   5.007000      7.010000
   4.566000      6.745000
   5.155000      6.068000
   4.477000      6.038000
   4.271000      5.744000
   4.477000      5.508000
   4.801000      5.331000
   5.214000      5.302000
   5.685000      5.538000
   5.655000      4.890000
   6.097000      3.976000
   6.627000      3.505000
   6.480000      2.592000
   5.891000      2.445000
   4.860000      2.474000
   4.389000      2.415000
   3.800000      2.003000
   3.594000      1.532000
   3.711000      1.149000
   4.035000      1.031000
   4.536000      1.060000
   4.683000      1.178000
   5.331000      1.031000
   6.598000      1.001000
   9.219000      .9430000
   10.45700      1.031000
   10.75100      1.237000
   10.75100      1.473000
   10.39800      1.856000
   9.985000      2.003000
   9.367000      2.180000
   8.984000      2.445000
   8.807000      2.946000
   8.748000      3.623000
   8.984000      3.918000
   9.602000      4.124000
   10.36800      3.594000
   11.34000      3.152000
   11.95900      3.152000
   11.48700      3.623000
   10.45700      4.035000
   9.750000      4.507000
   9.750000      5.361000
   9.396000      5.714000
   9.190000      6.598000
   9.161000      7.452000
   8.954000      8.041000
   8.895000      8.748000
   8.954000      9.426000
   8.984000      9.838000
   9.485000      10.39800
   9.956000      10.57400
   10.66300      10.66300
   11.10500      10.66300
   11.57600      9.897000
   12.10600      9.720000
   12.54800      9.750000
   13.13700      9.867000
   13.90300      10.54500
   14.34500      11.07500
   14.69800      12.10600
   14.72800      13.72600
   14.22700      15.46400
   14.02100      16.34800
   13.25500      17.73200
   12.01800      18.58600
   10.48600      19.05700
   </pre></font>
<HR SIZE=6><h1>How to fit a function taking into account errors on both (X and Y) axis ?
</h1> It can be handled using the general fitting program MINUIT, for which
 the user anyway has to calculate the quantity to be minimised (chisquare or
 -log likelihood). Then it is relatively simple to allow for errors in both X
 and Y when the chisquare (chi2) is calculated, assuming the usual approximations can
 be made.
 <p>Assuming that fitting is done to a straightforward one- dimensional
 histogram using essentially a minimization of chi2.  Then the only
 complication is that the "error" in each bin, i.e. the error in the
 difference between the function curve and the bin contents, has an added
 component due to the fact that x is also not perfectly known.  The usual
 technique is to calculate chi2 as the sum over bins of:
 <pre>
           (n - f)<sup>2</sup>
        -------------
        dy<sup>2</sup> + (f' dx)<sup>2</sup>
 </pre>
 where <tt>n</tt> is the experimental bin content, <tt>f</tt> and <tt>f'</tt>
 are respectively the
 value of the function being fitted and its derivative, both taken at the
 nominal value of <tt>x</tt>, and <tt>dx</tt> and <tt>dy</tt> are the errors
 in <tt>x</tt> and <tt>y</tt>.  (<tt>dy</tt> is
 usually taken as the square root of <tt>n</tt>.)  This clearly assumes that the
 function being fitted is nearly a straight line inside a bin (or inside a
 <tt>dx</tt>).  If that is not true, the problem becomes highly non-linear and I
 wouldn't believe the results of any fit.
 <p>The expression above is easy to calculate, since as you are looping
 over bins, you can remember the value of <tt>f</tt> from the previous bin and use
 that to estimate <tt>f'</tt>.  Just watch out at both ends!
 <p>If the chi2 is calculated as indicated above and the
 approximations are valid, then all the other features of MINUIT
 (calculation of parameter errors, error matrix, contours, etc.) will
 automatically take account correctly of the errors in x and y.
 <p>
 Fred James
<HR SIZE=6><h1>Why SET and IGSET ?
</h1><tt>IGSET</tt> is the attributes setting command of the
 basic graphics attributes coming from the <b>HIGZ</b> package
 whereas <tt>SET</tt> is the attributes setting command of the
 histogram plotting package <b>HPLOT</b> (based on <b>HIGZ</b>).
 The <b>HPLOT</b> attributes
 are more specific than the <b>HIGZ</b> attributes.

 <p>
 All the <tt>IGSET</tt> options are also available in <tt>SET</tt>. It is
 strongly recommended to use only <tt>SET</tt> to avoid mistakes.

<HR SIZE=6><h1>How to create a Column Wise NTuple (CWN) ?
</h1>The following example should be linked with CERN program library.
 It creates the Column Wise Ntuple (CWN) number 1 in the file cwn.hbook.
 <FONT COLOR="#993300"><pre>
       Program CWN
 *
       Common /Pawc/ H(100000)
       Parameter (Nmax = 100)
       Common /CWN/  N,X(Nmax),Y(Nmax),Z(Nmax)
 *.___________________________________________
 *
       Call Hlimit(100000)
 *
       Call Hropen(1,'CWN','cwn.hbook','N',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
 *
       Call Hbnt(1,'CWN',' ')
       Call Hbname(1,'Block1',N,'N[0,100], X(N), Y(N), Z(N)')
 *
       Do N=1,Nmax
          Do I=1,N
             X(N) = N*N
             Y(N) = N*N*N
             Z(N) = SIN(X(N))
          EndDo
          Call HFNT(1)
       EndDo
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('CWN')
 *
       end
 </pre></font>
<HR SIZE=6><h1>How to access PAW vectors in a COMIS program ?
</h1>The following example shows how to share vectors
 between a COMIS program and a <b>PAW</b> macro. This is done via
 the COMIS declaration VECTOR.

 <FONT COLOR="#993300"><pre>
 sigma x=array(10,1#10)
 v/li

 application comis quit
       Subroutine Square
       VECTOR x,sqrx(10)
       Do i = 1, 10
          sqrx(i)=x(i)**2
          Write (6,*) 'square of',x(i),sqrx(i)
       Enddo
       End
 quit

 call square
 v/pri x
 v/pri sqrx
 </pre></font>

 In this example, the vector x is created via a <b>PAW</b> command
 and is visible in the routine SQUARE. The vector SQRX doesn't
 exists before SQUARE is called, so it is created with 10
 entries.
<HR SIZE=6><h1>How much memory should be reserved in the PAWC common block to store a Column Wise Ntuple (CWN) ?
</h1>The answer has two parts. The first part is independent of the number of
 events. It consists of the space taken to buffer the columns during runtime.
 Assume we have a Ntuple with
 <FONT COLOR="#993300"><tt>N</tt></font>
 columns and
 <FONT COLOR="#993300"><tt>M</tt></font>
 events (rows).

 <FONT COLOR="#993300"><pre>
           (BSIZE+250)*N+20000  words
 </pre></font>

 Where
 <FONT COLOR="#993300"><tt>BSIZE</tt></font>
 is the Ntuple buffer size as can be set via the routine
 <FONT COLOR="#993300"><tt>HBSET</tt></font>
 (default 1024 words).
 <p>
 The second part is taken by the <B>RZ</B> directory structure which contains the
 keys that describe where the Ntuple extensions are stored (Ntuple extensions
 are the column memory buffers which are flushed to disk, each extension has
 a size of
 <FONT COLOR="#993300"><tt>BSIZE</tt></font> words).
 For each key 6 words are needed. The number of keys
 needed to store
 <FONT COLOR="#993300"><tt>M</tt></font>
  events is dependent on the column packing factor (the
 higher the packing factor is, the more events fit in a column buffer) and
 on the
 <FONT COLOR="#993300"><tt>BSIZE</tt></font>
 (the larger is
 <FONT COLOR="#993300"><tt>BSIZE</tt></font>
 the fewer extensions need to be stored).
 An upper limit is given by the key quota as specified in
 <FONT COLOR="#993300"><tt>HROPEN</tt></font>,
 via
 <FONT COLOR="#993300"><tt>IQUEST(10)</tt></font>
 (don't forget to include the
 <FONT COLOR="#993300"><tt>COMMON/QUEST/IQUEST(100)</tt></font>
 in the routine where you call
 <FONT COLOR="#993300"><tt>HROPEN</tt></font>
 ). Assume you set
 <FONT COLOR="#993300"><tt>IQUEST(10)=65000</tt></font>
 (the maximum) you will need at maximum:

 <FONT COLOR="#993300"><pre>
           65000*6 = 390000  words
 </pre></font>

 Following from the above the maximum obtainable file size can easily be
 determined:

 <FONT COLOR="#993300"><pre>
           IQUEST(10)*BSIZE*4  bytes
 </pre></font>

 The number of events that can be stored in a file is approximately given by:

 <FONT COLOR="#993300"><pre>
           M = IQUEST(10)*BSIZE*packing/N
 </pre></font>

 where <FONT COLOR="#993300"><tt>packing</tt></font> is the average packing factor of all columns (all elements
 of an array column are stored in the same buffer so they have a very small
 packing factor).
<HR SIZE=6><h1>How to call a C program in PAW ?
</h1><B>COMIS</B> is able to invoke the local C compiler. Just do:

 <FONT COLOR="#993300"><pre>
 PAW > call file.c
 </pre></font>

 where <FONT COLOR="#993300"><tt>file.c</tt></FONT> is:

 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>
 file_()
 {
   printf("this is a test\n");
 }
 </pre></font>
 Note that on some machine (HPUX, Linux ...) a "<FONT COLOR="#993300"><tt>_</tt></FONT>" should
 be added at the end of the procedure name. This is not necessary on all
 machines just try both on your machine if you are unsure.
 <p>
 If you want to pass parameters, you should be careful to declare them as
 pointers as FORTRAN passes parameters by address and C by value. Example:
 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>
 file_(int *i)
 {
    int j=*i*100;
    printf("this is a test %d\n",j);
 }
 </pre></font>
 this gives:
 <FONT COLOR="#993300"><pre>
 PAW > call file.c(123)
 this is a test 12300
 </pre></font>
 Note that if you want to call some <b>CERNLIB</b> Fortran subroutines
 from a C program, your should use the
 <a href="http://wwwinfo.cern.ch/asdcgi/listcernlibfaqs.pl/3">
 <tt>cfortran.h</tt></a> package.
<HR SIZE=6><h1>How to rename the fit parameters ?
</h1>The HBOOK routine HFINAM (described in the HBOOK documentation) may be
 called after the Histo/Fit command. The name of the parameters will be stored
 into the HBOOK data structure (and preserved across Hrout/Hrin operations).
 This routine may be called from a COMIS program.
 <p>
 Example:

 <FONT COLOR="#993300"><pre>
 Hi/fit 10 userf.f 0 6 parvalues
 Application COMIS quit
       Subroutine Set_names
       Parameter (Npar=6)
       Character*8 Names(Npar)
       Names(1)='p1_name'
       Names(2)=...
       Call Hfinam(10,names,npar)
       End
 Quit
 Call Set_names
 Opt fit
 Histo/Plot 10
 </pre></font>

 Note the 0 option for CHOPT in Histo/Fit: the plot is not done by the fit
 command.
 <p>
 If one of the names begins with "-", the parameters is not drawn when the option
 "FIT" is on.
 <p>
 The routine HGFIT (see HBOOK manual) return all the fit parameters
 including the parameter names. This routine takes the info from the HBOOK data structure.
<HR SIZE=6><h1>How to draw a 3D scatter plot with vectors ?
</h1>The following macro gives an example:

 <FONT COLOR="#993300"><pre>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>SIGMA</tt></font></a> X=array(1000,1#10)
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>SIGMA</tt></font></a> Y=sin(X)*X
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>SIGMA</tt></font></a> Z=sin(X*X)*X
 call dvect.f(x,y,z)
 </pre></font>

 Where <FONT COLOR="#993300"><tt>dvect.f</tt></font> is:

 <FONT COLOR="#993300"><pre>
       Subroutine Dvect(X,Y,Z)
       Real X(1000)
       Real Y(1000)
       Real Z(1000)
       Xmin = X(1)
       Xmax = X(1)
       Ymin = Y(1)
       Ymax = Y(1)
       Zmin = Z(1)
       Zmax = Z(1)
       Do i=2,1000
          If (X(i).Lt.Xmin) Xmin=X(i)
          If (X(i).Gt.Xmax) Xmax=X(i)
          If (Y(i).Lt.Ymin) Ymin=Y(i)
          If (Y(i).Gt.Ymax) Ymax=Y(i)
          If (Z(i).Lt.Zmin) Zmin=Z(i)
          If (Z(i).Gt.Zmax) Zmax=Z(i)
       Enddo
       Call Hplfr3(Xmin,Xmax,Ymin,Ymax,Zmin,Zmax,30.,30.,'FWB')
       Call Ipm3(1000,X,Y,Z)
       End
 </pre></font>
 <center>
 <img src="dvect.gif">
 </center>
<HR SIZE=6><h1>Why "EXTERNAL" doesn't work in COMIS routines ?
</h1>In the following example <b>HBFUN1</b> is a FORTRAN routine from
 the CERN program library.
 The <tt>func</tt> function is a <b>COMIS</b> routine.
 When used in the interpreter mode, the address of the function cannot be
 retrieve by <b>HBFUN1</b> like with a "normal" (compiled
 FORTRAN program) <tt>EXTERNAL</tt> statement.

 <FONT COLOR="#993300"><pre>
  application comis quit
        function func(x)
        func=1.
        end

        subroutine funtest
        external func
        call hbfun1(10,'TEST hrndm1    ',100,0.,3.14,func)
        End
  quit
  call funtest
 </pre></font>
 <p>
  To solve this problem, dynamic loading should be used i.e. put
  <tt>funtest</tt> and <tt>func</tt> in the file <tt>funtest.f</tt> and do:
 <FONT COLOR="#993300"><pre>
 call funtest.f77
 </pre></font>
 as describe
 <a href="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20520#comis">
 here</a>
 and in the <b>PAW</b> FAQ called "Dynamic linking".
 <p>
 Note that all the CERNLIB functions (for example <b>HFITH</b>, <b>HFITV</b>
 etc ...) using <tt>EXTERNAL</tt> will have the same problem when they are used via
 <b>COMIS</b>.
<HR SIZE=6><h1>How to compute the Sum, Integral and the Mean Value of a given histogram between two channels ?
</h1>The following macro can be used:

 <FONT COLOR="#993300"><pre>
 Macro Integral 1=0 2=0 3=0
 *
 *       This Macro computes the Sum, Integral and the Mean Value of a given
 *       histogram between two channels. The input format should be:
 *       `inte ID CH_low CH_high', where `inte' is the alias to execute
 *       this kumac file, ID is the histogram id number, CH_low and
 *       CH_high are low and high channel numbers. All three numbers
 *       MUST be positive integers.     - Yingchao Zhang
 *
 *       Modified by :  Olivier Couet       (15th September 1994)
 *
    Trace off
    If $VEXIST(Out)<>0 Then
       V/Del Out
    Endif
    V/Create Out(3)
 *
 Application Comis Quit
         Subroutine Integral(Id,Nl,Nh)
         Character*80 Chtitl
         Vector Out
         Call Hgive(Id,Chtitl,Nx,Xmi,Xma,0,Ymi,Yma,Nwt,Loc)
         If(Nl.Le.0) Nl=1
         If(Nh.Ge.Nx) Nh=Nx
         S = (Xma-Xmi)/Float(Nx)
         W = 0.0
         Y = 0.0
         Z = 0.0
         Do I = Nl,Nh
          X = Xmi + (Float(I)-0.5)*S
          Y = Y   + Hx(Id,X)
          W = W   + Hx(Id,X)*X
         EndDo
         Z      = Y*S
         W      = W/Y
         Out(1) = Y
         Out(2) = Z
         Out(3) = W
         End
 Quit
 *
 *   Check the input parameter
 *
    Id = [1]
    Nl = [2]
    Nh = [3]
    If [Id] = 0 Then
       Read Id 'Histogram identifier'
    Endif
    If [Nl] = 0 Then
       Read Nl 'First channel'
    Endif
    If [Nh] = 0 Then
       Read Nh 'Last channel'
    Endif
 *
 *   PLot the histogram and compute the integral
 *
    If $HEXIST([Id])=0 Then
       Hrin [Id]
    Endif
    Histo/Plot [Id]([Nl]:[Nh])
    Call Integral([Id],[Nl],[Nh])
    Y = Out(1)
    Z = Out(2)
    W = Out(3)
    Exec Rt 0.025 0.95 'Sum = '//[Y]
    Exec Rt 0.025 0.90 'Integral = '//[Z]
    Exec Rt 0.025 0.85 'Mean = '//[W]
    V/Del Out
 *
 Return

 Macro rt 1=0. 2=0. 3=' ' 4=.3
 *
    X1 = $GRAFINFO('WNXMIN')
    X2 = $GRAFINFO('WNXMAX')
    Y1 = $GRAFINFO('WNYMIN')
    Y2 = $GRAFINFO('WNYMAX')
    X  = ([X2]-[X1])*[1]+[X1]
    Y  = ([Y2]-[Y1])*[2]+[Y1]
    Set CHHE [4]
    Set TXAL 3
    Itx [X] [Y] [3]
 *
 Return
 </pre></font>
<HR SIZE=6><h1>How to duplicate an Ntuple with some selections ?
</h1>The following examples show how to proceed with both row wise
 and column wise ntuples. These example should be used also to
 copy ntuples from an <b>HBOOK</b> file to an other because ntuples are (most
 of the time) disk resident objects and cannot be put in memory like
 histograms.

 <h2>With Row Wise Ntuples</h2>

 <pre><font COLOR="#993300">
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">Macro</a> DUPRWN
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:CLOSE">Close</a> 0
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE">Hi/File</a> 1 hrztest.hbook
          Hi/File 2 hrztest_new.hbook ! N
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:DUPLIC">Nt/Dup</a> //lun1/30 2
         <font COLOR="#005500">*</font>
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:COMIS">Application Comis</a> Quit
               Real Function Dup
               <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:UWFUNC">Include ?</a>
               If (x.gt.0..and.y.gt.0.) call hfn(2,x)
               dup=1.
               end
          Quit
         <font COLOR="#005500">*</font>
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:LOOP">nt/loop</a> //lun1/30 dup
         <font COLOR="#005500">*</font>
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/ZEBRA_RZ.html#ZR:CDIR">cd</a> //lun2   <font COLOR="#005500">|<------------------- For PAW version 2.07 only (see <a href="http://wwwinfo.cern.ch/asdcgi/listpawbugs.pl/29">here</a>)</font>
         <font COLOR="#005500">*</font>
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_HIO.html#HH:HROUT">hrout</a> 2
         <font COLOR="#005500">*
         * Verification: the 2 plots should be the same.
         *</font>
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:OPTION">Option</a> STAT
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_VIEWING.html#GV:ZONE">Zone</a> 1 2
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:PLOT">Nt/plot</a> //lun1/30.x x.gt.0..and.y.gt.0.
          Nt/plot //lun2/2.x
 </font></pre>

 <h2>With Column Wise Ntuples</h2>

 <pre><font COLOR="#993300">
          Macro DUPCWN1
         <font COLOR="#005500">*</font>
          Close 0                      <font COLOR="#005500">| Close all the currently opened file</font>
          H/file 1 hcwn.hbook          <font COLOR="#005500">| hcwn.hbook contains the ntuple to be duplicated</font>
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_HIO.html#HH:HRIN">Hrin</a> 1
          <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:UWFUNC">Uwfunc</a> //lun1/1 hcwn.inc     <font COLOR="#005500">| Copy the Ntuple structure into hcwn.inc</font>
          H/file 2 hcwn_new.hbook ! N  <font COLOR="#005500">| Create a new hbook file</font>
          Nt/Dup //lun1/1 11           <font COLOR="#005500">| Duplicate the ntuple 1 in the ntuple 11</font>
         <font COLOR="#005500">*
         * Comis routine which Loop on all events of Id1 and select some events to be
         * written in the new ntuple Id2.
         *</font>
          Application COMIS quit
               Subroutine ntdup(Id1,Id2)
               Include 'hcwn.inc'
               Call Hnoent(Id1,Noent)
               Do Ievent=1,Noent
                  Call Hgnt(Id1,Ievent,Ierr)
                  If (Ierr.ne.0) Goto 20
                  If (Vx.Gt.0..Or.Vy.Gt.0.) Then
                     Call Hfnt(Id2)
                  Endif
               Enddo
           20  Continue
         <font COLOR="#005500">*</font>
               End
          Quit
         <font COLOR="#005500">*</font>
          Call Ntdup(1,11)             <font COLOR="#005500">| Execute the routine Ntdup</font>
          Hrout 11                     <font COLOR="#005500">| Write Id2 on disk</font>
         <font COLOR="#005500">*
         * Verification: the 2 plots should be the same.
         *</font>
          Option STAT
          Zone 1 2
          Nt/plot //lun1/1.vx vx.gt.0..or.vy.gt.0
          Nt/plot //lun2/11.vx
         <font COLOR="#005500">*</font>
         Return
 </font></pre>

  It is possible to do more in the fortran program:

 <pre><font COLOR="#993300">
         Macro DUPCWN2
         <font COLOR="#005500">*</font>
          Close 0                      <font COLOR="#005500">| Close all the currently opened file</font>
          H/file 1 hcwn.hbook          <font COLOR="#005500">| hcwn.hbook contains the ntuple to be duplicated</font>
          Hrin 1                       <font COLOR="#005500">| Load the ntuple 1 in memory</font>
          Uwfunc //lun1/1 hcwn.inc     <font COLOR="#005500">| Copy the Ntuple structure into hcwn.inc</font>
          H/file 2 hcwn_new.hbook ! N  <font COLOR="#005500">| Create a new hbook file</font>
         <font COLOR="#005500">*</font>
         Application COMIS quit
               Subroutine ntdup(Id1,Id2)
               include 'hcwn.inc'
         <font COLOR="#005500">*
         * Duplicate structure of ntuple Id1 into Id2
         *</font>
               Call Hntdup(Id1,Id2,-1,' ','A')
         <font COLOR="#005500">*
         *  Loop on all events of Id1. Select some events to be written
         *  in the new ntuple Id2.
         *</font>
               Call Hnoent(Id1,Noent)
               Do Ievent=1,Noent
                  Call Hgnt(Id1,Ievent,Ierr)
                  If (Ierr.Ne.0) Goto 20
                  If (Vx.Gt.0..Or.Vy.Gt.0.) Then
                     Call Hfnt(id2)
                  Endif
               Enddo
           20  Call Hrout(Id2,icycle,' ')
         <font COLOR="#005500">*</font>
               End
         quit
         <font COLOR="#005500">*</font>
          Call Ntdup(1,11)             <font COLOR="#005500">| Execute the routine Ntdup</font>
         <font COLOR="#005500">*
         * Verification: the 2 plots should be the same.
         *</font>
          Option STAT
          Zone 1 2
          Nt/plot //lun1/1.vx vx.gt.0..or.vy.gt.0
          Nt/plot //lun2/11.vx
 </font></pre>
 <b>Note:</b> Take care that the local variables used in the <b>COMIS</b>
 routine are different from the field names in the Ntuple.
 <h2>Graphical cuts</h2>
  To use
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:GCUT">graphical cuts</a>
 you should scan your ntuple via an ntuple command
 like <font COLOR="#993300"><TT>NT/LOOP</TT></font> i.e.:
 <pre><font COLOR="#993300">        NT/LOOP 1 $1.AND.a.f</font></pre>
  where
 <font COLOR="#993300"><TT>1</TT></font> is the ntuple identifier,
 <font COLOR="#993300"><TT>$1</TT></font> the graphical cut and
 <font COLOR="#993300"><TT>a.f</TT></font> the <b>LOGICAL</B> fortran
 function (generated with the command
 <font COLOR="#993300"><TT>UWFUNC</TT></font>) filling the new ntuple.
 The problem is that only the used
 ntuple variables in
 <font COLOR="#993300"><TT>a.f</TT></font> will be loaded in the
 <font COLOR="#993300"><TT>PAWCR4</TT></font> common block. So
 you want all the variables in the new ntuple, you will have to
 use them all in a "dummy" way in
 <font COLOR="#993300"><TT>a.f</TT></font>. For example you can do something
 like:

 <pre><font COLOR="#993300">
       LOGICAL FUNCTION A
            .
            .
       IF (IDNEVT.EQ.0) THEN
          DUMMY = X1
          DUMMY = X2
            .
            .
          DUMMY = XI
            ..
       ENDIF
            .
            .
       END
 </font></pre>
 where the <font COLOR="#993300"><TT>XI</TT></font> are the all ntuple variables.
<HR SIZE=6><h1>How to pass a character string from a COMIS program to a macro and vice versa ?
</h1>The following examples give possible solutions:

 <br><B> From COMIS to a macro:</b></br>
 <FONT COLOR="#993300"><pre>
       subroutine ac
       character*16 filename
       character*80 line
       filename='data.hbook'
       line = 'global/create filename '''//filename//''''
       call kuexel(line)
       end
 </pre></font>
 Usage:
 <FONT COLOR="#993300"><pre>
    PAW > call ac.f
    PAW > mess [filename]
     data.hbook
 </pre></font>

 <br><B> From a macro to COMIS:</b></br>
 <FONT COLOR="#993300"><pre>
 macro quote
 a = $quote('String test')

 appl comis quit
       subroutine test(c)
       character*(*) c
       print*, c
       end
 quit

 call test([a])
 </pre></font>
 Usage:
 <FONT COLOR="#993300"><pre>
 PAW > exe quote
  String test
 </pre></font>
<HR SIZE=6><h1>How to fit a histogram with another one ?
</h1>This is a tricky problem. When you do:
 <FONT COLOR="#993300"><pre>
           HI/FIT 1 fff.f ! 1 par
 </pre></font>
  the first thing this command do, is to set the pointer to the current
 histogram to the histogram identified by
 <FONT COLOR="#993300"><TT>1</tt></font> and it assumes this pointer
 will not change during the command execution. This is usually the case with
 "normal" fit functions.

  The problem in different when <b>HBOOK</b> functions like
 <FONT COLOR="#993300"><TT>HCX</tt></font>,
 <FONT COLOR="#993300"><TT>HXI</tt></font>... are called
 inside the fitting function because these functions (<FONT COLOR="#993300"><TT>HCX</tt></font>, <FONT COLOR="#993300"><TT>HXI</tt></font>...)
 change the pointer to the current histogram and the fit command (which
 assume this pointer doesn't change) point to the wrong histogram.

  There is a way to fake the <FONT COLOR="#993300"><TT>HI/FIT</tt></font> command. The following example shows
 how to proceed:

 <FONT COLOR="#993300"><pre>
 macro f
 v/del *; h/del *
 zone 1 3
 vector/create xx(10) r 1 2 3 4 5 5 4 3 2 1
 vector/draw xx 1
 sigma yy=3*xx
 vector/draw yy 2
 vector/create par(1) r 1.
 histogram/fit 1 fff.f ! 1 par
 </pre></FONT>
 In the following fitting function <FONT COLOR="#993300"><TT>HFIND</tt></font> reset the current histogram before
 exiting the function.
 <FONT COLOR="#993300"><pre>
       function fff(x)
       common /pawpar/ par(1)
       y=hx(2,x)
 <FONT COLOR="#FF0000">      call hfind(1,' ')</font>
       fff=y*par(1)
       end
 </pre></FONT>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="fff.gif">
 </td><td>
 <FONT COLOR="#993300"><pre>
       PAW > exe f

            **********************************************
            *                                            *
            * Function minimization by SUBROUTINE HFITH  *
            * Variable-metric method                     *
            * ID =          1  CHOPT =                   *
            *                                            *
            **********************************************
        Convergence when estimated distance to minimum (EDM) .LT.  0.10E+01

        FCN=  0.1500666E-11 FROM MIGRAD    STATUS=CONVERGED     12 CALLS       13 TOTAL
                            EDM=  0.30E-11    STRATEGY= 1      ERROR MATRIX ACCURATE

         EXT PARAMETER                                   STEP         FIRST
         NO.   NAME        VALUE          ERROR          SIZE      DERIVATIVE
          1      P1       0.33333       0.60858E-01   0.23809E-02  -0.40413E-04

        CHISQUARE = 0.1667E-12  NPFIT =    10
 </pre></FONT>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>Why does PAW crash when trying to open a big NTUPLE file ?
</h1>Very likely you have created a memory resident ntuple. You have
 declared a very large /PAWC/ common in your job producing the ntuple.
 <b>PAW</b> has a fixed store of 2000000 words which is not enough to store
 your big memory resident ntuple.
 <p>
 You must recreate your ntuple as a disk resident one (see the FAQ "How to
 create a disk resident Row Wise Ntuple").
<HR SIZE=6><h1>How to plot a ntuple variable as error bars ?
</h1>The following example illustrate this question:
 <FONT COLOR="#993300"><pre>
 appl data nt.dat
 0  1  0.1
 1  2  0.2
 2  3  0.3
 3  4  0.15
 4  5  0.4
 5  5  0.2
 6  4  0.1
 7  3  0.2
 8  2  0.1
 9  1  0.3
 nt.dat
 ntuple/create 1 'Test' 3 ! ! X Y EY
 nt/read 1 nt.dat
 appl comis quit
       REAL FUNCTION A
       REAL
      +X       ,Y       ,EY
 *
       LOGICAL         CHAIN
       CHARACTER*128   CFILE
 *
       COMMON /PAWCHN/ CHAIN, NCHEVT, ICHEVT
       COMMON /PAWCHC/ CFILE
 *
       COMMON/PAWIDN/IDNEVT,OBS(13),
      +X       ,Y       ,EY
 *
       dimension xx(2),yy(2)
 *
       XX(1) = X
       XX(2) = X
       YY(1) = Y-EY
       YY(2) = Y+EY
       CALL IPL(2,XX,YY)
       END
 quit
 set MTYP 20
 nt/plot 1.y%x
 nt/loop 1 A
 </pre></font>
 <center><img src="nt1.gif"></center>
<HR SIZE=6><h1>Normalisation Transformations priorities and PostScript output.
</h1>The normalisation transformations in a HIGZ picture are
 displayed according to their priority. The last displayed
 is the last selected (command SELNT).

 The commands PICTURE/PRINT and PICTURE/PLOT, reorder
 the NTs in the "HPLOT" order e.g: the transformation number
 one is displayed first and then 10, 20, 30 etc depending
 the number of ZONE. This avoid to hide histogram with a
 filled BCOL.

 In some cases this reordering is not desirable. For example
 in the following macro, the text will be hidden in the
 PostScript file by the filled box even if on the screen
 the text is visible:

 <FONT COLOR="#993300"><pre>
    Macro test
    null 0 10 0 10 'ab'
    igset txal 23
    igset chhe 0.5
    igset txfp -130
    igset fais 1
    igset fasi 0
    igset faci 2
    box 2 8 5 7
    itx 5 6 'Example of text'
    return


 PAW > Exec test         | with opt zfl1 in pawlogon.kumac
 PAW > pi/print paw.ps
 </pre></font>

  This problem can be avoid in 2 ways:

 <FONT COLOR="#993300"><pre>
  1)
        PAW > for/file 66 paw.ps ; meta 66 -111
        PAW > exec test
        PAW > close 66

  2)
        PAW > exec test     | with opt zfl1 in pawlogon.kumac
        PAW > exe print
 </pre></font>

       Where print is

 <FONT COLOR="#993300"><pre>
       macro print
       for/file 66 paw.ps ; meta 66 -111
       sel 1 ; izpict ' ' d
       close 66
 </pre></font>
 Note: <tt>IZPICT</tt> with option <tt>D</tt> draws the a picture without reordering the
 normalisation transformations.
<HR SIZE=6><h1>In CONTOUR, how to choose associated colours to each level ?.
</h1> Draw the levels one by one (in a loop) with the
 line style (line type) equal to 1 (<TT><FONT COLOR="#993300">SET DMOD 1</FONT></TT>)
 and change the color for
 each contour
 (<TT><FONT COLOR="#993300">SET HCOL</FONT></TT>). The first contour is drawn with
 option <TT><FONT COLOR="#993300">2</FONT></TT>
  and the other with option
 <TT><FONT COLOR="#993300">2S</FONT></TT>.
 <p>
 Example:
 <FONT COLOR="#993300"><pre>
 Fun2 2 x*y 40 0 1 40 0 1 ' '
 V/Cr PAR(5) R .1 .11 .3 .31 .5
 Set DMOD 1
 set HCOL 1
 Contour 2 1 2 PAR(1)
 Do i=2,5
    Set HCOl [i]
    Contour 2 1 2S PAR([i])
 Enddo
 </pre></font>
 <center>
 <img src="contour.gif">
 </center>
<HR SIZE=6><h1> Is there a way to output the contents of the MESSAGE command to a file instead of to the terminal ?
</h1><H3>Before PAW version 2.08/09</H3>
 Not directly from the <tt>MESSAGE</tt> command.
 A way to bypass the problem is to use the following COMIS routine:
 <FONT COLOR="#993300"><pre>
       subroutine mess(lun,chmess)
       character*(*) chmess
       write (lun,'(a)') chmess
       end
 </pre></font>
 <p>
 as follow:
 <p>
 <FONT COLOR="#993300"><pre>
 PAW > output 22 a.dat
 PAW > call mess.f(22,'hello')
 </pre></font>
 If the character string is in a variable, the system function <TT>$QUOTE</TT>
 should be used before calling the routine mess.f in order to enclose
 the string with ' ':
 <FONT COLOR="#993300"><pre>
 a=$quote(hello)
 output 22 a.dat
 call mess.f(22,[a])
 </pre></font>
 <p>
 <H3>Since PAW version 2.08/09</H3> A new command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:FMESSA"><tt>/KUIP/FMESSAGE</tt></a> is
 available.
<HR SIZE=6><h1>How to move the STATistics box ?
</h1> There is two SET parameters to move the STAT:
 SMGU and SMGR. (See the FAQ <b>A graphical view of the SET parameters</b>).
<HR SIZE=6><h1>How to access the covariance matrix after a fit operation ?
</h1>A <b>COMIS</b> routine invoking the <b>MINUIT</b>
 routine <FONT COLOR="#993300"><tt>MNEMAT</tt></font> is required.
 The following example shows how to proceed:

 <FONT COLOR="#993300"><pre>
   Macro Emat
   Histo/fit 110(50:) G
   Application COMIS Quit
         Subroutine Get_Emat
         Parameter (ndim=3)
         Double Precision demat(ndim,ndim)
         Vector Emat(ndim,ndim)
         Call Mnemat(demat,ndim)
         Do i=1,ndim
            Do j=1,ndim
               emat(j,i)=demat(j,i)
            Enddo
         Enddo
         End
   Quit
   Call Get_Emat
   Vector/Print Emat
   Return
 </pre></font>

 Note that the matrix is returned in a
 <FONT COLOR="#993300"><tt>DOUBLE</tt></font> Precision array.
 It is copied  into a single precision vector.
<HR SIZE=6><h1> How to convert a Row Wise Ntuple (RWN) into a Column Wise Ntuple (CWN) ?
</h1>This program convert a Row Wise Ntuple "file" into a Column Wise Ntuple
 one.
 <FONT COLOR="#993300"><pre>
       PROGRAM HTONEW
 *
 *      Program to convert old format HBOOK files into new format
 *      New files are by default in RZ Exchange mode
 *      RWN are converted into CWN.
 *
       PARAMETER      (MXBOOK=1000000)
       COMMON/PAWC/    PAW(MXBOOK)
       COMMON/QUEST/   IQUEST(100)
       COMMON/HINFO/LRECL
 *
       CHARACTER*80 FILOUT,FILIN
 *
       EXTERNAL CONVERT
 *
 *===========================================================
 *
       print*, 'Input file ?'
       read*, filin
       print*, 'Output file ?'
       read*, filout
       lo = lenocc(filout)
       li = lenocc(filin)
       nsize = 0
 *
       CALL HLIMIT(MXBOOK)
       CALL HBSET('BSIZE',100,IERR)
 *
 *
    10 CONTINUE
 *
 *-* Create directory //PAWC/OLDF to store old ntuples
       CALL HMDIR('OLDF',' ')
 *-*   Open old file and get record length
 *     LRECL=0  If LRECL=0 does not work,specify LRECL for your file
       LRECL=NSIZE
       CALL HROPEN(1,'OLDF',FILIN,' ',LRECL,ISTAT)
       LRECL=IQUEST(10)
       IF(ISTAT.NE.0) THEN
          WRITE (6,'('' FILE : '',A80,'' CANNOT BE OPENED'')') FILIN(1:
      +   LI)
          GO TO 20
       END IF
 *
 *-*         Create new file
       IQUEST(10) = 64000
       if(lrecl.gt.4096)lrecl=4096
 *     lrecl=4096
       print *,' Creating new file with LRECL=',lrecl,' words'
       CALL HROPEN(2,'NEWF',FILOUT(1:LENOCC(FILOUT)),'QN',LRECL,ISTAT)
       IF(ISTAT.NE.0)                                   THEN
          WRITE (6, '('' FILE : '',A80, '' CANNOT BE CREATED'')')
      +   FILOUT(1:LO)
          GOTO 20
       END IF
 *
 *
 *-*         Convert
       CALL HCDIR('//OLDF',' ')
       CALL RZSCAN (' ', CONVERT)
       CALL HREND ('NEWF')
       CLOSE (2)
       CALL HREND ('OLDF')
       CLOSE (1)
 *
       WRITE (6,'('' Conversion completed'')')
 *
 *         Abnormal end
    20 CONTINUE
 *
       END

       SUBROUTINE CONVERT (CDIR)
 *
       CHARACTER*(*) CDIR
 *

       INTEGER     NWPAW,IXPAWC,IHDIV,IXHIGZ,IXKU,        LMAIN
       REAL                                       FENC   ,      HCV
       COMMON/PAWC/NWPAW,IXPAWC,IHDIV,IXHIGZ,IXKU,FENC(5),LMAIN,HCV(9989)
       INTEGER   IQ        ,LQ
       REAL            Q
       DIMENSION IQ(2),Q(2),LQ(8000)
       EQUIVALENCE (LQ(1),LMAIN),(IQ(1),LQ(9)),(Q(1),IQ(1))
       INTEGER       HVERSN,IHWORK,LHBOOK,LHPLOT,LGTIT,LHWORK,
      +LCDIR,LSDIR,LIDS,LTAB,LCID,LCONT,LSCAT,LPROX,LPROY,LSLIX,
      +LSLIY,LBANX,LBANY,LPRX,LPRY,LFIX,LLID,LR1,LR2,LNAME,LCHAR,LINT,
      +LREAL,LBLOK,LLBLK,LBUFM,LBUF,LTMPM,LTMP,LTMP1,LHDUM   ,LCIDN
       COMMON/HCBOOK/HVERSN,IHWORK,LHBOOK,LHPLOT,LGTIT,LHWORK,
      +LCDIR,LSDIR,LIDS,LTAB,LCID,LCONT,LSCAT,LPROX,LPROY,LSLIX,
      +LSLIY,LBANX,LBANY,LPRX,LPRY,LFIX,LLID,LR1,LR2,LNAME,LCHAR,LINT,
      +LREAL,LBLOK,LLBLK,LBUFM,LBUF,LTMPM,LTMP,LTMP1,LHDUM(10),LCIDN
 *
       INTEGER   KNCX  ,KXMIN  ,KXMAX  ,KBWIDX  ,KMIN  ,KMAX  ,KNORM  ,
      +          KTIT1   ,KNCY  ,KYMIN  ,KYMAX  ,KBWIDY   ,KSCAL2   ,
      +          KTIT2   ,KNBIT  ,KNOENT  ,KSTAT1  ,KNSDIR  ,KNRH  ,
      +          KCON1  ,KCON2  ,KBITS  ,KNTOT
       PARAMETER(KNCX=3,KXMIN=4,KXMAX=5,KBWIDX=6,KMIN=7,KMAX=8,KNORM=9,
      +          KTIT1=10,KNCY=7,KYMIN=8,KYMAX=9,KBWIDY=10,KSCAL2=11,
      +          KTIT2=12,KNBIT=1,KNOENT=2,KSTAT1=3,KNSDIR=5,KNRH=6,
      +          KCON1=9,KCON2=3,KBITS=1,KNTOT=2)
       parameter (kip1=20)
 *
       COMMON/QUEST/   IQUEST(100)
 *
       COMMON/HINFO/LRECL
 *
       CHARACTER*80 TITLE, RDIR
 *
       parameter (nev=1000)
       parameter (nmax=500)
       parameter (nbvmax=40)
       parameter (ntotmax=50000000)
       dimension x(nmax,nev)
       common/event/y(nmax)
       dimension iy(nmax)
       equivalence (y(1),iy(1))
       character*8 tags(nmax),tag1,bname
       character*1300 chform
       character*1 type
       dimension rlow(nmax),rhigh(nmax)
 *
       WRITE (6, '('' Processing directory: '',A)')
      +       CDIR(1:LENOCC(CDIR))
 *
       RDIR      = CDIR
       RDIR(3:6) = 'NEWF'
       JLS = ICFILA ('/', CDIR, 1, LENOCC(CDIR))
       IF (JLS .GT. 2)                                  THEN
          CALL HMDIR (RDIR, ' ')
       END IF
 *
 *-*  Loop on all keys in file (order of creation)
       NKEY = 50000
       DO 80 M = 1, NKEY
          CALL HCDIR (CDIR, ' ')
          CALL RZINK (M, 0, 'S')
          IF (IQUEST(1) .NE. 0) GO TO 999
          IF (JBIT (IQUEST(14),4) .NE. 0) GO TO 80
          IDN = IQUEST(21)
          CALL HRIN(IDN,999,0)
          IF(IQUEST(1).NE.0) THEN
             WRITE (6,'('' NTUPLE OR HISTO '',I10,'' CANNOT BE READ'')')
      +      IDN
             GO TO 90
          END IF
          IF (JBIT (IQ(LCID+KBITS),4) .NE. 0) THEN
 *-*  ntuple
 *-*  First read the specs of old ntuple
             NVAR = NMAX
             CALL HGIVEN(IDN,TITLE,NVAR,TAGS,RLOW,RHIGH)
             call hnoent(idn,noent)
             ntotal=min(ntotmax,noent)
             CALL HDELET(IDN)
 *-*  Change directory to new file. Create new ntuple
 *-*  Put a maximum of NBVMAX variable per block (hbname)
 *-*  Blocks are labelled Block1,Block2,etc.
 *-*  Buffer size per column is set to (nwpaw-100000)/nvar or lrecl-15 words
             nwbuf1=(nwpaw-100000)/nvar
             if(nwbuf1.gt.33000)nwbuf1=33000
             if(nwbuf1.gt.noent)then
                nwbuf=noent+1
             else
                nwmod=mod(nwbuf1,lrecl)
                nwbuf=nwbuf1-nwmod-15
             endif
 **            nwbuf=nwbuf1
 **            if(nwbuf1.gt.lrecl-15)nwbuf=lrecl-15
 **            if(nwbuf1.gt.2*lrecl-15)nwbuf=2*lrecl-15
             if(nwbuf.lt.100)nwbuf=min(noent,nwbuf1)
             call hbset('BSIZE',nwbuf,ierr)
             print *,' Converting ntuple:',idn,' Bsize =',nwbuf,' words'
             call hcdir(rdir,' ')
 *-*  We want to force new ntuple record to start at word 1 of a new record
             lrzcdir=iquest(11)
             iq(lrzcdir+kip1)=lrecl+1
             call rzmods('CONVER',ierr)
             call rzsave
             CALL HBNT(IDN,TITLE,' ')
             chform=' '
             icold=1
             nbn=0
             type='R'
             do 10 i=1,nvar
                tag1=tags(i)
                if(tag1.eq.' ')then
                   write(tag1,30000)i
 30000             format('VAR',I3)
                   if(tag1(4:4).eq.' ')tag1(4:4)='0'
                   if(tag1(5:5).eq.' ')tag1(5:5)='0'
                endif
                nch=lenocc(tag1)
                icnew=icold+nch+2
                chform(icold:icnew)=tag1(1:nch)//':'//type//','
                if(mod(i,nbvmax).eq.0.or.i.eq.nvar)then
                   nbn=nbn+1
                   if     (nbn.ge.  1 .and. nbn.lt.  10) then
                     write(bname,10000)nbn
 10000               format('Block',i1)
                   elseif (nbn.ge. 10 .and. nbn.lt. 100) then
                     write(bname,10001)nbn
 10001               format('Block',i2)
                   elseif (nbn.ge.100 .and. nbn.lt.1000) then
                     write(bname,10002)nbn
 10002               format('Block',i3)
                   else
                     print *, 'CONVERT: In trouble, NBN = ',nbn
                     bname = 'BlockXYZ'
                   endif
                   ibl=(nbn-1)*nbvmax +1
                   call hbname(idn,bname,y(ibl),chform(1:icnew-1))
                   icnew=0
                   chform=' '
                endif
                icold=icnew+1
    10       continue
 *
 *
 *-*   Now loop to fill new ntuple.
 *-*   To avoid changing directory too frequently, buffer NEV events in memory
             do 60 i=1,ntotal,nev
                print *,' Number of events processed= ',i
                call hcdir('//PAWC/OLDF',' ')
                call hcdir(cdir,' ')
                do 20 j=1,nev
                   k=i+j-1
                   if(k.gt.ntotal)go to 30
                   call hgn(idn,nidn,k,x(1,j),ierror)
    20          continue
    30          continue
                call hcdir('//PAWC',' ')
                call hcdir(rdir,' ')
                do 50 j=1,nev
                   k=i+j-1
                   if(k.gt.ntotal)go to 70
                   do 40 l=1,nvar
                      y(l)=x(l,j)
    40             continue
                   call hfnt(idn)
    50          continue
    60       continue
    70       continue
 *-*   save new ntuple header onto file
             call hrout(idn,icycle,' ')
             call hdelet(idn)
             call hcdir('//PAWC/OLDF',' ')
             call hdelet(0)
             call hcdir('//PAWC',' ')
          ELSE
 *-*   Histogram
             call hcdir(rdir,' ')
             call hrout(idn,icycle,' ')
             CALL HDELET(IDN)
          END IF
    80 CONTINUE
       GO TO 999
 *
 *         Abnormal end
    90 CONTINUE
 *
   999 END
 </pre></font>
<HR SIZE=6><h1>How to write a text independently from the histogram coordinates ?
</h1>Draw the text in the normalisation transformation 1 (cm).
 Example:
 <font COLOR="#993300"><pre>
       SELNT 1              | Select the centimetres
       TEXT 1 1 'Hello' .3
 </pre></font>
<HR SIZE=6><h1>Is there a list of Paw++ resources?
</h1>This list in non exhaustive, as it contains all Motif resources
 (providing you know the name and type of the widget you want to modify,
 which is not always obvious unless you look into the source code).
 There are also many specific (non-Motif) resources. The following
 is a list of the most important resources (specific or not).
 <P>
 <H2>KUIP general internal resources</H2>

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=1 WIDTH="100%" NOSAVE >
 <tr BGCOLOR="#99FFCC"><th>Resource name      </th><th> type    </th><th> default value </th><th> meaning </th></tr>
 <tr BGCOLOR="#CCFFFF"><td>noKxterm           </td><td> Boolean </td><td> False </td><td> if set to True no kxterm window is opened                   </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>noMBrowser         </td><td> Boolean </td><td> False </td><td>  if set to True no Main Browser is opened                   </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>higzMessGeometry   </td><td> String  </td><td> "0x0+0+0" </td><td>  size and position of the HIGZ output window            </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>kxtermGeometry     </td><td> String  </td><td> "650x450+0+0" </td><td>                                                     </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>kxtermTextFont     </td><td> String  </td><td> "*-courier-medium-r-normal*-120-*" </td><td>                                </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>kxtermFont         </td><td> String  </td><td> "*-helvetica-bold-r-normal*-120-*" </td><td>                                </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>centerCommand      </td><td> int     </td><td> 0 (False) </td><td> if True, command panels are centred in main browser    </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>scrolledCmdPanel   </td><td> String  </td><td> "auto" </td><td> if set to "always" add a scroll bar in command panels.     </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>panelInteractive   </td><td> Boolean </td><td> True </td><td> if set to True "Close" button is set non sensitive in panels </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>doubleClickInterval</td><td> int     </td><td> 250 </td><td>                                                               </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>helpFont           </td><td> String  </td><td> "*-courier-medium-r-normal*-120-*" </td><td>                                </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>doubleBuffer       </td><td> Boolean </td><td> True </td><td>                                                              </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>gBell              </td><td> int     </td><td> 0 </td><td> bell volume when grabbing                                       </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>mainCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>graphCursor        </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>inputCursor        </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>waitCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>helpCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>helpCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#FFFFCC"><td>busyCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#FFCCCC"><td>blckCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 <tr BGCOLOR="#CCFFFF"><td>selcCursor         </td><td> int     </td><td> -1 </td><td>                                                                </td></tr>
 </table>
 <P>
 <H2>KUIP browser main resources</H2>
 <P>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=1 WIDTH="100%" NOSAVE >
 <tr BGCOLOR="#99FFCC"><th>Resource name  </th><th> type    </th><th> default value </th><th> meaning                                                 </th></tr>
 <tr BGCOLOR="#CCFFFF"><td> dirlist*fontList                         </td><td> String  </td><td> "*-courier-bold-r-normal*-120-*" </td><td>           </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> kuipBrowser*fileScWindow.width           </td><td> int     </td><td> 80 </td><td>                                         </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> kuipBrowser*fileScWindow.bottomOffset    </td><td> int     </td><td> 52 </td><td>                                         </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> kuipBrowser*fileScWindow.topOffset       </td><td> int     </td><td> 59 </td><td>                                         </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> kuipBrowser*dirScWindow.bottomOffset     </td><td> int     </td><td> 52 </td><td>                                         </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> kuipBrowser*dirScWindow.topOffset        </td><td> int     </td><td> 59 </td><td>                                         </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> kuipBrowser*separatorGadget1.topPosition </td><td> int     </td><td> 50 </td><td>                                         </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> kuipBrowser_shell.geometry               </td><td> String  </td><td> "-0+0" (no graphics) or "+0+485" (graphics) </td><td></td></tr>
 <tr BGCOLOR="#FFCCCC"><td> kuipGraphics_shell.geometry              </td><td> String  </td><td> "600x600-0+0" </td><td> graphics window geometry     </td></tr>
 </table>
 <P>
 <H2>KUIP browser iconbox resources</H2>
 (the KUIP iconbox is the part of the main browser which displays
 the objects with icons)
 <P>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=1 WIDTH="100%" NOSAVE >
 <tr BGCOLOR="#99FFCC"><th>Resource name  </th><th> type    </th><th> default value </th><th> meaning </th></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconBitmap            </td><td> String     </td><td> "default_icon" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> iconMask              </td><td> String     </td><td> "default_mask" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> iconSmallBitmap       </td><td> String     </td><td> "default_sicon" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconSmallMask         </td><td> String     </td><td> "default_smask" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> iconForeground        </td><td> String     </td><td> "black" "grey40" in Paw++ </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> iconBackground        </td><td> String     </td><td> "white" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconLabelForeground   </td><td> String     </td><td> "black" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> iconLabelBackground   </td><td> String     </td><td> "white" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> iconWidth             </td><td> Dimension  </td><td> 40 </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconHeight            </td><td> Dimension  </td><td> 40 </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> iconSmallWidth        </td><td> Dimension  </td><td> 20 </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> iconSmallHeight       </td><td> Dimension  </td><td> 20 </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconHSpacing          </td><td> int        </td><td> 40 </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> iconVSpacing          </td><td> int        </td><td> 10 </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> iconSmallHSpacing     </td><td> int        </td><td> 20 </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconSmallVSpacing     </td><td> int        </td><td> 10 </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> iconNoHSpacing        </td><td> int        </td><td> 20 </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> iconNoVSpacing        </td><td> int        </td><td> 10 </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> iconType              </td><td> int        </td><td> IconBoxBIG_ICON </td><td> possible values: IconBoxSMALL_ICON,
 IconBoxNO_ICON</td></tr>
 <tr BGCOLOR="#FFFFCC"><td> shadowOffset          </td><td> int        </td><td> 3 </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> columns               </td><td> int        </td><td> 5 </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> shadowColor           </td><td> String     </td><td> "gray50" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> fontList              </td><td> String     </td><td> "fixed" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> zoomEffect            </td><td> Boolean    </td><td> True </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> zoomSpeed             </td><td> int        </td><td> 10 </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> doubleClickInterval   </td><td> int        </td><td> 250 </td><td> </td></tr>
 </table>
 <P>
 <H2>PAW specific resources</H2>
 <P>
 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=1 WIDTH="100%" NOSAVE >
 <tr BGCOLOR="#99FFCC"><th>Resource name  </th><th> type    </th><th> default value </th><th> meaning </th></tr>
 <tr BGCOLOR="#FFCCCC"><td> autorefresh                    </td><td> Boolean  </td><td> True </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> echokuip                       </td><td> Boolean  </td><td> False </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> doublebuffer                   </td><td> Boolean  </td><td> True </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> samezone                       </td><td> Boolean  </td><td> False </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> hbookfile                      </td><td> String   </td><td> hbook </td><td> default file extension for HBOOK files. </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> histoStyle_shell.geometry      </td><td> String   </td><td> "+670+635" </td><td> histogram style panel geometry. </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> dirlist*dir*iconForeground     </td><td> String   </td><td> "blue" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> dirlist*1d*iconForeground      </td><td> String   </td><td> "DarkGoldenrod3" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> dirlist*2d*iconForeground      </td><td> String   </td><td> "DeepPink3" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> dirlist*ntuple*iconForeground  </td><td> String   </td><td> "SteelBlue3" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> dirlist*pict*iconForeground    </td><td> String   </td><td> "green4" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> dirlist*chain*iconForeground   </td><td> String   </td><td> "blue" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> dirlist*entry*iconForeground   </td><td> String   </td><td> "OrangeRed" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> dirlist*Cmd*iconForeground     </td><td> String   </td><td> "cyan4" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> dirlist*Menu*iconForeground    </td><td> String   </td><td> "blue" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> dirlist*MacFile*iconForeground </td><td> String   </td><td> "OliveDrab4" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> dirlist*hbook*iconForeground   </td><td> String   </td><td> "red" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> dirlist*piafhb*iconForeground  </td><td> String   </td><td> "red" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> dirlist*iconLabelForeground    </td><td> String   </td><td> "white" </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> dirlist*iconLabelBackground    </td><td> String   </td><td> "black" </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> dirlist*fontList               </td><td> String   </td><td> "*-courier-bold-r-normal-*-120-*" </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> XmText*fontList                </td><td> String   </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> XmTextField*fontList           </td><td> String   </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> kxtermTextFont                 </td><td> String   </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> helpFont                       </td><td> String   </td><td> </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> fontList                       </td><td> String   </td><td> </td></tr>
 <tr BGCOLOR="#FFFFCC"><td> kxtermFont                     </td><td> String   </td><td> </td></tr>
 <tr BGCOLOR="#FFCCCC"><td> keyboardFocusPolicy            </td><td> String   </td><td> "pointer" </td><td>  other value: "explicit" </td></tr>
 <tr BGCOLOR="#CCFFFF"><td> doubleClickInterval            </td><td>  int     </td><td> 400 </td><td> </td></tr>
 </table>
 <P>
 <H2>PAW specific resources regarding Kxterm</H2>
 <P>
 For setting all the Kxterm built-in resources for an application "Appl"
 (e.g. "Paw++") one has to prefix the application class name with "Kx".
 E.g.:
 <FONT COLOR="#993300"><pre>
 KxAppl*background:      white
 </pre></font>
 to set the background colour of Kxterm for application Appl.
 <FONT COLOR="#993300"><pre>
 KxPaw++*background:     white
 </pre></font>
 to set the background colour of Kxterm for application Paw++.
<HR SIZE=6><h1>How to generate a PostScript file with the picture currently on the screen ?
</h1>The simplest way to generate a PostScript file from the graphics output
 produced by a <b>PAW</b> macro is:
 <FONT COLOR="#993300"><pre>
 PAW > For/File 66 paw.ps
 PAW > Meta 66 -111
 PAW > Exec My_macro
 PAW > Close  66
 </pre></font>
 To generate a PostScript with the picture currently on the screen do the following:
 <p>
 in your
 <FONT COLOR="#993300"><tt>pawlogon.kumac</tt></font> put:
 <FONT COLOR="#993300"><pre>
                               OPTION ZFL1
 </pre></font>
 and when you want to produce the PostScript file of what you have on the screen do:
 <FONT COLOR="#993300"><pre>
                               PICTURE/PRINT PAW.PS
 </pre></font>
 This will save the current picture on the screen in the file
 <FONT COLOR="#993300"><TT>PAW.PS</TT></font>
 <p>
 Note that the command <FONT COLOR="#993300"><tt>OPTION *</tt></font> resets
 all the default options and will also cancel the 
 <FONT COLOR="#993300"><tt>OPTION ZFL1</tt></font>. So if you want to keep
 it you will have to do again <FONT COLOR="#993300"><tt>OPTION ZFL1</tt></font>
 each time you do <FONT COLOR="#993300"><tt>OPTION *</tt></font>.
<HR SIZE=6><h1>How to draw a function ?
</h1>The simplest is to use the command
 <TT><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:PLOT">FUN/PLOT</a></TT>.
 <p>
 Example:
 <FONT COLOR="#993300"><pre>
 PAW > FUN/PLOT sin(x) -3 3
 </pre></font>
 draws the sinus function between -3 and 3. Note that the command
 <tt><FONT COLOR="#993300">FUN/PLOT</font></tt> creates and fills the
 temporary histogram <tt><FONT COLOR="#993300">12345</font></tt>.
 <p>
 It is also possible to fill an histogram with a function with the command
 <tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:FUN1">FUN1</a></tt>:

 <FONT COLOR="#993300"><pre>
 PAW > FUN1 10 sin(x) 100 -3 3
 </pre></font>
<HR SIZE=6><h1>PostScript metafile type.
</h1>The PostScript metafile type is the second parameter of the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:METAFI">
 <TT><FONT COLOR="#993300">METAFILE</FONT></TT></a>.
 This parameter allows to define how the PostScript output will looks
 like. In particular it allows to define the format of the file (A4, Legal etc..),
 the orientation (Portrait, Landscape) and the number of images (zones) per page.
 The PostScript metafile type has the following form:
 <PRE><FONT COLOR="#993300">                                  -[Format][Nx][Ny][Type]
 </FONT></PRE>
 Where:
 <UL>
 <LI>
 <B>Format</B>  : Is an integer between 0 and 99 which defines the
 format of the paper. Example:
 <BR>if <FONT COLOR="#993300"><TT>Format</TT>=3</FONT> the paper is in the
 standard <B><FONT COLOR="#FF0000">A3</FONT></B> format.
 <BR><FONT COLOR="#993300"><TT>Format</TT>=n</FONT> (1<n<98) is an
 <B><FONT COLOR="#FF0000">An</FONT></B> format.
 <BR><FONT COLOR="#993300"><TT>Format</TT>=4</FONT> and <FONT COLOR="#993300"><TT>Format</TT>=0</FONT>
 are the same and define an <B><FONT COLOR="#FF0000">A4</FONT></B> page.
 <BR>The <B><FONT COLOR="#FF0000">A0</FONT></B> format is selected by <FONT COLOR="#993300"><TT>Format</TT>=99</FONT>.
 <BR>The US format <B><FONT COLOR="#FF0000">Letter</FONT></B> is selected
 by <FONT COLOR="#993300"><TT>Format</TT>=100</FONT>.
 <BR>The US format <B><FONT COLOR="#FF0000">Legal</FONT></B> is selected
 by <FONT COLOR="#993300"><TT>Format</TT>=200</FONT>.
 <BR>The US format <B><FONT COLOR="#FF0000">Ledger</FONT></B> is selected
 by <FONT COLOR="#993300"><TT>Format</TT>=300</FONT>. <BR>
 <BR>
 <LI>
 <B>Nx, Ny</B> : Specify respectively the number of zones on the x and y
 axis. <TT><FONT COLOR="#993300">Nx</FONT></TT> and <TT><FONT COLOR="#993300">Ny</FONT></TT>
 are integers between 1 and 9.<BR>
 <BR></LI>

 <LI>
 <B>Type</B> : Can be equal to:</LI>

 <UL>
 <LI>
 <B>1</B> : <B><FONT COLOR="#FF0000">Portrait </FONT></B>mode with a <I><FONT COLOR="#000000">small
 margin</FONT></I> at the bottom of the page.</LI>

 <LI>
 <B>2 </B>: <B><FONT COLOR="#FF0000">Landscape</FONT></B> mode with a <I>small
 margin</I> at the bottom of the page.</LI>

 <LI>
 <B>4 </B>: <B><FONT COLOR="#FF0000">Portrait</FONT></B> mode with a <I>large
 margin</I> at the bottom of the page.</LI>

 <LI>
 <B>5</B> : <B><FONT COLOR="#FF0000">Landscape </FONT></B>mode with a <I>large
 margin</I> at the bottom of the page. <BR>
 The <I>large margin</I> is useful for some PostScript printers (very often
 for the colour printers) as they need more space to grip the paper for
 mechanical reasons. Note that some PostScript colour printers can also
 use the so called <I>special A4</I> format permitting the full usage of
 the A4 area; in this case larger margins are not necessary and <FONT COLOR="#993300"><TT>Type</TT>=1</FONT>
 or <FONT COLOR="#993300">2</FONT> can be used.</LI>

 <LI>
 <B>3</B> : <B><FONT COLOR="#FF0000">Encapsulated PostScript.</FONT></B>
 This <TT><FONT COLOR="#993300">Type</FONT></TT> permits the generation
 of files which can be included in other documents, for example in LaTeX
 files. Note that with this <TT><FONT COLOR="#993300">Type</FONT></TT>,
 <TT><FONT COLOR="#993300">Nx</FONT></TT> and <TT><FONT COLOR="#993300">Ny</FONT></TT>
 must always be equal to 1, and <TT><FONT COLOR="#993300">Format</FONT></TT>
 has no meaning. Therefore the metafile type for Encapsulated PostScript
 is -113. For example if the name of an Encapsulated PostScript file is
 <TT><FONT COLOR="#993300">example.eps</FONT></TT>, the inclusion of this
 file into a LaTeX file will be possible via (in the LaTeX file):</LI>

 <PRE><FONT COLOR="#993300">              \begin{figure}
              \includegraphics{example.eps}
              \caption{Example of Encapsulated PostScript in LaTeX.}
              \label{EXAMPLE}
              \end{figure}</FONT></PRE>
 You may also want to clip the Encapsulated PostScript when you include it in
 a Latex file using something like:
 <PRE><FONT COLOR="#993300">              \begin{center}
              \fbox{\includegraphics[bb=100 100 200 200, clip=]{example.eps}}
              \end{center}</FONT></PRE>
 And you will not get what you expect ie. the image will not be clipped.
 The problem comes from the fact that in order to always have a clean and
 exact clipping in the PostScript file produced by <b>HIGZ</b>, the
 clipping mechanism provided by PostScript itself is used. The <b>HIGZ</b>
 "clipping" it is not only the clipping at the image boundary but the all
 the clipping on the various zones (Normalisation transformation). This works
 fine and that way one always get a very good clipping even on complicated
 shapes, texts, polygons with patterns etc ... BUT, that doesn't
 fit very well in Encapsulated PostScript files. In the PostScript description
 manual it is even mentioned that using clipping operator is not recommended
 in Encapsulated PostScript files. Most of the time it doesn't create
 any problems because in most cases one want to see the whole plot produced.
 Only a in few cases that can be a problem. To bypass that it is enough to
 save the following line is a file (<TT><FONT COLOR="#993300">clipeps
 </FONT></TT> for instance):
 <PRE><FONT COLOR="#993300"> cat $1 | sed -e "s/systemdict begin initclip end//" > $2
 </FONT></PRE>
 and do:
 <PRE><FONT COLOR="#993300"> $ clipeps example.eps example2.eps
 </FONT></PRE>
 the file <TT><FONT COLOR="#993300">example2.eps</FONT></TT> will be
 properly clipped by the Latex directive given before.

 </UL>
 </UL>
 Examples: <P>
 To illustrate the PostScript metafile type usage we will use the
 following macro, converted into PostScript files with various
 PostScript metafile types.
 <PRE><FONT COLOR="#993300">              <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">Macro</a> Test
              set *fon -60
              <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:CREATE">v/create</a> x1(10) r 1 2 3 4 5 5 4 3 2 1
              v/create x2(10) r 5 4 3 2 1 1 2 3 4 5
              v/create x3(10) r 3 4 5 5 4 3 2 1 2 3
              v/create x4(10) r 4 5 5 4 3 2 1 2 3 4
              <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">set</a> htyp 354 ; v/draw x1
              set htyp 345 ; v/draw x2
              set htyp 390 ; <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:DRAW">v/draw</a> x3
              set htyp 344 ; v/draw x4
              <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:RETURN">return</a>
 </FONT></PRE>
 The conversion to PostScript is done via the following commands where
 we will vary the <FONT COLOR="#993300"><TT>metafile_type</TT></FONT> value.
 <PRE><FONT COLOR="#993300">              PAW > <a href="ttp://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:FILE">FORTRAN/FILE</a> 65 paw.ps
              PAW > METAFILE 65 metafile_type
              PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO.html#M:EXEC">EXEC</a> TEST
              PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:CLOSE">CLOSE</a> 65
 </FONT></PRE>
 Some examples are given in the following list:
 <UL>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -111 .......... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_111.ps"> Portrait A4 </A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -112 .......... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_112.ps"> Landscape A4 </A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -113 .......... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_113.ps"> Encapsulated PostScript </A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -100111 ....... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_100111.ps"> Portrait Letter </A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -200111 ....... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_200111.ps"> Portrait Legal </A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -300111 ....... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_300111.ps"> Portrait Ledger </A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -141 .......... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_141.ps"> Portrait A4 4x1</A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -221 .......... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_221.ps"> Portrait A4 2x2</A>
 <LI><FONT COLOR="#993300"><TT>metafile_type = -411 .......... </TT></FONT>
 <A href="http://wwwinfo.cern.ch/asd/paw/faq/pics/paw_411.ps"> Portrait A4 4x1</A>
 </UL>
<HR SIZE=6><h1> 2D scatter plots ?
</h1> The original question is:
 <hr width="15%">
 <em>
  In a 2d scatter plot, are the points plotted on the screen (and in a ps file)
  at their real position or randomly in the bin (or centred or whatever) ?
 </em>
 <hr width="15%">
 <p>
  If you do
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT"><tt>H/PLOT id</tt></a> they are plotted randomly in each cell and the
 number of points is proportional to the cell content. If you use
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:PLOT"><tt>NT/PLOT id.v1.%v2</tt></a> they are plotted at their real position.
<HR SIZE=6><h1>Text output in PAW: alignment
</h1>The text alignment in <b>PAW</b> is controlled is two different ways
 depending if the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:TEXT">
 <FONT COLOR="#993300"><tt>TEXT</tt></font></a>
 or
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ITX">
 <FONT COLOR="#993300"><tt>ITX</tt></font></a>
 are used.

 <ol>

 <li> With the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:TEXT">
 <FONT COLOR="#993300"><tt>TEXT</tt></font></a>,
 only the horizontal alignment can be changed via the last parameter
 (<FONT COLOR="#993300"><tt>CHOPT</tt></font>) of the command:
 <ul>
 <li>  <b>  L </b> Text is Left justified.
 <li>  <b>  C </b> Text is Centred.
 <li>  <b>  R </b> Text is Right justified.
 </ul>
 <p>
    Example:
 <FONT COLOR="#993300"><pre>
        <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET">SET</a> * ; <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHI
        <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_HPLOT.html#GH:NULL">NULL</a> 0 10 0 10                                  | Draw a frame
        TEXT 5 1 'Left justified' .5 0. L
        TEXT 5 2 'Centred' .5 0. C
        TEXT 5 3 'Right justified' .5 0. R
 </pre></font>

 <li> With the command <b> ITX</b>, SET TXAL should be used to customise the
 text alignment. The syntax is:

 <FONT COLOR="#993300"><pre>
         SET TXAL 10*i+j
 </pre></font>

 where
 <FONT COLOR="#993300"><tt>i</tt></font>
 indicates the horizontal alignment (0,1: left; 2: center; 3:
 right) and
 <FONT COLOR="#993300"><tt>j</tt></font>
 the vertical alignment (0: bottom; 1 or 2: top;
  3:center) as describe on the following picture.
 <p>
 <center><img src="align.gif">
 </center>
 </ol>
<HR SIZE=6><h1>How to set plots ranges ?
</h1><b>For histograms:</b>

 <FONT COLOR="#993300"><pre>
       <A HREF="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">H/PLOT</A> 10(1:10)         | Bin numbers (integer range)
       H/PLOT 10(0.5:1.)       | Axis value (floating point range)
       H/PLOT 20(1:10,0.5:1.)  | 2D histos
 </pre></font>

 <b>For vectors:</b>

 <FONT COLOR="#993300"><pre>
       <A HREF="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:DRAW">VECTOR/DRAW</A> X(10:20)
 </pre></font>

 <b>For Ntuples:</b>

 <FONT COLOR="#993300"><pre>
       <A HREF="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:PLOT">NT/PLOT</a> 1.X 10.le.X.ge.100
 </pre></font>

 <b>You can also do:</b>

 <FONT COLOR="#993300"><pre>
       <A HREF="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_HPLOT.html#GH:NULL">NULL</a> X1 X2 Y1 Y2
 </pre></font>
 And any
 <FONT COLOR="#993300"><tt>H/PLOT</tt></FONT>,
 <FONT COLOR="#993300"><tt>V/PLOT</tt></FONT> or
 <FONT COLOR="#993300"><tt>N/PLOT</tt></FONT> performed with
 option
 <FONT COLOR="#993300"><tt>S</tt></FONT> will be in the range
 <FONT COLOR="#993300"><tt>X1 X2 Y1 Y2</tt></FONT>.
 <p>
 The command
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:RANGE">RANGE</a></tt></FONT> set the range for
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:DRAW">FUN/DRAW</a></tt></FONT>.
 <p>
 And the
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_SET.html#HS:MINIMU">H/SET/MIN</a></tt></FONT> and
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_SET.html#HS:MAXIMU">H/SET/MAX</a></tt></FONT> commands set the range of
 the dependent
 variable (the bin height). For a 1D histogram, these set the Y range;
 for a 2D histogram, the same commands set the Z range.
<HR SIZE=6><h1>How to recover in two different vectors the X and Y values of a 2D histogram ?
</h1>This is an example of a possible macro returning the X and Y coordinates
 of the bins of ID=4. You can change the macro to return the centre of the bins
 instead.<p>

 <FONT COLOR="#993300"><pre>
 Macro getxy
 Hrin [1]
 Nx=$hinfo([1],'xbins')
 Ny=$hinfo([1],'ybins')
 V/cre x([Nx])
 V/cre y([Ny])
 Application Comis Quit
       subroutine getxy(id)
       vector x,y
       character*80 title
       call hgive(id,title,nx,xmin,xmax,ny,ymin,ymax,nwt,iad)
       dx=(xmax-xmin)/float(nx)
       dy=(ymax-ymin)/float(ny)
       do i=1,nx
         x(i)=xmin+dx*float(i-1)
       enddo
       do i=1,ny
         y(i)=ymin+dy*float(i-1)
       enddo
       end
 Quit
 Call getxy([1])
 Return
 </pre></font>
 Example of usage
 <FONT COLOR="#993300"><pre>
  PAW > exe getxy 4
  PAW > v/pri x ; v/pri y
 </pre></font>
<HR SIZE=6><h1>List of the available line styles.
</h1><P>
 <center>
 <img src="linestyle.gif">
 </center>
 <BR><BR>
 Line styles (also named "line types") 12 to 15 can be adjusted with the
 <FONT COLOR="#993300"><tt>BASL</tt></font> and
 <FONT COLOR="#993300"><tt>DASH</tt></font> parameters. The
 following lines give and example
 <FONT COLOR="#993300"><pre>
 PAW > SET * ; OPT * ; ZONE 2 2 ; OPT GRID ; SET GRID 12
 PAW > nul 0 1
 PAW > set basl 0.001
 PAW > nul 0 1
 PAW > set dash 0.2
 PAW > nul 0 1
 PAW > set dash 0.5
 PAW > nul 0 1
 </pre></font>
 <center>
 <img src="basl.gif">
 </center>
<HR SIZE=6><h1>How to draw contours graphically in MINUIT ?
</h1>Since <b>PAW</b> version 2.04, there is an command in the
 <b>PAW/Interactive MINUIT</b> to draw contours graphically.
 This command is <FONT COLOR="#993300"><tt>MNContour</tt></font>:
 <FONT COLOR="#993300"><pre>
 zone 2 2
 V/cr x(10) r 1 2 3 4 5 5 4 3 2 1
 V/dr x 1
 V/cr par(3) r 1 2 3
 Application HMINUIT exit
 Migrad
 Minos
 Show cov
 Show err
 Mnc 1 2 C
 Exit
 Hi/Fit 1 G M 3 par
 </pre></font>
 When the third parameter is used in the
 <FONT COLOR="#993300"><tt>MNC</tt></font> command,
 <B>PAW</b> creates automatically two
 vectors (with 51 points) called <FONT COLOR="#993300"><tt>XFIT</tt></font>
 and <FONT COLOR="#993300"><tt>YFIT</tt></font> that can be used outside
 the <FONT COLOR="#993300">Application HMINUIT</tt></font>
 with the command <FONT COLOR="#993300"><tt>GRAPH</tt></font>
 for example. <u>Note that the <b>MINUIT</b> directives between
 <FONT COLOR="#993300"><tt>Application HMINUIT exit</tt></font> and
 <FONT COLOR="#993300"><tt>exit</tt></font> should be in column 1 in the
 macro</u>. <p>
 Normal <b>PAW</b> commands can be executed inside
 <FONT COLOR="#993300">Application HMINUIT</tt></font>
 if they are prefixed with a
 <FONT COLOR="#993300"><tt>+</tt></font> sign. For example to save the
 vectors <FONT COLOR="#993300"><tt>XFIT</tt></font> and
 <FONT COLOR="#993300"><tt>YFIT</tt></font>
 for later use, you can include the two
 following lines inside the
 <FONT COLOR="#993300">Application HMINUIT</tt></font>:
 <FONT COLOR="#993300"><pre>
 +v/copy xfit xfit1
 +v/copy yfit yfit1
 </pre></font>

 The graphic output of this macro is the following:
 <p>
 <center>
 <img src="mncontour.gif">
 </center>
<HR SIZE=6><h1>How to suppress the X or Y labels on the axis ?
</h1>It is enough to set XVAL (for y labels) or YVAL (for x labels)
 to a large value. Example:

 <FONT COLOR="#993300"><pre>
 PAW > Set YVAL 999   | suppress the X labels
 PAW > Set XVAL 999   | suppress the Y labels
 </pre></font>
<HR SIZE=6><h1>How to define several Y-Scales on the same plot ?
</h1>The following macro illustrate this question. The y-scale
 is redefined several time and the y-axis is redrawn in
 various positions

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="scales.gif">
 </TD><TD>
 <FONT COLOR="#993300"><pre>
    Nul 0 1 0 1             | Produce the first plot
    Nul 0 1 0 10 AS         | Refine the Y scale on the current plot
    Tic XR 0.25 !           | Draw a vertical axis at the X position 0.25
    Nul 0 1 0 100 AS
    Tic XR 0.5 !
    Nul 0 1 0 1000 AS
    Tic XR 0.75 !
    Nul 0 1 0 10000 AS
    Tic XR 1.00 !
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to plot a histogram in green with a black border ?
</h1> Just do :
 <FONT COLOR="#993300"><pre>
  SET HCOL 1103
  H/PLOT 10
 </pre></font>
 With the SET command it is possible to specify both the border and the inside
 color for the Histogram, Box Page, and Function (<tt>HCOL, BCOL, PCOL, FCOL</TT>).
 <p>      Example:
 <FONT COLOR="#993300"><pre>
                    +---- 1 The Histogram is filled
                    |     0 Only the border is drawn
                    |+--- Border color (here 1) if the histogram is filled
                    ||++- Inside color (here 3) if the histogram is filled
                    ||||  Border color if the histogram is not filled
                    ||||
                    VVVV
           SET HCOL 1103.
 </pre></font>

 The same mechanism is also available for <tt>FCOL</tt>, <tt>BCOL</tt> and <tt>PCOL</tt>.
<HR SIZE=6><h1>How to fit a projection of a 2D histogram ?
</h1>The command HISTO/FIT cannot fit directly a projection
 of a 2D histogram ie:

 <FONT COLOR="#993300"><pre>
 PAW> HISTO/FIT 1.PROX G
 </pre></font>

 is NOT valid ...

 The way to proceed is the following:

 <FONT COLOR="#993300"><pre>
 PAW> HISTO/COPY 1.PROX 2
 PAW> HISTO/FIT 2 G
 </pre></font>
<HR SIZE=6><h1>How many arguments can have a UWFUNC generated function ?
</h1> <h3> Before the version 2.07 of PAW</h2>
 ONE ONLY !!!
 <p>
 More arguments seems to work but "by chance" only.
 Passing more arguments may have unpredictable effects.
 <h3> Since the version 2.07 of PAW</h2>
 Up to 10....
 <p> For more details see the <a href="http://wwwinfo.cern.ch/asd/paw/qp.html">
 specifications of the new query processor</a>
<HR SIZE=6><h1> How to get the output of NT/SCAN into a file ?
</h1> Use the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_HIO.html#HH:OUTPUT">
 <FONT COLOR="#993300"><tt>OUTPUT_LP</tt></font></a>:
 <FONT COLOR="#993300"><pre>
          PAW > output_lp 66 scan.dat
          PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:SCAN">nt/san</a> 10
          PAW > close 66
 </pre></font>
 Note that the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:DUMP">
 <FONT COLOR="#993300"><tt>NTUPLE/DUMP</tt></font></a> is able do output in a file
 </ul>
<HR SIZE=6><h1>I cannot open HBOOK files which contains upper case letters ?
</h1><OL>
 <LI> In <B>PAW</B> put the command:
 <FONT COLOR="#993300"><pre>
 FILECASE KEEP
 </pre></font>
 in your <FONT COLOR="#993300"><TT>pawlogon.kumac</TT></font> file.
 <P>
 <LI> In a batch <B>HBOOK</B> program use the option
 '<FONT COLOR="#993300"><TT>P</TT></font>' in
 <FONT COLOR="#993300"><TT>HROPEN</TT></font>.
 </OL>
<HR SIZE=6><h1> A vector field drawing COMIS routine for Ntuple (2D).
</h1>The following example shows how to draw a 2D vector field
 from an Ntuple.

 <FONT COLOR="#993300"><pre>
 H/del *
 Appl data nt.dat
 0  1  0.1 1.8
 1  2  1.1 2.2
 2  3  2.1 3.8
 3  4  3.1 4.8
 4  5  4.1 5.2
 5  5  5.1 5.8
 6  4  6.1 4.2
 7  3  7.1 8.8
 8  2  8.1 2.2
 9  1  9.1 1.2
 nt.dat
 Nt/Create 4 'Test' 4 ! ! X Y PX PY
 Nt/Read 4 nt.dat

 Null -1 10 -1 10

 Appl comis Quit
       REAL FUNCTION ntarr
       REAL
      +X       ,Y       ,PX      ,PY
 *
       LOGICAL         CHAIN
       CHARACTER*128   CFILE
 *
       COMMON /PAWCHN/ CHAIN, NCHEVT, ICHEVT
       COMMON /PAWCHC/ CFILE
 *
       COMMON/PAWIDN/IDNEVT,OBS(13),
      +X       ,Y       ,PX      ,PY
 *
       Dimension a(2),b(2),u(3),v(3)
 *
       a(1) = X
       a(2) = PX
       b(1) = Y
       b(2) = PY
 *
       Arrow_size = 0.2
       Arrow_width =0.3
       fsin=0.
       fcos=1.
       xl=sqrt((a(2)-a(1))**2 + (b(2)-b(1))**2)
       if(xl.gt.0.)then
          fsin=(b(2)-b(1))/xl
          fcos=(a(2)-a(1))/xl
       endif
       u(1)=a(1)+(xl-Arrow_size)*fcos-Arrow_size*Arrow_width *fsin
       u(3)=a(1)+(xl-Arrow_size)*fcos+Arrow_size*Arrow_width *fsin
       v(1)=b(1)+(xl-Arrow_size)*fsin+Arrow_size*Arrow_width *fcos
       v(3)=b(1)+(xl-Arrow_size)*fsin-Arrow_size*Arrow_width *fcos
       u(2)=a(2)
       v(2)=b(2)
 *
       Call Igset('FAIS',1.)
       Call Ipl(2,a,b)
       Call Ifa(3,u,v)
 *
       ntarr=1.
 *
       END
 Quit

 nt/loop 4 ntarr
 </pre></font>
 <center><img src="v1.gif"></center>
<HR SIZE=6><h1>How to create a disk resident Row Wise Ntuple (RWN) ?
</h1>By default Row Wise Ntuples are memory resident. It is possible
 to create such ntuples disk resident. This is useful when
 the ntuple becomes bigger.
 <p>
 The following <b>HBOOK</b> batch program create a disk resident RWN.
 A direct access <b>HBOOK</b> file should be opened before
 the creation of the Ntuple. <b>The name of the top directory
 created by HROPEN is given to HBOOKN</b>. The file is used to flush the
 memory buffer on disk when necessary.

 <pre>
 <FONT COLOR="#993300">
       Program Ntuple
 *
       Parameter (Memory_Size         = 50000)
       Parameter (Number_of_Events    = 100000)
       Parameter (Number_of_Variables = 27)
 *
       Common /Pawc/ H(Memory_Size)
       Dimension   Event(Number_of_Variables)
       Character*8 Chtags(Number_of_Variables)
       Data Chtags /'A1','A2','A3','A4','A5','A6','A7','A8','A9',
      +             'B1','B2','B3','B4','B5','B6','B7','B8','B9',
      +             'C1','C2','C3','C4','C5','C6','C7','C8','C9'/
 *.___________________________________________
 *
       Call Hlimit(Memory_Size)
 *
       Call Hropen(1,'<FONT COLOR="#FF0000">EXAMPLE</FONT>','example.hbook','N',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
 *
       Call Hbookn(10,'Ntuple example',27,'<FONT COLOR="#FF0000">EXAMPLE</FONT>',9000,Chtags)
 *
       Do 10 I=1,Number_of_Events
          Do 20 J=1,Number_of_Variables
             Event(j) = Sqrt(Float(i))*Float(j)
  20      Continue
          Call Hfn(10,Event)
  10   Continue
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('EXAMPLE')
 *
       End
 </FONT>
 </pre>
 <p>
 It is also possible to create a such Ntuple in <b>PAW</b>:
 <FONT COLOR="#993300">
 <pre>
     PAW > HI/FILE 1 example.hbook ! N
     PAW > NT/CREATE 10 'Ntuple example' 1 //LUN1 ! A1 ...
     PAW > NT/READ ...
 </pre></font>
<HR SIZE=6><h1> A vector field drawing COMIS routine for Ntuple (3D).
</h1>The following example shows how to draw a 3D vector field
 from an Ntuple.

 <FONT COLOR="#993300"><pre>
 H/del *

 Appl data nt.dat
 0  1  5 0.1 1.8 5.1
 1  2  4 1.1 2.2 4.1
 2  3  3 2.1 3.8 3.1
 3  4  2 3.1 4.8 2.1
 4  5  1 4.1 5.2 1.1
 5  5  1 5.1 5.8 1.1
 6  4  2 6.1 4.2 2.1
 7  3  3 7.1 8.8 3.1
 8  2  4 8.1 2.2 4.1
 9  1  5 9.1 1.2 5.1
 nt.dat
 Nt/Create 4 'Test' 6 ! ! X Y Z PX PY PZ
 Nt/Read 4 nt.dat

 call hplfr3(0.,10.,0.,10.,0.,10.,30.,30.,'WBF')
 Set MTYP 4
 Set MSCF 0.7

 Appl comis Quit
       REAL FUNCTION ntarr
       REAL
      +X       ,Y       ,PX      ,PY
 *
       LOGICAL         CHAIN
       CHARACTER*128   CFILE
 *
       COMMON /PAWCHN/ CHAIN, NCHEVT, ICHEVT
       COMMON /PAWCHC/ CFILE
 *
       COMMON/PAWIDN/IDNEVT,OBS(13),
      +X       ,Y       ,Z       ,PX      ,PY      ,PZ
 *
       Dimension a(2),b(2),c(2),u(3),v(3)
 *
       a(1) = X
       a(2) = PX
       b(1) = Y
       b(2) = PY
       c(1) = Z
       c(2) = PZ
 *
       Call Ipl3(2,a,b,c)
       Call Ipm3(1,PX,PY,PZ)
 *
       ntarr=1.
 *
       END
 Quit

 nt/loop 4 ntarr
 </pre></font>
 <center><img src="v2.gif"></center>
<HR SIZE=6><h1>MINUIT precision.
</h1>On 32-bit machines (like HP and most others) the user's function must be
 in double precision, for two important reasons:
 <ol>
 <p>
 <li>
    Minuit is supplying
 parameter values and expecting function values all in double precision,
 so it will get complete garbage if the precisions don't match, and
 <p>
 <li>
   the arithmetic precision actually needed in order to calculate second
 derivatives of the user's function and perform other calculations during
 minimization and error analysis, is greater than that attained with
 single precision, so most fits just won't work in single precision.
 </ol>
 <p>
   Note that the user's data do not have to be in double precision, but anything that
 is a function of the free parameters must be in double precision with respect to the
 parameters. The data can be in single precision because it doesn't change during the
 fit.
<HR SIZE=6><h1> Type of the UWFUNC generated function (Since version 2.07)
</h1> Since the <b>PAW</b> version 2.07, the type of the
 <font COLOR="#993300"><tt>UWFUNC</tt></font> generated
 functions used in the selection mechanisms of ntuple commands are typed
 like any ntuple variable.
 <p>
 By default, the command
 <font COLOR="#993300"><tt>UWFUNC</tt></font>
  generate function of type <font COLOR="#993300"><tt>REAL</tt></font>. This
 type is not always the right one. For example in an expression like
 <font COLOR="#993300"><pre>
          PAW > nt/loop select.f.and.$1
 </pre></font>
 the left and right part of the <font COLOR="#993300"><tt>.and.</tt></font>
 should be
 of type boolean.
 <p>
 The solutions are:
 <ul>
 <li> Convert <font COLOR="#993300"><tt>select.f</tt></font> to the right type:
 <font COLOR="#993300"><pre>
          PAW > nt/loop bool(select.f).and.$1
 </pre></font>
 <li> Build a logical expression with
 <font COLOR="#993300"><tt>select.f</tt></font>
 <font COLOR="#993300"><pre>
          PAW > nt/loop (select.f.ne.0).and.$1
 </pre></font>
 <li> Edit
 <font COLOR="#993300"><tt>select.f</tt></font> and make it a
 <font COLOR="#993300"><tt>LOGICAL</tt></font> function. In that case the
      following command will work:
 <font COLOR="#993300"><pre>
          PAW > nt/loop select.f.and.$1
 </pre></font>
 </ul>
 Using the wrong type in a
 <font COLOR="#993300"><tt>.AND.</tt></font> expression produce
 the following message:
 <font COLOR="#993300"><pre>
 /NTUPLE/LOOP: Warning: boolean '.AND.' converted to '*' for backward compatibility
 </pre></font>
 Even if it is a warning, it is better to fix it to be sure to obtain the correct
 result.
 <p>
 More informations on the new ntuple query processor are available
 <a href="http://wwwinfo.cern.ch/asd/paw/qp.html">here</a>.
<HR SIZE=6><h1>How to put the result of a vector fit in a vector instead of plotting the result ?
</h1>The simplest way is to perform the fit with a user defined
 function and then loop over this function to compute the y value
 for all the x required. The following macro gives an example:

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>

 <FONT COLOR="#993300"><pre>
 <FONT COLOR="#0099AA">*
 * Create some vectors
 * </font>
 v/del *
 sigma x = array(100,-1#1)
 sigma y = x*x+rndm(x)*0.1
 sigma ey= array(100,0.1#0.1)
 v/cr par(3) r 1 1 1
 <FONT COLOR="#0099AA">*
 * Perform the fit
 * </font>
 v/fit x y ey p2.f 0 3 par
 <FONT COLOR="#0099AA">*
 * Delete the original vectors and create new
 * vectors to get the fit result
 * </font>
 v/del x,y,ey
 v/cre p2x(100)
 v/cre p2y(100)
 <FONT COLOR="#0099AA">*
 * Function to get the fit result
 * </font>
 appl comis quit
       subroutine getfit
       vector p2x,p2y
       x = -1.
       dx = 2./100.
       do i=1,100
          p2x(i) = x
          p2y(i) = p2(x)
          x = x + dx
       enddo
       end
 quit
 <FONT COLOR="#0099AA">*
 * Get the fit result and plot it
 * </font>
 call getfit
 graph 100 p2x p2y
 </pre></font>
 The function used to do the fit (file <FONT COLOR="#993300"><TT>p2.f</tt></font>) is:
 <FONT COLOR="#993300"><pre>
          FUNCTION P2(X)
          COMMON/PAWPAR/PAR(3)
          P2=PAR(1)*X*X+PAR(2)*X+PAR(3)
          END
 </pre></font>
 </TD><TD>
 <img src="getfit.gif">
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to access ntuple variables by numbers since version 2.07 ?
</h1> In <b>PAW</b> version smaller than 2.07 it was possible to access
 ntuple variables by number. For example it was possible to do something like
 that:
 <FONT COLOR="#993300"><pre>
 nt/plot 1.10 </pre></font>
 to plot the variable number 10 in the ntuple 1. This was not a good feature
 because it generated a lot of ambiguities in the expressions parsing. So this
 <a href="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20722#comp">
 feature has been removed</a>
 in the query processor implemented in the <b>PAW</b> version after 2.07.
 To emulate this functionality with <b>PAW</b> version older than
 2.07, the following macro can be used:
 <FONT COLOR="#993300"><pre>
       Macro plot_nt_nevt
       Hrin [1]
 Application COMIS quit
       integer function ntnum(id,i)
       parameter (maxvar=100)
       character*80 chtitl,line
       character*80 chtag(maxvar)
       dimension rlow(maxvar),rhigh(maxvar)
       nvar=maxvar
       call hgiven(id,chtitl,nvar,chtag,rlow,rhigh)
       if(i.gt.nvar)then
          ntnum=1
          print*, 'Variable number requested > NVAR (',nvar,')'
       else
          ntnum=0
          line = 'global/create varname '//chtag(i)
          call kuexel(line)
       endif
       end
 quit
       Ierr=$ICALL('ntnum('//[1]//','//[2]//')')
       If [Ierr]=0 Then
          nt/plot [1].[varname]
       Endif
       Return
 </pre></font>
 The input parameters are the ntuple identifier and the variable numbers.
 <p>
 The following example plot the variable number 3 of the ntuple number 10.
 <FONT COLOR="#993300"><pre>
 PAW > exec plot_nt_nevt 10 3
 </pre></font>

 <p>
 More informations on the new ntuple query processor are available
 <a href="http://wwwinfo.cern.ch/asd/paw/qp.html">here</a>.
<HR SIZE=6><h1>How to get informations about Column Wise Ntuple (CWN) columns ?
</h1> Use the routine HNTVAR. You can loop yourself on each column
 to find out the info.

 <FONT COLOR="#993300"><pre>
 SUBROUTINE HNTVAR(ID1,IVAR,CHTAG,BLOCK,NSUB,ITYPE,ISIZE,IELEM)
 </pre></font>


 This routine returns the tag, block, type, size and array
 length of the variable with index IVAR in N-tuple ID1.
 N-tuple must already be in memory.
<HR SIZE=6><h1>How to add blocks to an existing Column Wise Ntuple (CWN) ?
</h1>The following example create a CWN, read it back, add two blocks
 and fill them with values.
 <FONT COLOR="#993300"><pre>
       Program add_block
 *
       Common /Pawc/ H(100000)
       Parameter (Nmax = 300)
       Common /CWN/  N,X,Y,Z
 *.___________________________________________
 *
       Call Hlimit(100000)
 *
       Call Hropen(1,'CWN','cwn.hbook','N',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
 *
       Call Hbnt(1,'CWN',' ')
       Call Hbname(1,'BLOCK1',N,'N')
       Call Hbname(1,'BLOCK2',X,'X')
 *
       Do N=1,Nmax
          Do I=1,N
             X = 10.*N
          EndDo
          Call HFNTB(1, 'BLOCK1')
          Call HFNTB(1, 'BLOCK2')
       EndDo
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('CWN')
       Close(1)
 *
       Call Hropen(1,'CWN','cwn.hbook','U',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
       Call Hrin   (1,9999,0)
       Call Hbname (1,' ',0,'$CLEAR')
       Call Hbname (1,'BLOCK1',N,'$SET')
       Call Hbname (1,'BLOCK2',X,'$SET')
 *
       Call Hbname(1,'BLOCK3',Y,'Y')
       Call Hbname(1,'BLOCK4',Z,'Z')
 *
       Do N=1,Nmax
          Do I=1,N
             Y = 100.*N
             Z = 1000.*N
          EndDo
          Call HFNTB(1, 'BLOCK3')
          Call HFNTB(1, 'BLOCK4')
       EndDo
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('CWN')
       Close(1)
 *
       End
 </pre></font>
<HR SIZE=6><h1>How to specify a good buffer size for RW-Ntuples ?
</h1>The original question was:
 <p>
 <em>
    When using HBOOK, I find that my jobs tend to crash with
 ZEBRA dumps if I try to create a large ntuple.
 All it does is to create and fill a large (80 MB) ntuple.
 In this job, the buffer size given in the call to HBOOKN, is specified by the
 parameter LBUF. If I run the job with:
  <p>
 <ol>
 <li> LBUF=25000, then it runs successfully and takes only 20 seconds CPU.
 <li> LBUF=3500, then it still runs, but is much slower, taking 90 seconds CPU.
 <li> LBUF=3000, then it crashes with a ZEBRA dump.
 </ol>
 </em>

 <p>When a Row-Wise-Ntuple is created, HBOOK keeps in memory a directory
 with a key and a pointer corresponding to each logical record (ntuple buffer)
 written to the disk file.
 If a buffer size of NPRIME words (parameter in HBOOKN) is declared, this buffer
 can accommodate up to NEBUF=NPRIME/Ncolumns entries. When the buffer is full
 after NEBUF events, it is written to the file and one entry is added to the
 directory in memory. Each entry requires 7 words.
<HR SIZE=6><h1>Offsetting superimposed histograms
</h1>This can be done thanks to the option BAR and the two
 parameters BARW (bar width) and BARO (Bar offset) of the SET
 command. The following macro gives an example:

 <FONT COLOR="#993300"><pre>
       Macro offset_example
       *
       Appl Sigma Quit
       x =array(20,0#3)
       y1=sin(x)
       y2=sin(x*x)
       y3=sin(x+0.2)
       Quit
       *
       Option BAR
       set BARW 0.33
       set BARO 0
       set HCOL 1102 ; v/draw y1
       set BARO 0.33
       set HCOL 1103 ; v/draw y2 chopt=s
       set BARO 0.66
       set HCOL 1104 ; v/draw y3 chopt=s
       *
       Return
 </pre></font>
 <center><img src="bar.gif"></center>
<HR SIZE=6><h1>How to use the command LINE in LOG scales ?
</h1> The
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:LINE">
 <FONT COLOR="#993300"><tt>LINE</tt></font></a>
 command doesn't take into account the option LOG option.
 The user should compute himself the log with
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA">
 <FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>
 .
 Moreover, the
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:LINE">
 <FONT COLOR="#993300"><tt>LINE</tt></font></a>
 command
 has a reverse calling sequence compare to commands
 like
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:BOX">
 <FONT COLOR="#993300"><tt>BOX</tt></font></a>
 and
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ARROW">
 <FONT COLOR="#993300"><tt>ARROW</tt></font></a>.
 For backward compatibility reasons, we
 kept this command like that. But, to bypass all these problems
 we have introduced the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:DLINE">
 <FONT COLOR="#993300"><tt>DLINE</tt></font></a>
 in the version
 <a href="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20415">
 2.04/11</a>
 of <b>PAW</b>.
<HR SIZE=6><h1>How to remove the axis and the histogram box ?
</h1>The idea is to remove the axis by setting the size of the tick marks
 to almost 0., push away the axis labels by setting the distance
 between labels and axis to something very large and finally remove the
 histogram box by painting it with the background colour (white).
 <p>
 The following setting are necessary:
 <p>
 To remove the axis:
 <FONT COLOR="#993300"><pre>
  Set XTIC 0.001
  Set YTIC 0.001
  Set XVAL 1000
  Set YVAL 1000
 </pre></font>
 To remove the histogram box:
 <FONT COLOR="#993300"><pre>
  color 9 1 1 1
  Set BCOL 9
 </pre></font>
<HR SIZE=6><h1>How to create, fill and plot a projection of a 2D histogram ?
</h1>The following macro shows how to proceed:
 <FONT COLOR="#993300"><pre>
   histo/create/proy 111
   histo/project 111
   histo/plot 111.proy
 </pre></font>
 The above piece of code will plot the projection of 2D histogram 111 onto
 the y axis.  If you want the projection onto the x axis just replace
 <FONT COLOR="#993300"><tt>proy</tt></font>
 with
 <FONT COLOR="#993300"><tt>prox</tt></font>
 in the above piece of code.
 <P><B>Important Remark:</b><P>
 When the projections are filled the filling
 routine for 1D histogram is called for each projected bin of the 2D i
 histogram. In
 case of PROX and PROY all the bins are used so the number of calls to the
 1D histogram filling routine is equal to NX*NY (NX and Ny being the
 number of bin along X and Y axis). So to summarize, the number of entries
 you get for the projection is equal to the total number of bins of the 2D
 histogram. So it is meaningless.
<HR SIZE=6><h1>Weights in profile histograms.
</h1> Profile histograms can be filled with weights.
 <p>
 Negative weights yield meaningless results.
 <p>
 When weights different from 1. are used, the errors are calculated
 properly only for bins with non-zero spread, and set to 0. for bins with zero
 spread.
 <p>
 Errors for the CHOPT='I' option are calculated in the same way (as
 those for the 'S' option.)
<HR SIZE=6><h1>How to make aligned subscripts and superscripts in the command TEXT ?
</h1>Use the
 <FONT COLOR="#993300"><tt>&</tt></font> control character for backspacing, at
 the end of the superscript.
 That way, the amount backspaced will be appropriate for the small-sized
 characters you're dealing with.  Thus, you would write:
 <FONT COLOR="#993300"><pre>
         TEXT 10 10 'A^b&!?c!' 0.4 0. 'C'
 </pre></font>
 and the
 <FONT COLOR="#993300">b</tt></font>
 and
 <FONT COLOR="#993300">c</tt></font>
 will come out vertically aligned.
 <center><img src="supsub.gif"></center>
<HR SIZE=6><h1>HMERGE and histograms in memory
</h1>When the HMERGE command is used
 more than once in the same session:

 <FONT COLOR="#993300"><pre>
 PAW > HMERGE OUT1 IN1 IN2
 PAW > HMERGE OUT2 IN3 IN4
 </pre></font>

 The first merge works as advertised, but the second merge
 includes IN1,IN2 as well as IN3,IN4.

 To avoid this problem perform the command H/DEL * between
 the two HMERGE commands.
<HR SIZE=6><h1>Is there an intrinsic limit on the number of permitted cuts ?
</h1><b>Since PAW version 2.07 </b> there is NO intrinsic limit on the number of permitted cuts
 <p>
 <b>Before PAW version 2.07 </b>
 you can get the error message:
 <FONT COLOR="#993300"><pre>
  ***** ERROR in PECRIT : OVERFLOW IN ICODE STACK :
 </pre></font>

 The <TT>ICODE</TT> stack is the place where the ntuple query processor
 keeps a translated version of your expressions and selection function.
 It also has to store all the translated expressions which make up the
 combination of cuts <TT>$1</TT>, which are quite a few.

 With <b>PAW</b> version older than 2.07 you can try to reduce the size of the
 selection expression by using masks.
 <P>
 Example:
 <FONT COLOR="#993300"><pre>
 *
 * create a mask file named mymask.mask for ntuple up to 20000 events
 * change the number if necessary
 *

 mask mymask n 20000

 nt/cuts $1 -
 nt/cuts $2 -
 nt/cuts $3 -
 nt/cuts $3 (x=1.).or.(x=2.).or.(x=3.).or.(x=4.).or.(x=5.)
 nt/cuts $2 (x=1.).or.(x=2.).or.(x=7.).or.(x=8.)

 n/loop 5000 $3>>mymask(1)
 n/loop 5000 $2>>mymask(2)

 nt/cuts $1 mymask(1).and.mymask(2)

 n/loop 5000 $1>>mymask(3)

 *
 * The final cut should not give an overflow anymore.
 *
 nt/plot 1.x $1.and.$1.and.$1.and.$1.and.$1
 </pre></font>
<HR SIZE=6><h1>Workstation type ?
</h1>When <B>PAW </B>start the user has to answer the following question:

 <P><TT><FONT COLOR="#993300">Workstation type (?=HELP) <CR>=1 :</FONT></TT></P>

 <P>Just typing <TT><FONT COLOR="#993300">CR</FONT></TT> will set the default
 value.The default value depends on the <B>PAW </B>installation.
 </P>

 <P>Typing <FONT COLOR="#993300">? </FONT>will give a short help listing
 all the different possible workstation types. </P>

 <P>Any other answer will be interpreted as a workstation type. </P>

 <h3>The X11 version of PAW </h3>
 In most cases one will type just
 <TT><FONT COLOR="#993300">Enter</FONT></TT>. This means the graphics window
 will be open on the screen
 defined by the environment variable
 <TT><FONT COLOR="#993300">DISPLAY</FONT></TT>. This variable is a standard
 one used by all the X11 applications. So it should be defined. To check if it
 is, just type the command <TT><FONT COLOR="#993300">echo $DISPLAY</FONT></TT>.
 It should be define the following way:
 <TT><FONT COLOR="#993300">your-machine-name:0.0</FONT></TT>
 if it is not, you should define it. For example if your machine name is
 <TT><FONT COLOR="#993300">frodo</FONT></TT> do
 <TT><FONT COLOR="#993300">export DISPLAY=frodo:0.0</FONT></TT> (in
 <TT><FONT COLOR="#993300">ksh</FONT></TT> like shells) or
 <TT><FONT COLOR="#993300">setenv DISPLAY frodo:0.0</FONT></TT> (in
 <TT><FONT COLOR="#993300">csh</FONT></TT> like shells).
 Note that you should put this definition is your startup file
 (<TT><FONT COLOR="#993300">.profile</FONT></TT> or
  <TT><FONT COLOR="#993300">.login</FONT></TT>)



 <P>
 The <B>X11 </B>version of <B>PAW </B> (<tt>pawX11</tt>) accept also workstation
 types like:
 <TT><FONT COLOR="#993300">n</FONT></TT> or
 <TT><FONT COLOR="#993300">n.hostname</FONT></TT> where
 <TT><FONT COLOR="#993300">n</FONT></TT>
 (an integer between 1 and 10)
 is the line number in the file <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>
 and <TT><FONT COLOR="#993300">hostname </FONT></TT>is the name of the machine
 on which the graphics will be displayed.

 <OL>
 <P><LI>If a workstation type like <TT><FONT COLOR="#993300">n.hostname</FONT></TT>
 is entered, the hostname is written at the end of the line <TT><FONT COLOR="#993300">n</FONT></TT>
 in <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>. </LI>

 <P><LI>If the workstation type <TT><FONT COLOR="#993300">n</FONT></TT> is
 entered and if a <TT><FONT COLOR="#993300">hostname </FONT></TT>is present
 on the line <TT><FONT COLOR="#993300">n</FONT></TT> in <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>,
 the graphics will be redirected to the machine hostname. </LI>

 <P><LI>If the workstation type <TT><FONT COLOR="#993300">n</FONT></TT> is
 entered and if a <TT><FONT COLOR="#993300">hostname </FONT></TT>is not
 on the line <TT><FONT COLOR="#993300">n </FONT></TT>in <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>,
 the graphics will be redirected to the machine defined by the variable
 <TT><FONT COLOR="#993300">DISPLAY</FONT></TT> like for any <B>X11</B>
 application. </LI>

 <P><LI>If the workstation type <TT><FONT COLOR="#993300">n. </FONT></TT>is
 entered and if a <TT><FONT COLOR="#993300">hostname </FONT></TT>is present
 on the line <TT><FONT COLOR="#993300">n </FONT></TT>in <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>,
 the graphics will be redirected to the machine defined by the variable
 <TT><FONT COLOR="#993300">DISPLAY </FONT></TT>and <TT><FONT COLOR="#993300">hostname
 </FONT></TT>is removed from the line <TT><FONT COLOR="#993300">n</FONT></TT>
 in <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>. </LI>
 </OL>

 <P><I>Remark</I>: In the file <TT><FONT COLOR="#993300">higz_windows.dat</FONT></TT>,
 it is possible to specify the name of the window just after the <TT><FONT COLOR="#993300">hostname</FONT></TT>.
 </P>
 Example:
 <FONT COLOR="#993300">
 <PRE>
  0000 0000 0600 0600 hphigz.cern.ch PAW window
  0600 0000 0300 0300
  0000 0000 0600 0600
  0000 0000 0600 0600
  0000 0000 0600 0600
  0000 0000 0600 0600
  0000 0000 0600 0600
  0000 0000 0600 0600
  0000 0000 0600 0600
  0000 0000 0600 0600
 </PRE>
 </FONT>
<HR SIZE=6><h1>How the parameter RMS is defined and calculated ?
</h1> <ul>
 <li>The <b>RMS</b> is simply the square root of the <b>variance</b>.
 <p>
 <li> The <b>variance</b> is calculated as the <b>mean of the squares
 </b> minus the <b>square of the mean</b>.
 <p>
 <li>The mean X value of the histogram is the sum over all bins of X*W (where X
     is the abscissa value and W the contents of the bin), divided by the sum of
     all W.
 <p>
 <li>The <b>mean of the squares</b> is the sum over all bins of X*X*W, divided
     by the sum of all W.
 </ul>
<HR SIZE=6><h1>How to retrieve all the commands that went into producing a plot ?
</h1>You can use the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:LAST"><TT>LAST</TT></a>.
 It will give you the list of all commands you have typed.
<HR SIZE=6><h1>Can I enlarge the fonts in the color table ?
</h1>With <b>PAW</b> versions older than 2.07/22 you cannot. The size is automatic.

 It is possible to get bigger font on paper, though.
 <FONT COLOR="#993300"><pre>
     zone 1 1
     For/file 66 paw.ps ; meta 66 -331
     h/pl 1 colz
     h/pl 2 colz
     h/pl 3 colz
     ....
     close 66
 </pre></font>

 <b>
 Since the version 2.07/22 of <b>PAW</b> this size follows the VSIZ attribute (SET command).
 </b>
<HR SIZE=6><h1>RZOUT: Directory too big ....
</h1>The original question was:
 <p><em>
 I'm writing out ntuples in a job and sometimes
 get the error messages:</em>
 <FONT COLOR="#993300"><pre>
 RZOUT: Directory too big: previous cycle(s) deleted, KEY(1)=     501
 RZOUT: Directory too big: previous cycle(s) deleted, KEY(1)=     502
 RZOUT: Directory too big: previous cycle(s) deleted, KEY(1)=     503
 </pre></font>

 <p>
 When nTuples are being created, the underlying memory manager
 Zebra must occasionally write a new directory record so that
 the nTuple can be accessed correctly after it is closed. For
 large nTuples it can happen that the space remaining in the
 direct access nTuple file is insufficient to create the new
 directory entry. In this case, the warning/error message you
 mention is received, and Zebra deletes a previous cycle of
 the directory to gain space. The new cycle is then written.
<HR SIZE=6><h1>How to control the polygon filling ?
</h1>In <b>PAW</b> command like
 <FONT COLOR="#993300"><tt>BOX</tt></font>,
 <FONT COLOR="#993300"><tt>FBOX</tt></font>,
 <FONT COLOR="#993300"><tt>FAREA</tt></font> etc.. draw closed
 polygons. The filling of these polygon is controlled
 with the fill area interior style. It can be changed with the
 command:
 <FONT COLOR="#993300"><pre>
        PAW > SET FAIS n
 </pre></font>
 "<FONT COLOR="#993300"><tt>n</tt></font>" may have the value 0, 1, or 3.
 All the other values are
 not valid.

 <FONT COLOR="#993300"><pre>
 n = 0  The polygon is drawn in hollow mode
 n = 1  The polygon is drawn in solid mode
 n = 3  Hatch mode.
 </pre></font>

 If <FONT COLOR="#993300"><tt>n=3</tt></font> it is possible to choose the
 type of hatches. This
 is done with the fill are style index attribute. It can be changed with the
 command:
 <FONT COLOR="#993300"><pre>
        PAW > SET FASI m
 </pre></font>

 "<FONT COLOR="#993300"><tt>m</tt></font>" may have several value describe in
 the <b>PAW</b> manual.

 <p> Note that in hollow and hatch mode, the border of the
     box can be drawn if the attribute <FONT COLOR="#993300"><tt>BORD</tt></font>
  is set to 1.

 <p> Example:

 <FONT COLOR="#993300"><pre>
       Nul 0 10 0 10
       Set FAIS 0
       Box 1 3 1 3
       Set FAIS 1
       Box 1 3 3 5
       Set FAIS 3
       Set FASI 245
       Box 1 3 5 7
       Set FASI 3
       Box 3 5 5 7
       Set BORD 1
       Set FASI 4
       Box 5 7 5 7
 </pre></font>
 <center><img src="fill.gif"></center>
<HR SIZE=6><h1>How to change the histogram title drawn by H/PLOT ?
</h1>This can be done thanks to the option <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:OPTION"><tt>UTIT</tt></a> combined with
 the <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_CREATE.html#HC:TITLEG"><tt>TITLE</tt></a> command. Example:

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="utit.gif">
 </TD><TD>
 <FONT COLOR="#993300"><PRE>
       PAW > opt utit
       PAW > title 'New title' U
       PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">h/pl</b> 10</a>
 </PRE></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>Minuit options setting.
</h1>Whenever you need to use a standard Minuit option and
 you don't find the corresponding <b>PAW</b> command or option, you can always
 invoke the fit in <b>PAW</b> with the 'M' option, which requires you to enter the
 Minuit commands yourself, but then allows you to use all the Minuit
 commands and options directly as documented in the Minuit manual.
<HR SIZE=6><h1>A macro to move a histogram (2d) in a larger one
</h1>Here is a macro to move a 2d histogram in a larger one.

 <p>   Try:

 <FONT COLOR="#993300"><pre>
          PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO.html#M:EXEC">EXE</a> MOVE ?
          PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:FUN2">FUN2</a> 101 SIN(X)*COS(Y) 40 -1.57 1.57 40 -1.57 1.57
          PAW > EXEC MOVE 101 102 -3.24 3.24 -3.24 3.24
 </pre></font>

 Where the macro <FONT COLOR="#993300"><tt>move.kumac</tt></font> is:

 <FONT COLOR="#993300"><pre>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">MACRO</a> MOVE
 *
 * This macro will take a 2-d histograms and move it into a bigger
 * histogram. Movement will be done with vectors.
 *
 * This is provided as a starting basis and doesn't cover all cases.
 *
 * Robert C. Welsh Univ of Michigan Physics Dept.
 * Feb 1995
 *

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Branching.html#MSB:IFTHEN">IF</a> <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Variables.html#MSV:Number">[1]</a> .EQ. '?' THEN
   <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:MESSAG">MESSAGE</a>
   MESSAGE This macro will move a 2d histogram with some limits into a new one
   MESSAGE Usage:
   MESSAGE   MOVE [HIST#] [NEW HIST#] [XMinNew] [XMaxNew] [YMinNew] [YMaxNew]
   MESSAGE
   EXITM
 ENDIF

 HIST1 = [1]
 HIST2 = [2]

 XMNNEW = [3]
 XMXNEW = [4]
 YMNNEW = [5]
 YMXNEW = [6]

 XMIN  = $HINFO([HIST1],'XMIN')
 XMAX  = $HINFO([HIST1],'XMAX')
 YMIN  = $HINFO([HIST1],'YMIN')
 YMAX  = $HINFO([HIST1],'YMAX')

 NXOLD = $HINFO([HIST1],'XBINS')
 NYOLD = $HINFO([HIST1],'YBINS')

 DX    = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$RSIGMA</tt></font></a>(([XMAX]-[XMIN])/[NXOLD])
 DY    = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$RSIGMA</tt></font></a>(([YMAX]-[YMIN])/[NYOLD])

 NXNEW = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>(INT( ([XMXNEW] - [XMNNEW])/[DX]))
 NYNEW = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>(INT( ([YMXNEW] - [YMNNEW])/[DY]))

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:CREATE">V/CREATE</a> TMP1([NXOLD],[NYOLD])
 V/CREATE TMP2([NXNEW],[NYNEW])

 TITLE = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:FUNCTI">$HTITLE</a>([HIST1])

 IF $HEXIST([HIST2]).NE.0 THEN
   MESSAGE You are overwriting a preexisting histogram!
   <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:DELETE">H/DEL</a> [HIST2]
 ENDIF

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_CREATE.html#HC:2DHIST">2D</a> [HIST2] [TITLE] [NXNEW] [XMNNEW] [XMXNEW] [NYNEW] [YMNNEW] [YMXNEW]

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_GET_VECT.html#HG:CONTEN">GET/CONT</a> [HIST1] TMP1

 I1 = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>(INT(([NXNEW]-[NXOLD])/2))-1
 I2 = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>(INT(([NYNEW]-[NYOLD])/2))

 IX = 0
 IY = 1

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Looping.html#MSL:DO">DO</a> IX=1,[NXOLD]
   I1 = [I1] + 1
   <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:COPY">V/COPY</a> TMP1(1:,[IX]) TMP2([I2]:,[I1])
 ENDDO

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM_PUT_VECT.html#HP:CONTEN">PUT/CONT</a> [HIST2] TMP2
 V/DEL TMP1,TMP2

 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:RETURN">RETURN</a>
 </pre></font>
<HR SIZE=6><h1>Is it possible to define a new command in PAW at run-time ?
</h1>Yes, by using <b>COMIS</b>. You can define your new command(s) in a
 KUIP Command Definition File (CDF) to be compiled by the <FONT COLOR="#993300"><tt>kuipc</tt></font>
 compiler, and write the corresponding action routines in a separate file.
 By loading these files with <b>COMIS</b> and calling the routine which contains
 the new command(s) definition <b>PAW</b> will understand these new command(s).
 <p>
 <h2>Example</h2>

 The following is a small CDF which defines a new command
 KUIP/WELCOME (file <FONT COLOR="#993300"><tt>welcomedef.cdf</tt></font>):
 <FONT COLOR="#993300"><pre>
 >Name welcomedef

 >Menu /KUIP
 >Command welcome
 >Parameters
 +
 CHOPT 'Options' C D='E'
 -E      English version
 -F      French version
 >Guidance
 Print a "welcome" message.
 Message can be either in English (default) or in French.
 >Action welcome
 </pre></font>

 Compile this CDF with the <tt>kuipc</tt> compiler:

 <FONT COLOR="#993300"><pre>
 > kuipc welcomedef.cdf welcomedef.c
 </pre></font>

 This will generate a file <FONT COLOR="#993300"><tt>welcomedef.c</tt></font>.
 <p>

 The following is the corresponding action routine "welcome" in a file
 <FONT COLOR="#993300"><tt>welcome.c</tt></font>:

 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>

 #define R_OK    0
 #define R_ERROR 1


 void welcome_()
 {
      char    mode, *s;
      int     r;

      r = R_OK;

      /* determine mode E (English) or F (French) */

      switch( ku_npar() ) {
      case 0:
              mode = 'E';
              break;
      case 1: /* check */
              s = ku_getc();
              if ( *s == 'E' || *s == 'F' ) {
                      mode = *s;
              } else {
                      printf( "welcome: Illegal option(s).\n" );
                      r = R_ERROR;
              }
              break;
      default:
              printf( "welcome: Illegal option(s).\n" );
              r = R_ERROR;
              break;
      }

      if ( r == R_ERROR ) return;

      if ( mode == 'E' ) {
           printf ("*** Welcome to Paw++ \n\n");
           printf ("    For any kind of help type: \n");
           printf ("    Paw++> help <keyword>\n");
           printf ("    E.g.:\n");
           printf ("    Paw++> help postscript\n");
      } else {
           printf ("*** Bienvenue dans Paw++ \n\n");
           printf ("    Pour obtenir de l'aide taper:\n\n");
           printf ("    Paw++> help <keyword>\n");
           printf ("    Par exemple:\n");
           printf ("    Paw++> help postscript\n");
      }
 }
 </pre></font>

 N.B.: for COMIS the C routine name must be welcome_ (with an underscore).
 <p>

 We can group the commands you must execute (to make this new command available)
 in a small KUIP macro (file <FONT COLOR="#993300"><tt>welcome.kumac</tt></font>):

 <FONT COLOR="#993300"><pre>
 Macro welcome
 App COMIS quit
 !file welcome.c
 quit
 CALL welcomedef.c
 </pre></font>

 Consequently you must just type on the command line (Paw or Paw++):

 <FONT COLOR="#993300"><pre>
 PAW > exec welcome
 </pre></font>

 You can check that the command is known by typing:

 <FONT COLOR="#993300"><pre>
 PAW > help welcome
 </pre></font>

 which will give you:

 <FONT COLOR="#993300"><pre>
 Command "/KUIP/welcome" :

  * KUIP/welcome [ CHOPT ]

    CHOPT      C 'Options' D='E'

    Possible CHOPT values are:

     E  English version
     F  French version

    Print a "welcome" message.  Message can be either in English (default) or
    in French.
 </pre></font>

 Note: in Paw++ if you want the command to be visible in the menu ``Commands''
 in the ``Paw++ Main Browser'' you must not access this menu before
 executing the macro <FONT COLOR="#993300"><tt>welcome</tt></font> but only after (for efficiency reasons
 the menu is built once for ever the first time it is accessed).
<HR SIZE=6><h1>Emacs style editing in PAW++
</h1>To get emacs style editing in all text fields in Paw++
 add the following translations to your .Xdefaults file and merge
 your .Xdefaults with the existing defaults (xrdb -merge .Xdefaults).

 <FONT COLOR="#993300"><pre>
 Paw++*XmText.translations: #override \n\
    Ctrl <Key>b:            backward-character()\n\
    Alt <Key>b:             backward-word()\n\
    Meta <Key>b:            backward-word()\n\
    Shift Alt <Key>b:       backward-word(extend)\n\
    Shift Meta <Key>b:      backward-word(extend)\n\
    Alt <Key>[:             backward-paragraph()\n\
    Meta <Key>[:            backward-paragraph()\n\
    Shift Alt <Key>[:       backward-paragraph(extend)\n\
    Shift Meta <Key>[:      backward-paragraph(extend)\n\
    Alt <Key><:             beginning-of-file()\n\
    Meta <Key><:            beginning-of-file()\n\
    Ctrl <Key>a:            beginning-of-line()\n\
    Shift Ctrl <Key>a:      beginning-of-line(extend)\n\
    Ctrl <Key>osfInsert:    copy-clipboard()\n\
    Shift <Key>osfDelete:   cut-clipboard()\n\
    Shift <Key>osfInsert:   paste-clipboard()\n\
    Alt <Key>>:             end-of-file()\n\
    Meta <Key>>:            end-of-file()\n\
    Ctrl <Key>e:            end-of-line()\n\
    Shift Ctrl <Key>e:      end-of-line(extend)\n\
    Ctrl <Key>f:            forward-character()\n\
    Alt <Key>]:             forward-paragraph()\n\
    Meta <Key>]:            forward-paragraph()\n\
    Shift Alt <Key>]:       forward-paragraph(extend)\n\
    Shift Meta <Key>]:      forward-paragraph(extend)\n\
    Ctrl Alt <Key>f:        forward-word()\n\
    Ctrl Meta <Key>f:       forward-word()\n\
    Ctrl <Key>d:            kill-next-character()\n\
    Alt <Key>BackSpace:     kill-previous-word()\n\
    Meta <Key>BackSpace:    kill-previous-word()\n\
    Ctrl <Key>w:            key-select() kill-selection()\n\
    Ctrl <Key>y:            unkill()\n\
    Ctrl <Key>k:            kill-to-end-of-line()\n\
    Ctrl <Key>u:            beginning-of-line() kill-to-end-of-line()\n\
    Alt <Key>Delete:        kill-to-start-of-line()\n\
    Meta <Key>Delete:       kill-to-start-of-line()\n\
    Ctrl <Key>o:            newline-and-backup()\n\
    Ctrl <Key>j:            newline-and-indent()\n\
    Ctrl <Key>n:            next-line() \n\
    Ctrl <Key>osfLeft:      page-left()\n\
    Ctrl <Key>osfRight:     page-right()\n\
    Ctrl <Key>p:            previous-line() \n\
    Ctrl <Key>g:            process-cancel()\n\
    Ctrl <Key>l:            redraw-display()\n\
    Ctrl <Key>osfDown:      next-page()\n\
    Ctrl <Key>osfUp:        previous-page()\n\
    <Key>osfDown:           next-line() \n\
    <Key>osfUp:             previous-line() \n\
    Ctrl <Key>space:        set-anchor()

 Paw++*XmTextField.translations: #override \n\
    Ctrl <Key>b:            backward-character()\n\
    Alt <Key>b:             backward-word()\n\
    Meta <Key>b:            backward-word()\n\
    Shift Alt <Key>b:       backward-word(extend)\n\
    Shift Meta <Key>b:      backward-word(extend)\n\
    Ctrl <Key>a:            beginning-of-line()\n\
    Shift Ctrl <Key>a:      beginning-of-line(extend)\n\
    Ctrl <Key>osfInsert:    copy-clipboard()\n\
    Shift <Key>osfDelete:   cut-clipboard()\n\
    Shift <Key>osfInsert:   paste-clipboard()\n\
    Ctrl <Key>e:            end-of-line()\n\
    Shift Ctrl <Key>e:      end-of-line(extend)\n\
    Ctrl <Key>f:            forward-character()\n\
    Ctrl Alt <Key>f:        forward-word()\n\
    Ctrl Meta <Key>f:       forward-word()\n\
    Ctrl <Key>u:            beginning-of-line() delete-to-end-of-line()\n\
    Ctrl <Key>osfLeft:      page-left()\n\
    Ctrl <Key>osfRight:     page-right()\n\
    Ctrl <Key>g:            process-cancel()\n\
    Ctrl <Key>space:        set-anchor()
 </pre></font>
<HR SIZE=6><h1>How to fill a vector element by element in a macro ?
</h1>The example below shows how to proceed. First it
 creates ten histograms. Then it put the mean values of these
 histograms into a array called mean.

 <FONT COLOR="#993300"><pre>
 do i=1,10
    fun1 [i] x*x 100 0 [i]
 enddo
 *
 v/create mean(10)
 do i=1,10
    m = $hinfo([i],'MEAN')
    v/input mean([i]) [m]
 enddo
 v/print mean
 </pre></font>
<HR SIZE=6><h1>Minuit output description.
</h1>When a command like:
 <FONT COLOR="#993300"><pre>
 PAW > hi/fit 10 g
 </pre></font>
 is performed in <b>PAW</b> a screen output is given by <b>PAW</b>/<b>Minuit</b>:
 <FONT COLOR="#993300"><pre>
     **********************************************
     *                                            *
     * Function minimization by SUBROUTINE HFITGA *
     * Variable-metric method                     *
     * ID =         10  CHOPT = TU                *
     *                                            *
     **********************************************
  Convergence when estimated distance to minimum (EDM) .LT.  0.10E+01

  FCN=   271.7804     FROM MIGRAD    STATUS=CONVERGED     56 CALLS       57 TOTAL
                      EDM=  0.26E-04    STRATEGY= 1      ERROR MATRIX ACCURATE

   EXT PARAMETER                                   STEP         FIRST
   NO.   NAME        VALUE          ERROR          SIZE      DERIVATIVE
    1   Constant     151.91        2.1465        1.0634      -0.27620E-02
    2   Mean       -0.72353E-02   0.13767E-01   0.80668E-02   0.76994E-01
    3   Sigma        1.1178       0.88523E-02   0.43773E-02  -0.93417

  CHISQUARE = 0.2802E+01  NPFIT =   100
 </pre></font>
 In this output several values are given.
 The meaning of these various parameters is:
 <UL>

 <P><LI> <FONT COLOR="#993300"><TT>FROM</TT></FONT> is the name of the
 subroutine
 (here <tt>MIGRAD</tt>) or the last command which found the current minimum or
 other current values like the error matrix, but does not always have the
 meaning the user wants.

 <P><LI> <FONT COLOR="#993300"><TT>EDM</TT></FONT> is the most important
 quantity, and is usually meaningful: it is the <I>estimated distance to
 minimum</I> in function value (chisquare or likelihood), so it is the expected
 improvement that can still be made in F. After a good fit, it should be very
 small, like 10E-5 or smaller. If it is 10E-2 or 10E-3, that is a little
 suspicious. If it is bigger than one, the fit didn't converge completely.
 If it is bigger than 100, the fit is completely meaningless.

 <P><LI> <FONT COLOR="#993300"><TT>FCN</TT></FONT> is the generic name given
 to the user-written subroutine called from
 <b>Minuit</b> which calculates the value of the function to be minimised
 (generic name F) as a function of the user-defined parameters
 (generic name X).
 When <b>Minuit</b> is under the control of <b>PAW</b>, the "user", from
 <b>Minuit</b>'s point of view, is <b>PAW</b>, so the FCN is actually
 supplied by <b>PAW</b>. We speak of
 "generic names"  FCN, F and X because the actual names can be chosen by
 the user.  This allows the user to minimise several different functions in
 one job, and <b>PAW</b> uses this feature in order to be able to perform
 different fits (Gaussian, polynomial, etc.) in the same execution.

 <P><LI> <FONT COLOR="#993300"><TT>STATUS</TT></FONT> is a character variable
 inside <b>Minuit</b> which is set after every
 major calculation (minimization, error calculation, contour plot, etc.)
 giving the status or reason for termination of the calculation.  The
 values are supposed to have obvious meanings. They can be, for example,
 "<tt>SUCCESSFUL</tt>", "<tt>CONVERGED</tt>", "<tt>FAILED</tt>", or
 "<tt>NON POS-DEF</tt>" (meaning the
 covariance matrix is not positive-definite, an abnormal condition).

 <P><LI> <FONT COLOR="#993300"><TT>CALLS</TT></FONT> and
 <FONT COLOR="#993300"><TT>TOTAL</TT></FONT> give, respectively, the number
 of times <FONT COLOR="#993300"><TT>FCN</TT></FONT> has been
 called by <b>Minuit</b> since the last command was executed, and the total
 number of calls since the beginning of the "run"
 (the last time <b>Minuit</b> itself was called or re-initialised).

 <P><LI> <FONT COLOR="#993300"><TT>STRATEGY</TT></FONT> is the current value
 of a variable which helps <b>Minuit</b> to decide
 what strategy to use. The default value is 1, and different values can be
 set or seen with the <tt>SET STRAT</tt> and <tt>SHO STRAT</tt> commands.
 The meanings are
 explained in the
 <a href="http://wwwinfo.cern.ch/asdoc/minuit/minmain.html"><b>Minuit</b>
 write-up</a>.  Generally, a smaller value (0)
 means it
 skips or simplifies certain calculations in order to gain speed, and a
 higher value (2) is supposed to give greater reliability and less speed.

 <P><LI> <FONT COLOR="#993300"><TT>ERROR MATRIX</TT></FONT>
 is the inverse of the covariance matrix and it is the
 matrix that is used to calculate the error on any quantity that can be
 expressed as a function of the basic parameters of the problem, using the
 well-known formulas known as "propagation of errors".  The diagonal
 elements of the error matrix are the variances (squares of the standard
 deviations) of the corresponding parameters, and the off-diagonal elements
 indicate the degree of correlation, positive or negative, between the
 corresponding pair of parameters.  The matrix must be symmetric, so it is
 customary to print only the diagonal and one-half the off-diagonal
 elements.  At a proper minimum, the error matrix should also be
 positive-definite, since that is the condition that the function increases
 in all directions with a positive second derivative.  <b>Minuit</b>
 calculates or
 estimates the error matrix in several different ways, and indicates when
 appropriate the accuracy with which it believes it is currently known.

 <P><LI> <FONT COLOR="#993300"><TT>CHISQUARE</TT></FONT>
 is the statistical name of the quantity most commonly
 calculated by <FONT COLOR="#993300"><TT>FCN</TT></FONT> and minimised by
 <b>Minuit</b>.  The other most popular
 quantity is the Likelihood (or more exactly, the negative log likelihood,
 since <tt>-2 ln L</tt> behaves asymptotically like a chisquare).
 Chisquare (chi2) is the
 normalized sum of squared deviations between data and a parametrised model
 of which it is desired to find the best values of the parameters.  The sum
 is usually over histogram bins, and the normalisation is attained by
 dividing each squared deviation by the square of its standard deviation.
 <P>
 <b>WARNING:</b> The Chi2 value printed here is in fact not the real Chi2 but
 is <FONT COLOR="#993300"><TT>chi2/NDF</TT></FONT>
 where <FONT COLOR="#993300"><TT>NDF</TT></FONT> is:

 <FONT COLOR="#993300"><pre>
 (NBins - NPar) = [number of bins in histogram] - [number of free parameters in the fit]
 </pre></FONT>

 The graphical display of a fit result with
 <FONT COLOR="#993300"><tt>OPTION FIT</tt></FONT> on, gives a correct label.
 For backward compatibility reasons it is difficult to change the labelling
 produced by the <FONT COLOR="#993300"><tt>HI/FIT</tt></FONT> printout, because
 it may break some applications reading this printout.

 <P><LI> <FONT COLOR="#993300"><TT>STEP SIZE</TT></FONT>
 is the size of the last step taken in the previous
 minimization or derivative calculation. Before any calculations, it is
 set equal to the starting step size specified by the user. It is not
 usually of interest, but it can indicate when <b>Minuit</b> is getting lost,
 if some step sizes become either zero (within rounding error) or enormous.

 <P><LI> <FONT COLOR="#993300"><TT>FIRST DERIVATIVE</TT></FONT> is even less
 interesting in most cases.  It is
 printed because most traditional minimisers stupidly use the size of the
 first derivatives as a convergence criterion.  Traditional programs do
 this because the first derivatives should all be zero at the minimum, but
 the condition is stupid because the first derivatives are not
 scale-invariant, so there is no way to know "how close to zero" they have to
 be. Sometimes 1 is close to zero, and sometimes 10^-10 is far from zero.
 That is why <b>Minuit</b> uses instead the
 <FONT COLOR="#993300"><TT>EDM</TT></FONT> (estimated distance to minimum),
 which is an invariant and is a reliable quantity to judge convergence.
 And that is why <b>Minuit</b> is the only minimiser in the world that (usually)
 knows when it has converged.

 <P><LI> <FONT COLOR="#993300"><TT>ERROR</TT></FONT>  see
 <FONT COLOR="#993300"><TT>ERROR MATRIX</TT></FONT>
 </UL>
<HR SIZE=6><h1>H/PLOT option '+' with multiple zones and related points ...
</h1>As explain in the
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:PLOT">online help</a>
  in case of multiple zones the option K
 should be used.
 <br>
 Example:
 <p>
 With one Zone you can do:
 <FONT COLOR="#993300"><pre>
       PAW > H/PL 10
       PAW > H/PL 11 +
 </pre></font>

 but with several zones one should do:

 <FONT COLOR="#993300"><Pre>
       PAW > ZONE 2 2
       PAW > H/PL 10 K
       PAW > H/PL 11 +
 </pre></font>
 As an example, the macro:
 <FONT COLOR="#993300"><pre>
       set * ; opt * ; h/del *
       zone 2 2
       v/create x(10) r 1 2 3 4 5 5 4 3 2 1
       v/create y(10) r 5 4 3 2 1 1 2 3 4 5
       v/draw x 1 ;  v/draw y 2
       set htyp 245
       h/pl 1 k   ;  set htyp 254 ; h/pl 2 +
       h/pl 2 k   ;  set htyp 245 ; h/pl 1 +
 </pre></font>
 produce:
 <center><img src="plus1.gif"></center>
 <p>
 A given histogram can be kept only once per page. If
 you keep the same histograms several time the first one is retain.
 You can see this effect by keeping twice the histogram 1 in the
 previous example:
 <FONT COLOR="#993300"><pre>
       set * ; opt * ; h/del *
       zone 2 2
       v/create x(10) r 1 2 3 4 5 5 4 3 2 1
       v/create y(10) r 5 4 3 2 1 1 2 3 4 5
       v/draw x 1 ;  v/draw y 2
       set htyp 245
       h/pl 1 k   ;  set htyp 254 ; h/pl 2 +
       h/pl 1 k   ;  set htyp 245 ; h/pl 1 +
 </pre></font>

 The output is now:

 <center><img src="plus2.gif"></center>
<HR SIZE=6><h1>What is wrong with integer vectors ?
</h1>Vectors created with the command:
 <tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/VECTOR.html#V:CREATE">VECTOR/CREATE</a></tt>
 may have the type <b>R</b>eal or <b>I</b>nteger.
 Unless it is absolutely necessary only type REAL should be used.
 Commands like
 <tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:GRAPH">GRAPH</a></tt>
 accept only REAL.
<HR SIZE=6><h1>UWFUNC COMMON blocks description.
</h1>The command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:UWFUNC">
 <FONT COLOR="#993300"><TT>UWFUNC</TT></FONT></a>
 generates a function which reflect the structure of an NTUPLE
 into COMMON Blocks.
 <p>
 In addition to these "Ntuple COMMON blocks" some other COMMON
 block variables are also available. Namely:

 <FONT COLOR="#993300"><pre>
       COMMON /PAWIDN/ IDNEVT,OBS
       COMMON /PAWCHN/ CHAIN, NCHEVT, ICHEVT
       COMMON /PAWCHC/ CFILE
 </pre></font>

 The meaning of these variables is the following:
 <UL>
 <LI><FONT COLOR="#993300"><TT>IDNEVT</TT></FONT>: is the current event
      number. If the ntuple used is in a
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:CHAIN">
 chain</a>, it goes from 1 to the
      total number of events in the chain.
 <LI><FONT COLOR="#993300"><TT>OBS</TT></FONT>: obsolete. Kept for
     backward compatibility.
 <LI><FONT COLOR="#993300"><TT>CHAIN</TT></FONT>: is a logical variable
     which is <FONT COLOR="#993300"><TT>.TRUE.</TT></FONT> if the ntuple
     used is in a chain.
 <LI><FONT COLOR="#993300"><TT>NCHEVT</TT></FONT>: is the total number
     of events in the chain if the ntuple used is in a chain, 0 otherwise.
 <LI><FONT COLOR="#993300"><TT>ICHEVT</TT></FONT>: is the current event
      number in the current file scanned if the ntuple used is in a chain.
 <LI><FONT COLOR="#993300"><TT>CFILE</TT></FONT>: is the name of the
     current file scanned if the ntuple used is in a chain.
 </UL>
<HR SIZE=6><h1>How to attach all the HBOOK files in the current directory ? (UNIX only)
</h1>The small following macro perform this task:
 <FONT COLOR="#993300"><pre>
 shell 'ls  *.hbook | sed -e ''s/^/h\/file 0 /'' > junk.kumac'
 exe junk
 shell rm junk.kumac
 </pre></font>
<HR SIZE=6><h1> HFITHN and HFITGA ..
</h1>The original question was:
 <p>
 <em>
  I used both HFITHN and HFITGA routines to fit a Gaussian,
  for instance:
 <FONT COLOR="#993300"><pre>
  CALL HFITHN(1017,'G',' ',3,PAR,STEP,PMIN,PMAX,SIGPAR,CHI2)

  CALL HFITGA(1017,C,AV,SD,CHI2,IC,SIG)
 </pre></font>
  I didn't obtain the same result. Why, I guess these two calls
  are equivalent, aren't they ?
 </em>
 <center><hr width=20%></center>
 <br> The
 <FONT COLOR="#993300"><tt>HI/FIT</tt></font>
 command with the option
 <FONT COLOR="#993300"><tt>G</tt></font> uses
 <FONT COLOR="#993300"><tt>HFITGA</tt></font>
 so it is not surprising that we get the same result in <b>PAW</b> and
 with
 <FONT COLOR="#993300"><tt>HFITGA</tt></font>.
 The
 <FONT COLOR="#993300"><tt>HFITHN</tt></font> routine is supposed to be able to handle simple
 formulae like
 <FONT COLOR="#993300"><tt>G+P</tt></font>
 or
 <FONT COLOR="#993300"><tt>E*G-P</tt></font>, like the
 <FONT COLOR="#993300"><tt>H/FIT</tt></font> command.
 But in that
 case the code used is not the same. In particular in the case of
 <FONT COLOR="#993300"><tt>HFITHN</tt></font>, a
 protection is made in case the 3rd parameter of a Gaussian is 0 (to avoid
 a division by zero) in this particular case the value of this parameter is
 set to 1.
 <p>
 To avoid the problem encountered here, the initial values of the
 parameters should not be equal to zero. For example, do something like:
 <FONT COLOR="#993300"><pre>
       dimension par(3),step(3),pmin(3),pmax(3)
       par(1) = 1.
       par(2) = 1.
       par(3) = 1.
       CALL HFITHN(10,'G',' ',3,PAR,STEP,PMIN,PMAX,SIGPAR,CHI2)
 </pre></font>
 and <FONT COLOR="#993300"><tt>HFITHN</tt></font>
 will give the same result as
 <FONT COLOR="#993300"><tt>HFITGA</tt></font>.
<HR SIZE=6><h1>How to group two Column Wise Ntuple (CWN) ?
</h1> The following example shows how from two CWN with the variables
 <b>A,B,C</b> and <b>D,E,F</b>, you can create a third one with the variables
 <b>A,B,C,D,E,F</b>. This is a kind of "merging per column".

 <FONT COLOR="#993300"><pre>
       Program Group_Ntuple
 *
       Parameter (Nhmax = 100000)
       Common /Pawc/ Hmemor(Nhmax)
       Common /P/   A,B,C,D,E,F
 *
       Call Hlimit(Nhmax)
 *--------------------------------------------------
 *      Create and fill the Ntuple 1
 *
       Call Hropen(10,'P1','p1.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(1,'Test','D')
       Call Hbname(1,'P1',A,'A,B,C')
 *
       Do I=1,10
          A = Float(I)
          B = Float(10*I)
          C = Float(100*I)
          Call Hfnt(1)
       EndDo
 *
       Call Hrout(0,IC,'')
       Call Hrend('P1')
       Close(10)
 *--------------------------------------------------
 *      Create and fill the Ntuple 2
 *
       Call Hropen(10,'P2','p2.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(2,'Test','D')
       Call Hbname(2,'P2',D,'D,E,F')
 *
       Do I=1,10
          D = Float(1000*I)
          E = Float(10000*I)
          F = Float(100000*I)
          Call Hfnt(2)
       EndDo
 *
       Call Hrout(0,IC,'')
       Call Hrend('P2')
       Close(10)
 *--------------------------------------------------
 *      Reset the common block
 *
       Do I=1,10
          A = 0.
          B = 0.
          C = 0.
          D = 0.
          E = 0.
          F = 0.
       EndDo
 *--------------------------------------------------
 *      Create and fill the Ntuple 3 from
 *      ntuples 1 and 2
 *
       Call Hropen(30,'P3','p3.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(3,'Test','D')
       Call Hbname(3,'P3',A,'A,B,C,D,E,F')
 *
       Call Hropen(10,'P1','p1.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (1,9999,0)
       Call Hbname (1,' ',0,'$CLEAR')
       Call Hbname (1,'P1',A,'$SET')
       Call Hnoent (1,Noent1)
 *
       Call Hropen(20,'P2','p2.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (2,9999,0)
       Call Hbname (2,' ',0,'$CLEAR')
       Call Hbname (2,'P2',D,'$SET')
       Call Hnoent (2,Noent2)
 *
       Noent = Min(Noent1,Noent2)
 *
       Do I=1,Noent
         Call Hcdir('//P1',' ')
         Call Hgnt(1,I,Ierr)
         Call Hcdir('//P2',' ')
         Call Hgnt(2,I,Ierr)
         Call Hcdir('//P3',' ')
         Call Hfnt(3)
       EndDo
 *
       Call Hrout(3,IC,'')
       Call Hrend('P1')
       Call Hrend('P2')
       Call Hrend('P3')
       Close(10)
       Close(20)
       Close(30)
 *
       End
 </pre></font>
 <P>
 The scanning of the ntuple 1 in <b>PAW++</b> gives:
 <P>
 <center><img src="group1.gif"></center>
 <P>
 The scanning of the ntuple 2 in <b>PAW++</b> gives:
 <P>
 <center><img src="group2.gif"></center>
 <P>
 The scanning of the ntuple 3 in <b>PAW++</b> gives:
 <P>
 <center><img src="group3.gif"></center>
<HR SIZE=6><h1>How to transfer a HBOOK file from a machine to an other ?
</h1>Normally a "binary ftp" is enough.
 <p>
 It is also possible to transfer it in alphanumeric mode
 from a machine <b>A</b> to a machine <b>B</b> as follow:
 <p>

 On machine <b>A</b> do:

 <FONT COLOR="#993300"><pre>
 PAW > hi/file 1 myfile.hbook
 PAW > toa myfile.alf
 </pre></font>

 transfer "myfile.alf" to machine <b>B</b>. And on machine <b>B</b> do:

 <FONT COLOR="#993300"><pre>
 PAW > hi/file 1 myfile.hbook ! N
 PAW > fra myfile.alf
 </pre></font>
<HR SIZE=6><h1>How to merge several Column Wise Ntuple (CWN) with some selection ?
</h1>The following macro gives a solution:
 <PRE><FONT COLOR="#3333FF">Macro CWN_Merge
 </FONT><B><FONT COLOR="#000099">*
 * Close all the open files
 *
 </FONT></B><FONT COLOR="#3333FF">Close 0
 </FONT><B><FONT COLOR="#000099">*
 * Define the lists of file
 *
 </FONT></B><I><FONT COLOR="#006600">Nb       = ...           | Number of files
 name1    = ...
 name2    = ...
 name3    = ...
      .
      .
      .
 name[nb] = ...
 </FONT></I><B><FONT COLOR="#000099">*
 * Define the selection function
 *
 </FONT></B><I><FONT COLOR="#006600">IdN1 = ...                | Ntuple identifier in the input file
 IdN2 = ...                | Ntuple identifier in the output file
 </FONT></I><FONT COLOR="#3333FF">H/file 1 [name1]
 hrin [IdN1]
 Uwfunc [IdN1] source.inc
 Application COMIS quit
       Subroutine ntdup(Id1,Id2)
       Include 'source.inc'
       Call Hnoent(Id1,Noent)
       Noent = min(Noent,100)
       Do Ievent=1,Noent
          Call Hgnt(Id1,Ievent,Ierr)
          If (Ierr.ne.0) Goto 20
          </FONT><FONT COLOR="#FF0000">If ( ... )</FONT><FONT COLOR="#3333FF"> Call Hfnt(Id2)
       Enddo
       Return
  20   write(*,*)'error ',ierr,'in ',ievent
       End
 Quit
 close 1
 </FONT><B><FONT COLOR="#000099">*
 * Create the files with selection
 *
 </FONT></B><FONT COLOR="#3333FF">FilesChain = ' '
 Do i=1,[Nb]
    H/file 1 [name[i]]
    hrin [IdN1]
    NewFile = new[i].hbook
    H/file 2 [NewFile] ! N
    Nt/Dup //lun1/[IdN1] [IdN2]
    Call Ntdup([IdN1],[IdN2])
    Hrout [IdN2]
    close 1
    close 2
    FilesChain = [FilesChain]//' '//[NewFile]
 Enddo
 </FONT><B><FONT COLOR="#000099">*
 * Merge all the new files in only one
 *
 </FONT></B><FONT COLOR="#3333FF">Hmerge new.hbook $UNQUOTE([FilesChain])</FONT></PRE>
 <b>Note:</b> Take care that the local variables used in the <b>COMIS</b>
 routine are different from the field names in the Ntuple.

<HR SIZE=6><h1>How to read two Column Wise Ntuples (CWN) simultaneously ?
</h1>Here is explained how to do this in a batch program and interactively
 in <b>PAW</b>. The following batch program creates two simple ntuples (CWN)
 containing 3 real variables each and save them in two separated <b>HBOOK</b>
 files. Then it closes the ntuples files, reopen
 them and scan the two ntuples simultaneously in a single loop.

 <FONT COLOR="#993300"><pre>
       Program Read_Two_Ntuples
 *
       Parameter (Nhmax = 100000)
       Common /Pawc/ Hmemor(Nhmax)
       Common /P1/   A,B,C
       Common /P2/   D,E,F
 *
       Call Hlimit(Nhmax)
 *--------------------------------------------------
 *      Create and fill the Ntuple 1
 *
       Call Hropen(10,'P1','p1.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(1,'Test','D')
       Call Hbname(1,'P1',A,'A,B,C')
 *
       Do I=1,10
          A = Float(I)
          B = Float(10*I)
          C = Float(100*I)
          Call Hfnt(1)
       EndDo
 *
       Call Hrout(0,IC,'')
       Call Hrend('P1')
       Close(10)
 *--------------------------------------------------
 *      Create and fill the Ntuple 2
 *
       Call Hropen(10,'P2','p2.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(2,'Test','D')
       Call Hbname(2,'P2',D,'D,E,F')
 *
       Do I=1,100
          D = Float(1000*I)
          E = Float(10000*I)
          F = Float(100000*I)
          Call Hfnt(2)
       EndDo
 *
       Call Hrout(0,IC,'')
       Call Hrend('P2')
       Close(10)
 *--------------------------------------------------
 *      Reset the common blocks
 *
       Do I=1,10
          A = 0.
          B = 0.
          C = 0.
          D = 0.
          E = 0.
          F = 0.
       EndDo
 *--------------------------------------------------
 *      Read the two Ntuples in two loops.
 *
       Call Hropen(10,'P1','p1.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (1,9999,0)
       Call Hbname (1,' ',0,'$CLEAR')
       Call Hbname (1,'P1',A,'$SET')
       Call Hnoent (1,Noent1)
 *
       Call Hropen(20,'P2','p2.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (2,9999,0)
       Call Hbname (2,' ',0,'$CLEAR')
       Call Hbname (2,'P2',D,'$SET')
       Call Hnoent (2,Noent2)
 *
       Do I=1,Noent1
         Call Hcdir('//P1',' ')
         Call Hgnt(1,I,Ierr)
         print*, 'Ntuple 1: I = ',I,' A = ',A,' B = ',B,' C = ', C
         JStart = (I-1)*10+1
         JEnd   = JStart+9
         Do J=JStart,JEnd
           Call Hcdir('//P2',' ')
           Call Hgnt(2,I,Ierr)
           print*, '   Ntuple 2: J = ',J,' D = ',D,' E = ',E,' F = ', F
         EndDo
       EndDo
 *
       Call Hrend('P1')
       Call Hrend('P2')
       Close(10)
       Close(20)
 *
       End
 </pre></font>
 It is also possible, and in fact even simpler, to perform the same thing on
 ntuples sitting in the same <b>HBOOK</B> file. The program in that case looks
 the following:
 <FONT COLOR="#993300"><pre>
       Program Read_Two_Ntuples
 *
       Parameter (Nhmax = 100000)
       Common /Pawc/ Hmemor(Nhmax)
       Common /P1/   A,B,C
       Common /P2/   D,E,F
 *
       Call Hlimit(Nhmax)
 *--------------------------------------------------
 *      Create and fill the Ntuple 1
 *
       Call Hropen(10,'NTUPLES','ntuples.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(1,'Test','D')
       Call Hbname(1,'P1',A,'A,B,C')
 *
       Do I=1,10
          A = Float(I)
          B = Float(10*I)
          C = Float(100*I)
          Call Hfnt(1)
       EndDo
 *--------------------------------------------------
 *      Create and fill the Ntuple 2
 *
       Call Hbnt(2,'Test','D')
       Call Hbname(2,'P2',D,'D,E,F')
 *
       Do I=1,100
          D = Float(1000*I)
          E = Float(10000*I)
          F = Float(100000*I)
          Call Hfnt(2)
       EndDo
 *
       Call Hrout(0,IC,'')
       Call Hrend('NTUPLES')
       Close(10)
 *--------------------------------------------------
 *      Reset the common blocks
 *
       Do I=1,10
          A = 0.
          B = 0.
          C = 0.
          D = 0.
          E = 0.
          F = 0.
       EndDo
 *--------------------------------------------------
 *      Read the two Ntuples in two loops.
 *
       Call Hropen(10,'NTUPLES','ntuples.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (1,9999,0)
       Call Hbname (1,' ',0,'$CLEAR')
       Call Hbname (1,'P1',A,'$SET')
       Call Hnoent (1,Noent1)
 *
       Call Hrin   (2,9999,0)
       Call Hbname (2,' ',0,'$CLEAR')
       Call Hbname (2,'P2',D,'$SET')
       Call Hnoent (2,Noent2)
 *
       Do I=1,Noent1
         Call Hgnt(1,I,Ierr)
         print*, 'Ntuple 1: I = ',I,' A = ',A,' B = ',B,' C = ', C
         JStart = (I-1)*10+1
         JEnd   = JStart+9
         Do J=JStart,JEnd
           Call Hgnt(2,I,Ierr)
           print*, '   Ntuple 2: J = ',J,' D = ',D,' E = ',E,' F = ', F
         EndDo
       EndDo
 *
       Call Hrend('NTUPLES')
       Close(10)
 *
       End
 </pre></font>
 To read two CW-Ntuples simultaneously in <b>PAW</b> the simplest is to do the
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:LOOP"><tt>NT/LOOP</tt></a>
 command on the first ntuple and to load, as in the batch program, the
 other ntuple within the
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:UWFUNC"><tt>UWFUNC</tt></a>
 generated function. After having done:
 <FONT COLOR="#993300"><pre>
 PAW > hi/file 1 p1.hbook
 PAW > uwfunc 1 r1.f
 PAW > hi/file 2 p2.hbook
 PAW > uwfunc 2 r2.f </pre></font>
 You should modify the function <FONT COLOR="#993300"><tt>r1.f</tt></font> taking the common block
 declaration of the ntuple 2 in <FONT COLOR="#993300"><tt>r2.f</tt></font>.
 The modified <FONT COLOR="#993300"><tt>r1.f</tt></font> is (added code in red):
 <FONT COLOR="#993300"><pre>
     REAL FUNCTION r1()
 *********************************************************
 *                                                       *
 * This file was generated by HUWFUN.                    *
 *                                                       *
 *********************************************************
 *
 *     Ntuple Id:      1
 *     Ntuple Title:   Test
 *     Creation:       26/07/1999 11.23.40
 *
 *********************************************************
 *
       LOGICAL         CHAIN
       CHARACTER*128   CFILE
       INTEGER         IDNEVT,NCHEVT,ICHEVT
       REAL            OBS(13)
 *
       COMMON /PAWIDN/ IDNEVT,OBS
       COMMON /PAWCHN/ CHAIN, NCHEVT, ICHEVT
       COMMON /PAWCHC/ CFILE
 *
 *--   Ntuple Variable Declarations
 *
       REAL A,B,C
 *
       COMMON /PAWCR4/ A,B,C
 * <FONT COLOR="#FF3300">
       REAL D,E,F
 *
       COMMON /NT2/ D,E,F
 *
       if (idnevt.eq.1) then
          Call Hbname (2,' ',0,'$CLEAR')
          Call Hbname (2,'P2',D,'$SET')
          Call Hnoent (2,Noent2)
       Endif
 *
       print*, 'Ntuple 1: A = ',A,' B = ',B,' C = ', C
       Call Hcdir('//LUN2',' ')
       Call Hgnt(2,idnevt,Ierr)
       print*, 'Ntuple 2: D = ',D,' E = ',E,' F = ', F
 </font>
 *
       END
 </pre></font>
 Having this function it is enough to do:
 <FONT COLOR="#993300"><pre>
 PAW > hrin 2
 PAW > cd //lun1
 PAW > nt/loop 1 r1.f
 </pre></font>
 which produces:
 <FONT COLOR="#993300"><pre>
 Ntuple 1: A =   1.000000     B =   10.00000     C =   100.0000
 Ntuple 2: D =   1000.000     E =   10000.00     F =   100000.0
 Ntuple 1: A =   2.000000     B =   20.00000     C =   200.0000
 Ntuple 2: D =   2000.000     E =   20000.00     F =   200000.0
 Ntuple 1: A =   3.000000     B =   30.00000     C =   300.0000
 Ntuple 2: D =   3000.000     E =   30000.00     F =   300000.0
 Ntuple 1: A =   4.000000     B =   40.00000     C =   400.0000
 Ntuple 2: D =   4000.000     E =   40000.00     F =   400000.0
 Ntuple 1: A =   5.000000     B =   50.00000     C =   500.0000
 Ntuple 2: D =   5000.000     E =   50000.00     F =   500000.0
 Ntuple 1: A =   6.000000     B =   60.00000     C =   600.0000
 Ntuple 2: D =   6000.000     E =   60000.00     F =   600000.0
 Ntuple 1: A =   7.000000     B =   70.00000     C =   700.0000
 Ntuple 2: D =   7000.000     E =   70000.00     F =   700000.0
 Ntuple 1: A =   8.000000     B =   80.00000     C =   800.0000
 Ntuple 2: D =   8000.000     E =   80000.00     F =   800000.0
 Ntuple 1: A =   9.000000     B =   90.00000     C =   900.0000
 Ntuple 2: D =   9000.000     E =   90000.00     F =   900000.0
 Ntuple 1: A =   10.00000     B =   100.0000     C =   1000.000
 Ntuple 2: D =   10000.00     E =   100000.0     F =   1000000.
 </pre></font>
<HR SIZE=6><h1>"Wrong number of arguments" in ntuple commands using COMIS functions (Since version 2.07)
</h1> The original question was:
 <p>
 <hr width="20%">
 <em>
 Since the PAW version 2.07/22,     the command
 <FONT COLOR="#993300"><pre>
          NTUPLE/PLOT 30.X SELECT.FOR
 </pre></font>
      which worked fine with previous versions of <b>PAW</b>. Now gives the
      error message:
 <FONT COLOR="#993300"><pre>
          /NTUPLE/PLOT: Wrong number of arguments for 'SELECT.FOR' (expect 1)
 </pre></font>
 <hr width="20%">
 <p>
 </em>
  Since the version 2.07/22 of <b>PAW</b>, the ntuple query processor does
  more error checking. Here,
  <FONT COLOR="#993300"><tt>SELECT.FOR</tt></font>
  is called without arguments but it requires one. There
  is two solutions:
 <ol>
  <li> Do:
 <FONT COLOR="#993300"><pre>
         NTUPLE/PLOT 30.X SELECT.FOR(1.)
 </pre></font>
  <li> Remove the input parameter (very likely called XDUMMY) in
 <FONT COLOR="#993300"><tt>SELECT.FOR</tt></font>
 </ol>
 <p>
 Since <b>PAW</b> version
 <a href="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20814">2.08/14</a>
 the command
 <FONT COLOR="#993300"><tt>UWFUNC</tt></font>
 generates the functions without parameters. The <b>PAW</b> user should decides how
 many he wants (max 10).
 <p>
 More informations on the ntuple query processor are available
 <a href="http://wwwinfo.cern.ch/asd/paw/qp.html">here</a>.
<HR SIZE=6><h1>How to list histograms with limits on the IDs ?
</h1>The
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:LIST">
 <FONT COLOR="#993300"><tt>HISTO/LIST</tt></font></a>
 command doesn't provide this facility.
 The following macro can be use instead:

 <FONT COLOR="#993300"><pre>
 Macro hl
 Output_lp 66 junk
 H/Li s
 Output_lp -66
 Appl comis Quit
       Subroutine hlist(Id1,Id2)
       Character*80 Chline
       Open(UNIT=66,FILE='junk',FORM='FORMATTED',STATUS='OLD')
  20   Read (66,10,end=999) Chline
  10   Format(A)
       Read (Chline,'(I12)',Err=20) I
       If (I.Ge.Id1.and.I.Le.Id2) Then
          J = lenocc(Chline)
          Print*, Chline(1:J)
       Endif
       Goto 20
  999  Close(66)
       End
 Quit
 call hlist([1],[2])
 shell rm junk      | Unix only
 return
 </pre></font>

 Just do:

 <FONT COLOR="#993300"><pre>
 Exec hl 10 20
 </pre></font>

 and only the histograms with IDs between 10 and 20 will be listed.
<HR SIZE=6><h1>Axis labelling optimisation in logarithmic scales.
</h1>The axis labelling optimisation is controlled with
 the commands <FONT COLOR="#993300"><TT>SET NDVX</tt></font>, for the
 X axis, and <FONT COLOR="#993300"><TT>SET NDVY</tt></font>
 for the Y axis.
 In linear scales these commands allow to control very precisely
 the number of tick marks. <b>In logarithmic scales only the number of decades can be
 changed</b>.
 <p>
 Example:
 <FONT COLOR="#993300"><pre>
                  PAW > opt logy
                  PAW > nul 1 2 1 1000000
 </pre></font>
 gives:
 <center>
 <img src="ndvylog1.gif">
 </center>
 <FONT COLOR="#993300"><pre>
                  PAW > opt logy
                  PAW > set ndvy 3
                  PAW > nul 1 2 1 1000000
 </pre></font>
 gives:
 <center>
 <img src="ndvylog2.gif">
 </center>
<HR SIZE=6><h1>Histogram hatch style in a PostScript file?
</h1>The original question is:
 <P>
 <cite>I draw a histogram as follows:
 <FONT COLOR="#993300"><pre>
   set hcol 4
   set htyp -4
   h/pl 100
 </pre></font>
 On my terminal screen I can see a blue graph with blue hatching
 as expected, but if I open a PostScript output file
 the histogram is not hatched (I am looking at the PS file with
 <code>ghostview</code>). Why?
 </cite>
 <P>
 </h1>The -4 hatching type is not supported on PS. Try instead:
 <FONT COLOR="#993300"><pre>
   set htyp 254
 </pre></font>
<HR SIZE=6><h1>In Paw++ what is causing the messages "unknown keysym osfDown..." ?
</h1>There is an OSF supplied addition to the
 /usr/lib/X11/XKeysymDB file.
 It is found on the release tape and should have been
 automatically installed. If not, you have to copy (or
 append) lib/Xm/XKeysymDB into /usr/lib/X11.  This may
 require root permission. If X has been built so that
 XKeysymDB is not in this directory, run
 'strings libX11.a | grep XKeysymDB' the exact path.
<p>
 On a Sun running openwin with shared libraries, you may
 need to put the path for the library containing XKeysymDB
 *first* in the path list in LD_LIBRARY_PATH, or it may find
 the wrong XKeysymDB in the wrong directory.
<p>

 N.B. XKeysymDB simply contains the registered keysym
 values for the OSF keysyms. The OSF values are
 server-independent.  And, all registered keysyms will be
 included in an XKeysymDB file to be shipped with X11R5.
 In the meantime (till all systems are X11R5+), a list
 of the registered keysyms can be found in the X11R4
 release in mit/doc/Registry/Xregistry.
<HR SIZE=6><h1> How to redraw the axis of current zone when they have been erased by some extra drawing ?
</h1>The following macro do the job:

 <FONT COLOR="#993300"><pre>
    Macro Redraw-Axis
    X1 = $GRAFINFO('WNXMIN')
    X2 = $GRAFINFO('WNXMAX')
    Y1 = $GRAFINFO('WNYMIN')
    Y2 = $GRAFINFO('WNYMAX')
    IS = $GRAFINFO('?FAIS')
    IC = $GRAFINFO('?FACI')
    Set FAIS 0 ; Set FACI 1
    Box [X1] [X2] [Y1] [Y2]
    Set FAIS [IS] ; Set FACI [IC]
    Tick XL [X1] !
    Tick YB ! [Y1]
    Return
 </pre></font>

 just do:

 <FONT COLOR="#993300"><pre>
       PAW > Exe Redraw-Axis
 </pre></font>

 and the axis of the current zone will be refreshed.
<HR SIZE=6><h1>How to retrieve the bin which contains the maximum value of a 1D histogram ?
</h1>Just use the following function (copy/paste it in
 <tt><font COLOR="#993300">maxbin.f</tt></font>):
 <font COLOR="#993300"><pre>
       function maxbin(id)
       character*80 chtitl
       call hgive(id,chtitl,nx,xmin,xmax,ny,ymin,ymax,nwt,idb)
       w = hi(id,1)
       maxbin = 1
       do i=2,nx
          w2 = hi(id,i)
          if (w2.gt.w) then
             w = w2
             maxbin = i
          endif
       enddo
       end
 </pre></font>

 One way to access it, is:

 <font COLOR="#993300"><pre>
 PAW >  message $ICALL('maxbin.f(110)')
 </pre></font>
<HR SIZE=6><h1>How to access the current status of minimization after a fit operation ?
</h1>The <b>MINUIT</b> routine <FONT COLOR="#993300"><tt>MNSTAT</tt></font>
 provides the user with information concerning the current status
 of the current minimization. Namely, it returns:

 <ul>
 <li> <b>FMIN</b>: the best function value found so far
 <li> <b>FEDM</b>: the estimated vertical distance remaining to minimum
 <li> <b>ERRDEF</b>: the value of UP defining parameter uncertainties
 <li> <b>NPARI</b>: the number of currently variable parameters
 <li> <b>NPARX</b>: the highest (external) parameter number defined by user
 <li> <b>ISTAT</b>: a status integer indicating how good is the covariance
        matrix:
 <ul>
        <li> <b>0</b>= not calculated at all
        <li> <b>1</b>= approximation only, not accurate
        <li> <b>2</b>= full matrix, but forced positive-definite
        <li> <b>3</b>= full accurate covariance matrix
 </ul>
 </ul>

 Since <b>PAW</b> version <b>2.10/04</b>,
 <FONT COLOR="#993300"><tt>MNSTAT</tt></font> can be accessed
 in a <b>PAW</b> macro via a <b>COMIS</b> routine.
 The following example shows how to proceed:

 <FONT COLOR="#993300"><pre>
   Macro Mnstat
   Histo/fit 110(50:) G
   Application COMIS Quit
         Subroutine Get_Stat
         Vector Stat(6)
         Call Mnstat(Fmin,Fedm,Errdef,Npari,Nparx,Istat)
         Stat(1) = Fmin
         Stat(2) = Fedm
         Stat(3) = Errdef
         Stat(4) = Npari
         Stat(5) = Nparx
         Stat(6) = Istat
         End
   Quit
   Call Get_Stat
   Vector/Print Stat
   Return
 </pre></font>
<HR SIZE=6><h1> How to plot a 2-dim histogram with projections, with the Y-projection rotated by 90 degrees ?
</h1> The macro <FONT COLOR="#993300"><TT>proxy</TT></FONT> given in this page can be used.
 <p>
 Example:
 <FONT COLOR="#993300"><PRE>
 fun2 2 abs(sin(x)/x*cos(y)*y) 40 -12 12 40 -12 12 ' '
 exec proxy 2
 </PRE></FONT>
 The macro <FONT COLOR="#993300"><TT>proxy</TT></FONT> is:
 <FONT COLOR="#993300"><PRE>
 Macro proxy
 Id=[1]
 opt grid
 prox [Id]
 proy [Id]
 h/pro [Id]
 *
 set ywin 0.0001
 set xwin 0.0001
 set yval 999 ; set yhti 999
 *
 set grid 2003
 zone 2 2
 h/pl [Id].prox
 *
 set grid 3
 zone 2 2 3 s
 set yhti ; set yval
 h/pl [Id] col
 set yhti 999
 *
 set grid 1003
 set xval 999
 nb = $HINFO([Id],'YBINS')
 v/create x([nb])
 v/create y([nb])
 h/copy [Id].proy 22
 xmax = 1.1*$HINFO(22,'MAX')
 ymin = $HINFO(22,'XMIN')
 ymax = $HINFO(22,'XMAX')
 null $HINFO(22,'MIN') [xmax] [ymin] [ymax]
 get/cont 22 y
 get/abs 22 x
 nn = [nb]-2
 v/inp x [ymin] [ymax] [nn]*0
 his [nb] y x  rh
 *
 set xwin ; set ywin; set xval
 zone 2 2 2 s
 h/pl [id] surf
 return
 </PRE></FONT>
 The output produced is:
 <center>
 <img src="proxy.gif">
 </center>
<HR SIZE=6><h1>A macro to place a text in relative coordinates.
</h1>This macro allows to place a text at a relative position.
 <p>Example:
 <FONT COLOR="#993300"><pre>
    PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO.html#M:EXEC">Exec</a> reltext 25 75 'Hello'
 </pre></font>
 Draw a text 75% from the bottom and 25% of the left of the current NT.
 <FONT COLOR="#993300"><pre>
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">Macro</a> Reltext 1=100 2=100 3=' '
    X1 = $GRAFINFO('WNXMIN')
    X2 = $GRAFINFO('WNXMAX')
    Y1 = $GRAFINFO('WNYMIN')
    Y2 = $GRAFINFO('WNYMAX')
    DX = [X2]-[X1]
    X  = [1]/100.
    X  = [DX]*[X]
    X  = [X]+[X1]
    DY = [Y2]-[Y1]
    Y  = [2]/100.
    Y  = [DY]*[Y]
    Y  = [Y]+[Y1]
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ITX">Itx</a> [X] [Y] [3]
 *
    <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:RETURN">Return</a>
 </pre></font>
<HR SIZE=6><h1>Why DZERO is not callable in PAW ?
</h1>Routines like DZERO are difficult to introduce in the list of <b>PAW</b>
 callable routines from a COMIS routine because one of the parameters
 must be passed as an EXTERNAL function. In this case the solution
 is to extract the source from the Program Library and compile it
 with COMIS directly. Below is an example of a macro invoking DZERO
 as well as the file dzero.f with the source of DZERO.

 <FONT COLOR="#993300"><pre>
 macro tdz
 application comis quit
 !file dzero.f
       Subroutine TDZ
       IMPLICIT DOUBLE PRECISION (A-H,O-Z)
       integer mxf
       external DZF
       a=0
       b=3.
       r=1.e-4
       eps=1.e-7
       mxf=10000
       call dzero(a,b,x0,r,eps,mxf,dzf)
       print *,' Zero of function at X0=',x0
       end

       double precision function dzf(x,i)
       IMPLICIT DOUBLE PRECISION (A-H,O-Z)
       integer i
       a=2.
       dzf=-3.+(x-a)**2
       end
 quit
 call tdz
 return
 </pre></font>

 File dzero.f:

 <FONT COLOR="#993300"><PRE>
       SUBROUTINE DZERO(A,B,X0,R,EPS,MXF,F)
       IMPLICIT DOUBLE PRECISION (A-H,O-Z)
 *KEEP, C205BODY.
       LOGICAL MFLAG,RFLAG
       EXTERNAL F

       PARAMETER (ONE = 1, HALF = ONE/2)

       XA=MIN(A,B)
       XB=MAX(A,B)
       FA=F(XA,1)
       FB=F(XB,2)
       IF(FA*FB .GT. 0) GO TO 5
       MC=0

     1 X0=HALF*(XA+XB)
       R=X0-XA
       EE=EPS*(ABS(X0)+1)
       IF(R .LE. EE) GO TO 4
       F1=FA
       X1=XA
       F2=FB
       X2=XB

     2 FX=F(X0,2)
       MC=MC+1
       IF(MC .GT. MXF) GO TO 6
       IF(FX*FA .GT. 0) THEN
        XA=X0
        FA=FX
       ELSE
        XB=X0
        FB=FX
       END IF

     3 U1=F1-F2
       U2=X1-X2
       U3=F2-FX
       U4=X2-X0
       IF(U2 .EQ. 0 .OR. U4 .EQ. 0) GO TO 1
       F3=FX
       X3=X0
       U1=U1/U2
       U2=U3/U4
       CA=U1-U2
       CB=(X1+X2)*U2-(X2+X0)*U1
       CC=(X1-X0)*F1-X1*(CA*X1+CB)
       IF(CA .EQ. 0) THEN
        IF(CB .EQ. 0) GO TO 1
        X0=-CC/CB
       ELSE
        U3=CB/(2*CA)
        U4=U3*U3-CC/CA
        IF(U4 .LT. 0) GO TO 1
        X0=-U3+SIGN(SQRT(U4),X0+U3)
       END IF
       IF(X0 .LT. XA .OR. X0 .GT. XB) GO TO 1

       R=MIN(ABS(X0-X3),ABS(X0-X2))
       EE=EPS*(ABS(X0)+1)
       IF(R .GT. EE) THEN
        F1=F2
        X1=X2
        F2=F3
        X2=X3
        GO TO 2
       END IF

       FX=F(X0,2)
       IF(FX .EQ. 0) GO TO 4
       IF(FX*FA .LT. 0) THEN
        XX=X0-EE
        IF(XX .LE. XA) GO TO 4
        FF=F(XX,2)
        FB=FF
        XB=XX
       ELSE
        XX=X0+EE
        IF(XX .GE. XB) GO TO 4
        FF=F(XX,2)
        FA=FF
        XA=XX
       END IF
       IF(FX*FF .GT. 0) THEN
        MC=MC+2
        IF(MC .GT. MXF) GO TO 6
        F1=F3
        X1=X3
        F2=FX
        X2=X0
        X0=XX
        FX=FF
        GO TO 3
       END IF

     4 R=EE
       FF=F(X0,3)
       RETURN
     5 Continue
 *   5 CALL KERMTR('C205.1',LGFILE,MFLAG,RFLAG)
 *      IF(MFLAG) THEN
 *       IF(LGFILE .EQ. 0) WRITE(*,100)
 *       IF(LGFILE .NE. 0) WRITE(LGFILE,100)
 *      END IF
 *      IF(.NOT.RFLAG) CALL ABEND
       R=-2*(XB-XA)
       X0=0
       RETURN
     6 Continue
 *   6 CALL KERMTR('C205.2',LGFILE,MFLAG,RFLAG)
 *      IF(MFLAG) THEN
 *       IF(LGFILE .EQ. 0) WRITE(*,101)
 *       IF(LGFILE .NE. 0) WRITE(LGFILE,101)
 *      END IF
 *      IF(.NOT.RFLAG) CALL ABEND
       R=-HALF*ABS(XB-XA)
       X0=0
       RETURN
   100 FORMAT(1X,'***** CERN C205 DZERO ... F(A) AND F(B)',
      1          ' HAVE THE SAME SIGN')
   101 FORMAT(1X,'***** CERN C205 DZERO ... TOO MANY FUNCTION CALLS')
       END
 </pre></font>
<HR SIZE=6><h1>A macro to plot histograms with a given number of decades
</h1>The following macro should be use (normally) with OPTION LOGY.
 <p>
 Example:
 <FONT COLOR="#993300"><pre>
               PAW > option logy
               PAW > exec decade 10 5
 </pre></font>
 plot the histogram number 10 with 5 decades.
 <FONT COLOR="#993300"><pre>
    Macro decade 1=10 2=0
 *
    Id  = [1]
    Dec = [2]
    If $HEXIST([Id]) = 0 Then
       Hrin [Id]
       If $HEXIST([Id]) = 0 Then
          Mess Histogram [Id] not found
          Exitm
       Endif
    Endif
    Max = $HINFO([Id],'MAX')
    Min = $HINFO([Id],'MIN')
    If [Max] <= 0 Then
       Mess The maximum value of the histogram is negative
       Exitm
    Endif
    If [Min] <= 0 Then
       Min = 0.00001*[Max]
    Endif
    If [Dec] = 0 Then
       Dec = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>(LOG10([Max]/[Min]))
    Endif
    Min = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$SIGMA</tt></font></a>([Max]/(10**[Dec]))
    Min [Id] [Min]
    H/pl [Id]
 *
    Return
 </pre></font>
<HR SIZE=6><h1>How to check, with $hexist, the existence of an histogram on an HBOOK RZ file ?
</h1>The following example do that.

 <FONT COLOR="#993300"><pre>
 Macro ex
 exe hex 110
 mess [@]
 exe hex 111
 mess [@]
 return

 Macro HEX
 cdir = $hcdir()
 If [cdir] <> '//PAWC' Then
   Hrin [1]
   Cd //PAWC
   exist =  $hexist([1])
   If [exist] Then
      H/Del [1]
   Endif
   Cd [cdir]
   EXITM [exist]
 Else
   EXITM $hexist([1])
 Endif
 Return
 </pre></font>

 In the macro EX the return code of the macro HEX is in [@]
<HR SIZE=6><h1>Why do I need to specify the unit number on which I open a HBOOK file ?
</h1>It is not really needed.
 In the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE">HISTO/FILE</a></tt>
 <tt>UNIT=0</tt> can be specified and the first free unit is used.
 <tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:CLOSE">CLOSE 0</a></tt>
 close all the opened files.
<HR SIZE=6><h1>Why UNITS  does not show all the files opened via HISTO/FILE ?
</h1>Since we use C I/O to access HBOOK files on Unix platforms the UNITS command
 does not return anymore the connected HBOOK files. The problem is that UNITS
 works by looping over all luns from 1 to 100 and doing an INQUIRE. The
 Fortran I/O runtime stores the filenames and returns them to INQUIRE.
 However, the C runtime does not store the filenames used to open the files
 and therefore we can not implement this feature (in C we only can find out
 which file descriptors are in use, not the names used to open these
 file descriptors).

 To see which HBOOK files are connected do 'LD //'.
 <P>
 Since version
 <A HREF="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20918#PAW_Improvements">
 2.09/18</A>
 of <B>PAW</B> the UNITS command is again able to display the list of HBOOK files.
<HR SIZE=6><h1>Default histogram binning in ntuple commands since version 2.07 ?
</h1>Since the version <b>PAW</b> 2.07 the new ntuple query processor compute the
 number of bins for the default histogram in a different way from the 2.06
 version.

 <P>The following example illustrate this fact. In this example the version
 2.06/20 booked the default histogram 54 bins whereas the version 2.07/23
 book the histogram with 100 bins. This make the difference when histogram
 are plotted as we can see on the following plots:</P>

 <img src="e1.gif" ALIGN=CENTER> Plot obtain with version 2.07
 <P>
 <img src="e2.gif" ALIGN=CENTER> Plot obtain with version 2.06

 <P>The binning is something the user should define according to his data,
 it is really part of the analysis process. For that the command nt/plot
 provides the parameter IDH (after the CHOPT parameter). With 2.07 one should
 do: </P>

 <FONT COLOR="#993300"><PRE>
 PAW > 1d 3 'e' 54 0 10
 PAW > call hbarx(3)
 PAW > nt/pl 10.e wt ! ! ! E 3
 </PRE></font>

 To obtain a plot similar to 2.06.

 <P>In addition, a call hbarx is necessary because when IDH is given NT/PLOT doesn't
 touch the histogram (except for a RESET of the content) and in particular
 doesn't call HBARX on it even if, like here, the option E is selected. The E
 option in that case means only: 'draw the histogram with error bars'. </P>
 <p>
 More informations on the new ntuple query processor are available
 <a href="http://wwwinfo.cern.ch/asd/paw/qp.html">here</a>.
<HR SIZE=6><h1>Numbers in macro variables
</h1>The <b>macro variables</b> are <b>character strings</b>.
 They don't require any declaration and are created
 the first time they are filled. Example:

 <FONT COLOR="#993300"><PRE>
     A = Hello
 </PRE></FONT>

 creates the variable <FONT COLOR="#993300"><TT>A</TT></FONT> which
 contains the character string <FONT COLOR="#993300"><TT>Hello</TT></FONT>.
 <P>
 To access the content of a variable, the operator
 <FONT COLOR="#993300"><TT>[]</TT></FONT> should be used. For example
 in a macro the command:

 <FONT COLOR="#993300"><PRE>
     MESSAGE [A]
 </PRE></FONT>
 gives the output:
 <FONT COLOR="#993300"><PRE>
     Hello
 </PRE></FONT>

 <P>Variables can be concatenate in the following way:

 <FONT COLOR="#993300"><PRE>
     A = Hello
     B = world
     C = [A] [B]
     MESSAGE [C]
     C = [A]+[B]
     MESSAGE [C]
 </PRE></FONT>
 This macro gives the output:
 <FONT COLOR="#993300"><PRE>
     Hello world
     Hello+world
 </PRE></FONT>
 <P>
 If the expression on the right side can be evaluated as
 an arithmetic expression <B>PAW</B> does it. Example:
 <FONT COLOR="#993300"><PRE>
     A = 1
     B = 2
     C = [A] [B]
     MESSAGE [C]
     C = [A]+[B]
     MESSAGE [C]
 </PRE></FONT>
 gives the output:
 <FONT COLOR="#993300"><PRE>
     1 2
     3
 </PRE></FONT>
 Note that the evaluation of an expression can be forced using the system
 function <FONT COLOR="#993300"><TT>$EVAL</TT></FONT>. In some cases this
 ensure that the variable really contains a number. The following case
 show a such example where using <FONT COLOR="#993300"><TT>$EVAL</TT></FONT>
 is safer than the automatic evaluation.
 <FONT COLOR="#993300"><PRE>
     V/CREATE V2(2) R 10 20
     L = 2
     A = $EVAL(V[L](1))
     MESSAGE [A]
 </PRE></FONT>
 gives the output:
 <FONT COLOR="#993300"><PRE>
      10
 </PRE></FONT>
 <P>Variables can be used in commands parameters. Example:
 <FONT COLOR="#993300"><PRE>
     A = 1
     FUN/PLOT X+[A] 0 1
 </PRE></FONT>
 plots the function <FONT COLOR="#993300"><TT>X+1</TT></FONT>.
 <p> But be careful that <FONT COLOR="#993300"><TT>A</TT></FONT> may
 contains any character string and you may get any expression. For example
 the following commands
 <FONT COLOR="#993300"><PRE>
     A = -1
     FUN/PLOT X+[A] 0 1
 </PRE></FONT>
 are equivalent to execute the command:
 <FONT COLOR="#993300"><PRE>
     FUN/PLOT X+-1 0 1
 </PRE></FONT>
 which is not valid for the FORTRAN like expression evaluator of
 <FONT COLOR="#993300"><TT>FUN/PLOT</TT></FONT> and <B>PAW</b> will
 give an error like:
 <FONT COLOR="#993300"><PRE>
  CS-TR-ERR: routine _002, line    0
  FUNCTION _002(X,Y,Z) _002=X+ ^ -1#
   syntax error
 </PRE></FONT>
 A way to bypass this is to do:

 <FONT COLOR="#993300"><PRE>
     A = -1
     FUN/PLOT X+([A]) 1 0 1
 </PRE></FONT>
 which is equivalent to:
 <FONT COLOR="#993300"><PRE>
     FUN/PLOT X+(-1) 0 1
 </pre></font>
<HR SIZE=6><h1>Why Only the last dimension of a multi-dimensional Column Wise Ntuple (CWN) array may be variable ?
</h1>There are quite some tricky complications when allowing multiple
 variable dimensions. Most problems are related to the fact that sparse
 arrays have to be stored and restored. Also a separate column containing
 pointers to the beginning of each event in the variable array must be
 stored. This last point is, of course, no problem in case the array is
 really sparse.
 <P>
 The way it is implemented is simple: all (multi-dimensional) arrays can
 be handled as a single large one-dimensional array.
 In that way no extra information is needed
 to have direct access to a variable length array.
<HR SIZE=6><h1>How to copy a column of a Ntuple into a VECTOR ?
</h1>The following examples show how to proceed:

 <h3>Before PAW version 2.07</h3>
 <FONT COLOR="#993300"><pre>
    PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE">Hi/file</a> 2 rwn_aptuple.hbook
    PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:LOOP">Nt/Loop</a> 10.age copy.f
 </pre></font>

 The skeleton of the routine
 <FONT COLOR="#993300"><tt>COPY</tt></font>
 has been generated with the command
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:UWFUNC">
 UWFUNC</a></tt></font>.
 <FONT COLOR="#993300"><pre>
       REAL FUNCTION COPY(XDUMMY)
       REAL
      +CATEGORY,DIVISION,FLAG    ,AGE     ,SERVICE ,CHILDREN,
      +GRADE   ,STEP    ,NATION  ,HRWEEK  ,COST
       COMMON/PAWIDN/IDNEVT,VIDN1,VIDN2,VIDN3,VIDN(10),
      +CATEGORY,DIVISION,FLAG    ,AGE     ,SERVICE ,CHILDREN,
      +GRADE   ,STEP    ,NATION  ,HRWEEK  ,COST
 *
       VECTOR X(3354)
       X(IDNEVT)=VIDN1
       END
 </pre></font>

 <h3>Since PAW version 2.07</h3>
 <FONT COLOR="#993300"><pre>
    PAW > Hi/file 2 rwn_aptuple.hbook
    PAW > Nt/Loop 10 copy.f(age)
 </pre></font>

 The skeleton of the routine <FONT COLOR="#993300"><tt>COPY</tt></font>
 has been generated with the command
 <FONT COLOR="#993300"><tt>
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:UWFUNC">
 UWFUNC</a></tt></font>.
 <FONT COLOR="#993300"><pre>
       REAL FUNCTION COPY(V)
       REAL
      +CATEGORY,DIVISION,FLAG    ,AGE     ,SERVICE ,CHILDREN,
      +GRADE   ,STEP    ,NATION  ,HRWEEK  ,COST
       COMMON/PAWIDN/IDNEVT,OBS(13)
      +CATEGORY,DIVISION,FLAG    ,AGE     ,SERVICE ,CHILDREN,
      +GRADE   ,STEP    ,NATION  ,HRWEEK  ,COST
 *
       VECTOR X(3354)
       X(IDNEVT)=V
       END
 </pre></font>
<HR SIZE=6><h1>Why the commands FAREA, PLINE and PMARKER don't work in log scale ?
</h1> The commands <b>FAREA</b>, <b>PLINE</b> and <b>PMARKER</b> are basic
 graphics primitives which use the current normalisation transformation to draw
 polygons, lines or markers. They don't know about the <b>OPTION LOG</b>. To
 draw a polygon, a polyline or a set of markers in log scale (<b>OPTION LOG</b>x on)
 use the command <b>GRAPH</b> with
 the options <b>F</b>, <b>L</b> or <b>P</b>.
<HR SIZE=6><h1>How do I change the marker size used in the command "HI/PLOT id E" ?
</h1>Example:
 <FONT COLOR="#993300"><PRE>
 PAW > SET MTYP 20
 PAW > SET KSIZ 0.8
 PAW > H/PL 10 E
 </PRE></font>
 First change the marker type because the default marker type is a dot and the
 marker size has no effect on it. Then define the size with
 <FONT COLOR="#993300"><TT>SET KSIZ</TT></font>.
 The marker size is in centimetres.
<HR SIZE=6><h1>How can I change the colours used by the FUN/DRAW command?
</h1><FONT COLOR="#993300"><tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:DRAW">FUN/DRAW</a></tt></font>
 uses fixed colour indices (2 and 3). To change the colours use by
 <FONT COLOR="#993300"><tt>FUN/DRAW</tt></font>
 you should use the command
 <FONT COLOR="#993300"><tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_ATTRIBUTES.html#GA:COLORT">COLOR</a></tt></font>:
 <FONT COLOR="#993300"><pre>
    PAW > COLOR 2 0.4 0.6 0.1
    PAW > COLOR 3 0.4 0.6 0.5
    PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FUNCTION.html#F:DRAW">FUN/DRAW</a> x*x*y*z
 </pre></FONT>
<HR SIZE=6><h1>How to change the EPS parameter in routine HFITH ?
</h1>To set <FONT COLOR="#993300"><tt>EPS</tt></font>, you have to call
 <FONT COLOR="#993300"><tt>HSETPR</tt></font> before
 <FONT COLOR="#993300"><tt>HFITH</tt></font>. Example
 <FONT COLOR="#993300"><pre>
    call hsetpr('FEPS',eps)
    call hfith(id,...
 </pre></font>
<HR SIZE=6><h1>How to get the sum of the positive elements of a Column Wise Ntuple (CWN) array variable ?
</h1> The original question was:
 <P>
 <I>
  I want to get the sum of the positive elements of an array
 (<FONT COLOR="#993300"><tt>busig</tt></font>).
  I do
 <FONT COLOR="#993300"><pre>
  nt/plot 202.vadd(busig) busig>0
 </pre></font>
  It shows also negative entries! Requiring the index to be >0 does not
  help. If I do
 <FONT COLOR="#993300"><pre>
  nt/plot 202.busig busig>0
 </pre></font>
  I see correctly only positive entries.
 </I>
 <P>
 <p>

   In fact the mechanism is slightly more involved then you maybe thought.
   The basic structure is the tree that is defined by the
   expression. E.g.
 <FONT COLOR="#993300"><pre>
   A + 3 * B
 </pre></font>
 becomes
 <FONT COLOR="#993300"><pre>
          +
         / \
        A   *
   	/ \
          3   B
 </pre></font>
  or maybe it is easier by introducing brackets explicitly
 <FONT COLOR="#993300"><pre>
   ( A + ( 3 * B ) )
 </pre></font>
  so after this separation each operator is a mapping :
 <FONT COLOR="#993300"><pre>
   f( X, Y )-> Z
 </pre></font>
  the number of ``arguments'' may be 1 or any number (with some limit)
  now for each operator (or function) it is defined what the relation
  is of the scalar / non scalar shape of the arguments and the shape
  of the result.
  most of the built-in functions and operators are defined as
 <FONT COLOR="#993300"><pre>
   sin( * ) -> *
 </pre></font>
  meaning the shape is identical for the result and the argument or
  for the sum
 <FONT COLOR="#993300"><pre>
   "+"( *, * ) -> *
 </pre></font>
  meaning that if one of the arguments must be scalar or both arguments
  must have the same shape and the result also has this shape.
 <p>
  The top level has a rule like n/plot ( sel, exp1, exp2, ... )
 <FONT COLOR="#993300"><pre>
   n/plot( *, *, *, ... ) -> *
 </pre></font>
  The "v" function were added to be able to say things like
  plot x[i] when y[i].gt.0 and all z[j].gt.10
 <FONT COLOR="#993300"><pre>
  n/pl 10.x y>0.and.vand(z>10)
 </pre></font>
  the "v" functions have shape rules like
 <FONT COLOR="#993300"><pre>
   vadd( * ) -> 0
 </pre></font>
   where 0 means scalar.
 <p>
  Now for the question:
 <FONT COLOR="#993300"><pre>
  n/plo 202.vadd(busig) busig>0
 </pre></font>
  should become
 <FONT COLOR="#993300"><pre>
   n/pl 202.vadd(busig*(busig>0))
 </pre></font>
 and all will be fine !
<HR SIZE=6><h1>How to change X window resources in Paw++ ?
</h1>Basically in the same way as for any other X window
 application, i.e. by writing the appropriate lines in the
 resource file (
 <FONT COLOR="#993300"><tt>.Xdefaults</tt></font> or
 <FONT COLOR="#993300"><tt>.Xresources</tt></font> in your home directory).
 For instance, to set the background colour of the windows in Paw++
 one must write the 2 lines:
 <FONT COLOR="#993300"><pre>
            Paw++*background: white
            KxPaw++*background: white
 </pre></font>

 To effectively "load" this new resources you must issue afterwards
 the command:

 <FONT COLOR="#993300"><pre>
            xrdb -merge .Xdefaults   (or xrdb -merge .Xresources)
 </pre></font>

 The command <FONT COLOR="#993300"><tt>xrdb -query</tt></font> can be used to
 see the resources which are
 effectively set.
 <p>
 N.B. resources management is something quite complex in the X Window
 system. To have more information please refer to the
 <i>Guide for the Usage of X Window at CERN</i>, available at the UCO or at
 URL:
 <p>
 <a href="http://consult.cern.ch/writeups/xusage">http://consult.cern.ch/writeups/xusage</a>
 <p>
 and especially read carefully section 4.5 on <i>Resources or User Preferences</i>.
<HR SIZE=6><h1>Why SET XMGL, SET YMGU etc... doesn't work with several zones ?
</h1>The
 <tt><a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_VIEWING.html#GV:ZONE">ZONE</a></tt>
 command should be performed <b> AFTER </b> all the
 margin settings because it requires the value of all the margins
 to compute the zones position correctly.
<HR SIZE=6><h1> "error in CFOPEN" (since HBOOK version 4.24/03)
</h1> Since HBOOK version 4.24/03 (<b>PAW</b>
 <A HREF="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20814">version
 2.08/14) </A><FONT COLOR="#993300"><TT>HROPEN</TT></FONT>
  call <FONT COLOR="#993300"><TT>RZOPEN</TT></FONT> with option C (C I/O).
 So in HBOOK programs calling <FONT COLOR="#993300"><TT>HROPEN</TT>,
 <TT>HRENDC</TT></FONT> should be used instead of
 <TT><FONT COLOR="#993300">HREND</FONT></TT>
 (same calling sequence). This is important when a program is doing several
 <FONT COLOR="#993300"><TT>HROPEN</TT> </FONT>and
 <FONT COLOR="#993300"><TT>HREND</TT>.</FONT>
 In such programs (new <FONT COLOR="#993300"><TT>HROPEN</TT> </FONT>with
 <TT><FONT COLOR="#993300">HREND</FONT></TT>) one may get the message: </P>

 <PRE>
 <FONT COLOR="#993300">
       error in CFOPEN : Can't open configuration file
        ***** ERROR in HROPEN : Cannot open file :
 </FONT>
 </PRE>

 <P> The second parameter of <FONT COLOR="#993300"><TT>HROPEN</TT></FONT>
 and the <FONT COLOR="#993300"><TT>HRENDC</TT></FONT> are the same and should
 be a string in <b>UPPERCASE</b>. In the 98a version of cernlib this will not
 be necessary.

 <P>The following example shows how <TT><FONT COLOR="#993300">HROPEN </FONT></TT>and
 <TT><FONT COLOR="#993300">HRENDC </FONT></TT>should be called </P>

 <PRE><FONT COLOR="#993300">      Program Rfio
 *
       Parameter (Memory_Size=500000)
       Common /Pawc/ H(Memory_Size)
 *.___________________________________________
 *
       Call Hlimit(Memory_Size)
 *
       Do i=1,100
          print*, 'Loop number', i
          Call Hropen(1,'</FONT><FONT COLOR="#DC143C">EXAMPLE</FONT><FONT COLOR="#993300">','example.hbook','N',1024,Istat)
          If (Istat.Ne.0) Then
             Print*, 'Error in opening file ...'
             Stop
          Endif
          Call </FONT><FONT COLOR="#008B8B">Hrendc</FONT><FONT COLOR="#993300">('</FONT><FONT COLOR="#FF0000">EXAMPLE</FONT><FONT COLOR="#993300">')
       Enddo
 *
       End</FONT>
 </PRE>
 <p>
 <b> NOTE:</b> From HBOOK version 4.24/07 (<b>PAW</b> version 2.09/09),
 <FONT COLOR="#993300"><TT>HREND</TT></FONT> can be called: C/IO is the default. To force
 fortran IO, <FONT COLOR="#993300"><TT>HROPEN</TT></FONT> should be called
 with option <FONT COLOR="#993300"><TT>F</TT></FONT> and the file should be
 closed with <FONT COLOR="#993300"><TT>HRENDF</TT></FONT>.
<HR SIZE=6><h1>How to keep PAW from converting macro variables into integers ?
</h1>The original question was:
 <P>
 <I>
  If I pass an argument "40.0" to a macro on the PAW command line, and
  somewhere send this argument to a COMIS function expecting a real
  variable, I get garbage, whereas if I write "40.01" instead, then
  everything works.
 </I>
 <P>
 By default <b>PAW</b> converts the numbers into integers if possible. You should
 use <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$RSIGMA</tt></font></a>. Example:
 <FONT COLOR="#993300"><PRE>
 appl comis quit
       subroutine test(r)
       print*, r
       end
 quit
 r = 40.01
 call test([r])
 r = 40.0
 call test([r])
 r = <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:SIGMA"><FONT COLOR="#993300"><tt>$RSIGMA</tt></font></a>(40.0)
 call test([r])
 </PRE></FONT>
 The output of this macro is:
 <FONT COLOR="#993300"><PRE>
 PAW > exec test
   40.01000
   .5605194E-43
   40.00000
 PAW >
 </pre></font>
<HR SIZE=6><h1>How to read in batch an existing Row Wise Ntuple (RWN) ?
</h1>The following example create a RWN and read it back.
 <FONT COLOR="#993300"><pre>
       Program Read_RWNtuple
 *
       Parameter (Memory_Size         = 50000)
       Parameter (Number_of_Events    = 1000)
       Parameter (Number_of_Variables = 27)
 *
       Common /Pawc/ H(Memory_Size)
       Dimension   Event(Number_of_Variables)
       Character*8 Chtags(Number_of_Variables)
       Data Chtags /'A1','A2','A3','A4','A5','A6','A7','A8','A9',
      +             'B1','B2','B3','B4','B5','B6','B7','B8','B9',
      +             'C1','C2','C3','C4','C5','C6','C7','C8','C9'/
 *.___________________________________________
 *
       Call Hlimit(Memory_Size)
 *
       Call Hropen(1,'EXAMPLE','example.hbook','N',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
 *
       Call Hbookn(10,'Ntuple example',Number_of_Variables,
      +            '//EXAMPLE',9000,Chtags)
 *
       Do 10 i=1,Number_of_Events
          Do 20 j=1,Number_of_Variables
             Event(j) = Float(i)*Float(j)
  20      Continue
          Call Hfn(10,Event)
  10   Continue
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('EXAMPLE')
       Close(1)
 *
 *       Read back the ntuple 10
 *
       Call Hropen(1,'EXAMPLE','example.hbook','U',1024,Istat)
       Call Hrin   (10,9999,0)
 *
       IDN=0
       Do i=1,10
          Call Hgn(10,IDN,i,Event,Ierr)
          Print*, Event(1),Event(2),Event(3)
       Enddo
 *
       Call Hrend('EXAMPLE')
       Close(1)
 *
       End
 </pre></font>
 It is possible to do the same in a C program using
 <a href="http://wwwinfo.cern.ch/asdcgi/listcernlibfaqs.pl/10"><tt>cfortran.h</tt></a>.
 The program looks the following:
 <FONT COLOR="#993300"><pre>
 #include &lt;stdlib.h>
 #include &lt;cfortran.h>
 #include &lt;packlib.h>

 #define Memory_Size 50000
 #define Number_of_Variables 27
 #define Number_of_Events 10

 typedef struct { float PAW[Memory_Size]; } PAWC_DEF;
 #define PAWC COMMON_BLOCK(PAWC,pawc)
 COMMON_BLOCK_DEF(PAWC_DEF,PAWC);
 PAWC_DEF PAWC;

 main()
 {
    int istat  = 0;
    int icycle = 0;
    int i,j,Ierr;
    int IDN = 0;
    int record_size = 1024;

    float Event[Number_of_Variables];
    char Chtags[Number_of_Variables][3] =
                   {"A1","A2","A3","A4","A5","A6","A7","A8","A9",
                    "B1","B2","B3","B4","B5","B6","B7","B8","B9",
                    "C1","C2","C3","C4","C5","C6","C7","C8","C9"};

    HLIMIT(Memory_Size);

    HROPEN(1,"EXAMPLE","example.hbook","N",record_size,istat);
    if (istat != 0) {
       printf("Error in opening file ...\n");
       exit;
    }

    HBOOKN(10,"Ntuple example",Number_of_Variables,"//EXAMPLE",9000,Chtags);

    for (i=1; i&lt;=Number_of_Events; i++) {
       for (j=0; j&lt;Number_of_Variables; j++) {
          Event[j] = (float)i*(float)(j+1);
       }
       HFN(10,Event);
    }

    HROUT(0,icycle," ");
    HREND("EXAMPLE");
    KUCLOS(1," ",1);
 /*
  *       Read back the ntuple 10
  */
    HROPEN(1,"EXAMPLE","example.hbook","U",record_size,istat);
    HRIN(10,9999,0);

    for (i=1; i&lt;=10; i++) {
       HGN(10,IDN,i,Event,Ierr);
       printf("%f %f %f \n", Event[0],Event[1],Event[2]);
    }

    HREND("EXAMPLE");
    KUCLOS(1," ",1);
 }
 </pre></font>

<HR SIZE=6><h1>How to stop the fast scrolling of H/LIST ?
</h1>The following macro can be used:
 <FONT COLOR="#993300">
 <pre>
 Macro hlist
 Output_lp 66 Histogram_Listing
 H/Li s
 Output_lp -66
 shell more Histogram_Listing
 shell rm Histogram_Listing
 return
 </pre>
 </FONT>
<HR SIZE=6><h1>How do I change the size of the text which is printed in a 2D histogram...
</h1>...when using the command <b>h/pl 100 text</b> ?
 <P>

 <b>Before PAW version 2.10</b> This is not possible. The size is computed automatically according to
 the bin size.
 <p>
 <b>Since PAW version 2.10</b> This size in controlled by
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS.html#G:SET"><TT>SET 2SIZ</TT></A>.
<HR SIZE=6><h1>Is there a way to teach the Kuip browser to use icons for particular files ?
</h1>(in addition to the .kumac, .hbook, etc., ones it already knows of) without
 recompiling the program?
 I.e. design an icon to represent various different projects.
 <p>
 The icons which are used for particular files in Kuip/Motif
 (
 <FONT COLOR="#993300"><tt>*.kumac</tt></font>,
 <FONT COLOR="#993300"><tt>*.ps</tt></font>, r, r/w, ...) and Paw++ (
 <FONT COLOR="#993300"><tt>*.hbook</tt></font>)
 corresponds to ``class definitions'' made in the CDF (Command Definition File)
 for specific objects handled by the application. E.g.:
 <p>

 <FONT COLOR="#993300"><pre>
 >Class MacFile 'Kuip Macro' big_fm sm_fm
 </pre></font>
 <p>

 <FONT COLOR="#993300"><pre>
 >Class hbook 'Hbook File' big_hbook sm_hbook
 </pre></font>
 <p>

 You must also define in the CDF the corresponding "browsables", i.e. the
 container for these objects (e.g. in Paw++ the browsable HBOOK is a container
 for HBOOK files which are identified as "
 <FONT COLOR="#993300"><tt>*.hbook</tt></font>"). In your case you
 must define a new container for all the HBOOK files belonging to
 different projects.
 <p>

 Normally this is done when building the application but it is possible
 with COMIS to define new classes and new browsables and make them known
 by the application without recompiling and linking. The following is
 an example where I define a new class "hbnew" (HBOOK files identified
 as "
 <FONT COLOR="#993300"><tt>*.hbnew</tt></font>"), and a new browsable "Hbnew" for these files.
 <p>

 <h2>File "hbnew.cdf" (with the new definitions)</h2>

 <FONT COLOR="#993300"><pre>
 >Name hbnew

 >Browse Hbnew . hbnew_list_%C hbnew_dir_%C
  List

 >Class hbnew 'Hbnew File' big_hbnew sm_hbnew
 !Open                           .  'Histo/File 0 [that] 0 -X'
 !'Open Update Mode'             .  'Histo/File 0 [that] 0 -XU'

 >Icon_bitmaps

 #define big_hbnew_width 28
 #define big_hbnew_height 38
 static char big_hbnew_bits[] = {
    0xff, 0xff, 0xff, 0x0f, 0x1f, 0xfe, 0x87, 0x0f, 0x0f, 0xfc, 0x03, 0x0f,
    0x07, 0xf8, 0x01, 0x0e, 0x03, 0xf0, 0x00, 0x0c, 0x01, 0x00, 0x00, 0x08,
    0xf1, 0x03, 0xfc, 0x08, 0xe1, 0x01, 0x78, 0x08, 0xe1, 0x01, 0x78, 0x08,
    0xe1, 0x01, 0x78, 0x08, 0xe1, 0x01, 0x78, 0x08, 0xe1, 0x01, 0x78, 0x08,
    0xe1, 0x01, 0x78, 0x08, 0xe3, 0x01, 0x78, 0x0c, 0xe7, 0x01, 0x78, 0x0e,
    0xe7, 0x01, 0x78, 0x0e, 0xe7, 0x03, 0x7c, 0x0e, 0xe7, 0xff, 0x7f, 0x0e,
    0xe7, 0xff, 0x7f, 0x0e, 0xe7, 0xff, 0x7f, 0x0e, 0xe7, 0x03, 0x7c, 0x0e,
    0xe7, 0x01, 0x78, 0x0e, 0xe7, 0x01, 0x78, 0x0e, 0xe7, 0x01, 0x78, 0x0e,
    0xe7, 0x01, 0x78, 0x0e, 0xe3, 0x01, 0x78, 0x0c, 0xe1, 0x01, 0x78, 0x08,
    0xe1, 0x01, 0x78, 0x08, 0xe1, 0x01, 0x78, 0x08, 0xe1, 0x01, 0x78, 0x08,
    0xe1, 0x01, 0x78, 0x08, 0xe1, 0x01, 0x78, 0x08, 0xf1, 0x03, 0xfc, 0x08,
    0x03, 0xf0, 0x00, 0x0c, 0x07, 0xf8, 0x01, 0x0e, 0x0f, 0xfc, 0x03, 0x0f,
    0x1f, 0xfe, 0x87, 0x0f, 0xff, 0xff, 0xff, 0x0f};


 #define sm_hbnew_width 18
 #define sm_hbnew_height 22
 static char sm_hbnew_bits[] = {
    0xff, 0xff, 0x03, 0xe7, 0x9f, 0x03, 0xc3, 0x0f, 0x03, 0x01, 0x03, 0x02,
    0x7d, 0xf8, 0x02, 0x39, 0x70, 0x02, 0x39, 0x70, 0x02, 0x39, 0x70, 0x02,
    0x7b, 0x78, 0x03, 0xfb, 0x7f, 0x03, 0xfb, 0x7f, 0x03, 0x7b, 0x78, 0x03,
    0x3b, 0x70, 0x03, 0x3b, 0x70, 0x03, 0x39, 0x70, 0x02, 0x39, 0x70, 0x02,
    0x39, 0x70, 0x02, 0x7d, 0xf8, 0x02, 0x01, 0x03, 0x02, 0xc3, 0x0f, 0x03,
    0xe7, 0x9f, 0x03, 0xff, 0xff, 0x03};
 </pre></font>

 N.B. By compiling this CDF file with the KUIP compiler "
 <FONT COLOR="#993300"><tt>kuipc</tt></font>" you
 automatically generate the C code:
 <p>

 <FONT COLOR="#993300"><pre>
 > kuipc hbnew.cdf hbnew.c
 </pre></font>

 <h2>Utilities routines hbnew_list_ and hbnew_dir_</h2>

 In the CDF the 2 C routines hbnew_list_ hbnew_dir_ are automatically
 called by the browser. The calling sequence of these routines is
 pre-defined (see the KUIP User Guide for more information).
 <p>

 In our example the first routine "hbnew_list_" must return one by one the
 "
 <FONT COLOR="#993300"><tt>*.hbnew</tt></font>" files.
 <p>

  * file "
 <FONT COLOR="#993300"><tt>hbnew_list.c</tt></font>" which contains routine "
 <FONT COLOR="#993300"><tt>hbnew_list_</tt></font>":

 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>
 #include &lt;stdlib.h>
 #include &lt;string.h>


 #define MAX_PATH   256
 #define MAX_STRING         80

 extern char    **km_scan_dir();

 /***********************************************************************
  *                                                                     *
  *   Return one by one the *.hbnew files. This routine is called by    *
  *   the Kuip Browser.                                                 *
  *                                                                     *
  ***********************************************************************/
 char **hbnew_list_(brobj_name, brcls_name, bpath, n)
              char *brobj_name, *brcls_name, *bpath;
              int n;
 {
    static int init = 0;
    char **scan;

    if (!init) {
       km_file_type(".hbnew", "hbnew", "(Hbook New File)", 0);
       init = 1;
    }

    scan = km_scan_dir(bpath, "*.hbnew", n, 1);

    return scan;
 }
 </pre></font>

 (N.B.
 <FONT COLOR="#993300"><tt>km_file_type</tt></font> and
 <FONT COLOR="#993300"><tt>km_scan_dir</tt></font> are KUIP callable
 utilities).
 <p>

 The second routine "
 <FONT COLOR="#993300"><tt>hbnew_dir_</tt></font>" returns the CWD for the
 "
 <FONT COLOR="#993300"><tt>*.hbnew</tt></font>" files.
 <p>

 * file "
 <FONT COLOR="#993300"><tt>hbnew_dir.c</tt></font>" which contains routine "
 <FONT COLOR="#993300"><tt>hbnew_dir_</tt></font>":

 <FONT COLOR="#993300"><pre>
 #include &lt;stdio.h>
 #include &lt;stdlib.h>
 #include &lt;string.h>


 #define MAX_PATH   256
 #define MAX_STRING         80

 extern char    **km_scan_dir();

 /***********************************************************************
  *                                                                     *
  *   Return the CWD for the *.hbnew files. This routine is called by   *
  *   the Kuip Browser.                                                 *
  *                                                                     *
  ***********************************************************************/
 char **hbnew_dir_(class_name, first)
      char *class_name;
      int first;
 {
    static char *path_desc[2];
    static char  root[MAX_PATH+6];
    char         path[MAX_PATH+1];

    path_desc[0] = NULL;
    path_desc[1] = NULL;

 #ifdef NeXT
    if (first && getwd(path)) {
 #else
    if (first && getcwd(path, MAX_PATH)) {
 #endif
       sprintf(root, "root=%s", path);
       path_desc[0] = "Hbnew";
       path_desc[1] = root;
    }
    return path_desc;
 }
 </pre></font>

 <h2>KUIP Macro
 <FONT COLOR="#993300"><tt>hbnew.kumac</tt></font> (invoke COMIS and load files)</h2>

 You can write a small KUIP macro that will load and call (through COMIS)
 these files in the correct order:
 <p>

 <FONT COLOR="#993300"><pre>
 Macro hbnew
 App COMIS quit
 !file hbnew_list.c
 !file hbnew_dir.c
 quit
 CALL hbnew.c
 </pre></font>


 <h2>Conclusion:</h2>

 Run paw++ and execute the macro hbnew (just type "exec hbnew" in the
 "Paw++ Executive Window"). You will see immediately in the browser a
 new entry called "Hbnew" which will display only the files "
 <FONT COLOR="#993300"><tt>*.hbnew</tt></font>"
 present
 in the current working directory. These files are visualised with a specific
 icon ("
 <FONT COLOR="#993300"><tt>big_hbnew_bits</tt></font>" or "
 <FONT COLOR="#993300"><tt>sm_hbnew_bits</tt></font>" in the CDF).
 These files are also
 visible from the general browsable/entry "Files".
 <p>
 <center><img src="hbnew.gif"></center>
<HR SIZE=6><h1>What means: "RZIODO. Error at record ..." ?
</h1>The complete error message is:

 <FONT COLOR="#993300"><pre>
 RZIODO. Error at record = xxxx  LUN = x  IOSTAT = xxx
 </pre></font>

 Where:

 <ul>
 <li> RZIODO is an internal ZEBRA/RZ routine.
 <li> IOSTAT is produced by the Fortran run-time on the system
      on which you are running.
 <li> The record number refer to the record number
 currently read/written.
 <li> LUN is the fortran logical unit number (like in the
 call to RZOPEN/RZMAKE/RZFILE).
 </ul>

 <p>
 Errors from RZIODO are passed back to calling routines and the
 higher level package should then handle them appropriately.
 <P>
 <b>
 Possible causes include:
 <ol>
 <li> No disk space or quota.
 <li> No valid AFS token.
 <li> File size is limited (in particular for batch jobs).
 <li> Hardware problem (!).
 </ol>
 </b>
<HR SIZE=6><h1>How to use HFITV in a batch program ?
</h1>The following example illustrate how to proceed:

 <FONT COLOR="#993300"><pre>
       Program Hfitv_Example
 *
       Parameter (Npoints=100,Npar=3)
       Dimension X(Npoints),Y(Npoints),E(Npoints)
       Dimension Pmin(Npar),Pmax(Npar),Step(Npar),Sigpar(Npar)
       Common/PAWPAR/PAR(Npar)
       Common /PAWC/ H(100000)
       External FitFun
 *.___________________________________________
 *
       Call Igwkty(Kwtype)
       Call Hlimit(100000)
       Call Hplint(Kwtype)
 *
 * Vectors to br fitted
 *
       Do i=1,Npoints
          R    = 5.*rndm(i)
          X(i) = Float(i)
          Y(i) = X(i)*X(i)+i*R
          E(i) = R
       Enddo
 *
 * Parameters needed by Hfitv
 *
       Do i=1,Npar
          PAR(i)  = 1.
          Pmin(i) = 0.
          Pmax(i) = 0.
          Step(i) = -1.
       enddo
 *
 * Perform the fit
 *
       Call Hfitv(Npoints,Npoints,1,X,Y,E,FitFun,
      +           ' ',Npar,PAR,Step,Pmin,Pmax,Sigpar,Chi2)
 *
 * Draw the curve
 *
       Call Hplfra(0.,101.,0.,10100.,' ')
       Call Igraph(100,X,Y,'L')
 *
 * Draw the fit
 *
       Do i=1,Npoints
          Y(i) = FitFun(X(i))
       Enddo
       Call Igset('PLCI',2.)
       Call Igraph(100,X,Y,'L')
 *
       Call Igterm
       Read(*,*)
       Call Hplend
       End

       Function FitFun(X)
       Parameter (Npar=3)
       Common/PAWPAR/PAR(Npar)
       FitFun = PAR(1)*X*X + PAR(2)*X + PAR(3)
       End
 </pre></font>

 <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=1 COLS=3>
 <TR><TD>
 <img src="hfitv.gif">
 </TD><TD>

 <FONT COLOR="#993300"><pre>
 pcitasd29> hfitv_example
  Workstation type (?=HELP) <CR>=1 : 2
  Version 1.26/04 of HIGZ started
   MINUIT RELEASE 96.03  INITIALIZED.   DIMENSIONS 100/ 50  EPSMAC=  0.89E-15
  **********
  **    1 **SET EPS  0.1000E-06
  **********
  FLOATING-POINT NUMBERS ASSUMED ACCURATE TO   0.100E-06
  **********
  **    2 **SET ERR   1.000
  **********

      **********************************************
      *                                            *
      * Function minimization by SUBROUTINE HFITV  *
      * Variable-metric method                     *
      * ID =          0  CHOPT =                   *
      *                                            *
      **********************************************
  Convergence when estimated distance to minimum (EDM) .LT.  0.10E+01

  FCN=   333041.0     FROM MIGRAD    STATUS=FAILED       227 CALLS      228 TOTAL
                      EDM=  0.52E+03    STRATEGY= 1      ERR MATRIX NOT POS-DEF

   EXT PARAMETER                APPROXIMATE        STEP         FIRST
   NO.   NAME        VALUE          ERROR          SIZE      DERIVATIVE
    1      P1       0.99223        1.0002        0.0000       0.81988E+08
    2      P2       0.65828        1.0002        0.0000       0.93416E+06
    3      P3       0.28668        1.0002        0.0000        12019.

  CHISQUARE = 0.3433E+04  NPFIT =   100
 </pre></font>
 </TD></TR>
 </TABLE>
<HR SIZE=6><h1>How to use HQUADF.DAT (output of the SMOOTH command) in PAW ?
</h1>The option "F" of the command SMOOTH allows to generate in the
 file HQUADF.DAT the code resulting from a multiquatric smoothing.
 <P>
 The code is a DOUBLE PRECISION fortran function which can be use later in <b>PAW</b>.
 The only limitation is that the code should be <b>compiled</b> because the
 COMIS interpreter doesn't handle properly the DOUBLE PRECISION functions.
 <P>
 The following example shows to proceed. It plots the function, result of
 the smoothing, using the HQUADF.DAT file. Note the extensions ".f77" to use
 compiled code.
 <FONT COLOR="#993300"><PRE>
 v/create x(10) r 1 2 4 5 6 3 2 1 3 5
 v/dr x 11
 zone 1 2
 smooth 11 F 3
 shell mv hquadf.dat hquadf.f

 appl comis quit
 !file <FONT COLOR="#FF00FF">hquadf.f77</FONT>
 quit

 appl data dy.f
       real function dy(x)
       DOUBLE PRECISION V,HQUADF
       v = dble(x)
       dy = float(HQUADF(v))
       end
 dy.f

 fun/plot <FONT COLOR="#FF00FF">dy.f77</FONT> 1 11
 </PRE></FONT>
 The output of this macro is:
 <p><center>
 <img src="dy.gif">
 </center>
 <p>Note that HQUADF.DAT may contains long DATA statements which sometimes can
 not be handle properly by the compiler. In that case you should edit them by
 hand in order to reduce the number of continuation lines.
<HR SIZE=6><h1>How to extend a Column Wise Ntuple (CWN) ?
</h1> The following example shows how to extend an existing CWN.
 This example add a block to an existing ntuple and fill the new
 added variables with functions of the already existing variables.

 <FONT COLOR="#993300"><pre>
       Program Extend_Ntuple
 *
       Parameter (Nhmax = 100000)
       Common /Pawc/ Hmemor(Nhmax)
       Common /P/   A,B,C,D,E,F
 *
       Parameter (Nrvar=3)
       Character*10 Chvar(Nrvar)
 *
       Data Chvar/'A','B','C'/
 *
       Call Hlimit(Nhmax)
 *--------------------------------------------------
 *	Create and fill and save the Ntuple 1
 *
       Call Hropen(10,'P1','p1.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(1,'Test','D')
       Call Hbname(1,'P1',A,'A,B,C')
 *
       Do I=1,10
          A = Float(I)
          B = Float(10*I)
          C = Float(100*I)
          Call Hfnt(1)
       EndDo
 *
       Call Hrout(0,IC,'')
       Call Hrend('P1')
       Close(10)
 *--------------------------------------------------
 *	Reset the common block
 *
       Do I=1,10
          A = 0.
          B = 0.
          C = 0.
          D = 0.
          E = 0.
          F = 0.
       EndDo
 *--------------------------------------------------
 *	Extend ntuple 1 with an extra block
 *       The extra variables are filled with
 *       functions of the exiting variables.
 *
       Call Hropen(10,'P1','p1.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (1,9999,0)
       Call Hbname (1,' ',0,'$CLEAR')
       Call Hbname (1,'P1',A,'$SET')
       Call Hbname (1,'P2',D,'D,E,F')
       Call Hnoent (1,Noent)
       Call Hgntv  (1,Chvar,Nrvar,Noent,Ierr)
 *
       Do I=1,Noent
         Call Hgntf(1,I,Ierr)
         D = A+1
         E = B+1
         F = C+1
         Call Hfntb(1,'P2')
       EndDo
 *
       Call Hrout(1,IC,'')
       Call Hrend('P1')
       Close(10)
 *
       End
 </pre></font>
 The scanning of the ntuple 1 in <b>PAW++</b> gives:
 <P>
 <center><img src="extend.gif"></center>
<HR SIZE=6><h1>The character strings concatenation operator (//) in COMIS programs.
</h1>This operator works in COMIS programs but has a limitation in its
 usage: it cannot be used in a character string directly passed as an
 argument in a subroutine call. For example to following program:
 <FONT COLOR="#993300"><PRE>
       subroutine a
       call b('abcdef'//'ghijkl')
       end

       subroutine b(c)
       character*(*) c
       print*, c
       end
 </PRE></FONT>
 gives:

 <FONT COLOR="#993300"><PRE>
 PAW > call a.f
  CS-TR-ERR: routine A, line    2
  CALL B('abcdef' ^ //'ghijkl')
   syntax error
 </PRE></FONT>

 To bypass this problem you should use an intermediate character variable:

 <FONT COLOR="#993300"><PRE>
       subroutine a
       character*80 s
       s='abcdef'//'ghijkl'
       call b(s)
       end

       subroutine b(c)
       character*(*) c
       print*, c
       end
 </pre></font>
<HR SIZE=6><h1>"Cannot open file so_locations to update"
</h1>The original question was:
 <HR width=30%>
 <P>
 <EM> I am running PAW on  an alpha machine
 (DEC-UNIX 4.0) and compiling using the compiler (not COMIS) by
 using the statement:
 <FONT COLOR="#993300"><PRE>
 nt/loop ntuplenumber filename.f77
 </PRE></FONT>
 When more than 1 user is running PAW program in the same
 manner the second user does not succeed in compiling and gets the message:
 <FONT COLOR="#993300"><PRE>
 Cannot open file so_locations to update
 </PRE></FONT>
 </EM>
 <HR width=30%>
 <P>
  With some <b>PAW</b> version, the file <FONT COLOR="#993300"><TT> so_locations </TT></FONT> is created in
 the
 <FONT COLOR="#993300"><TT>/tmp </TT></FONT>
 directory and remains throughout the <b>PAW</b> session of the first user. When
 the second <b>PAW</b> session try to create its own
 <FONT COLOR="#993300"><TT> so_locations </TT></FONT> file there
 is a conflict. This problem can be avoid by redefining the temporary directory
 where this file is created. Just put the following lines in your
 <FONT COLOR="#993300"><TT>pawlogon.kumac</TT></FONT> file.

 <FONT COLOR="#993300"><PRE>
  appl comis quit
  !setopt '/myhomedirectory/tmp' path
  quit
 </pre></font>
<HR SIZE=6><h1>What means "***** ERROR in HBNAME : Too many variables in format (>50)" ?
</h1>The following program produce the error message:
 <FONT COLOR="#993300"><pre>
     ***** ERROR in HBNAME : Too many variables in format (>50) : ID=       1
 </pre></font>
 because the number of token in the CHFORM parameter of the HBNAME call is
 limited to 50.
 <FONT COLOR="#993300"><pre>
       Program CWNLONG
 *
       Common /Pawc/ H(100000)
       Parameter (Nmax = 300)
       Common /CWN/ A00,A01,A02,A03,A04,A05,A06,A07,A08,A09,
      +             A10,A11,A12,A13,A14,A15,A16,A17,A18,A19,
      +             A20,A21,A22,A23,A24,A25,A26,A27,A28,A29,
      +             A30,A31,A32,A33,A34,A35,A36,A37,A38,A39,
      +             A40,A41,A42,A43,A44,A45,A46,A47,A48,A49,
      +             A50,A51,A52,A53,A54,A55,A56,A57,A58,A59,
      +             A60,A61,A62,A63,A64,A65,A66,A67,A68,A69,
      +             A70,A71,A72,A73,A74,A75,A76,A77,A78,A79,
      +             A80,A81,A82,A83,A84,A85,A86,A87,A88,A89,
      +             A90,A91,A92,A93,A94,A95,A96,A97,A98,A99
 *.___________________________________________
 *
       Call Hlimit(100000)
 *
       Call Hropen(1,'CWN','cwn.hbook','N',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
 *
       Call Hbnt(1,'CWN',' ')
       Call Hbname(1,'BLOCK1',A00,
      +            'A00,A01,A02,A03,A04,A05,A06,A07,A08,A09,'//
      +            'A10,A11,A12,A13,A14,A15,A16,A17,A18,A19,'//
      +            'A20,A21,A22,A23,A24,A25,A26,A27,A28,A29,'//
      +            'A30,A31,A32,A33,A34,A35,A36,A37,A38,A39,'//
      +            'A40,A41,A42,A43,A44,A45,A46,A47,A48,A49,'//
      +            'A50,A51,A52,A53,A54,A55,A56,A57,A58,A59,'//
      +            'A60,A61,A62,A63,A64,A65,A66,A67,A68,A69,'//
      +            'A70,A71,A72,A73,A74,A75,A76,A77,A78,A79,'//
      +            'A80,A81,A82,A83,A84,A85,A86,A87,A88,A89,'//
      +            'A90,A91,A92,A93,A94,A95,A96,A97,A98,A99'
      +)
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('CWN')
       Close(1)
 *
       End
 </pre></font>
 To avoid that it is enough to split the HBNAME call in two parts like in the
 following example:
 <FONT COLOR="#993300"><pre>
       Program CWNLONG
 *
       Common /Pawc/ H(100000)
       Parameter (Nmax = 300)
       Common /CWN/ A00,A01,A02,A03,A04,A05,A06,A07,A08,A09,
      +             A10,A11,A12,A13,A14,A15,A16,A17,A18,A19,
      +             A20,A21,A22,A23,A24,A25,A26,A27,A28,A29,
      +             A30,A31,A32,A33,A34,A35,A36,A37,A38,A39,
      +             A40,A41,A42,A43,A44,A45,A46,A47,A48,A49,
      +             A50,A51,A52,A53,A54,A55,A56,A57,A58,A59,
      +             A60,A61,A62,A63,A64,A65,A66,A67,A68,A69,
      +             A70,A71,A72,A73,A74,A75,A76,A77,A78,A79,
      +             A80,A81,A82,A83,A84,A85,A86,A87,A88,A89,
      +             A90,A91,A92,A93,A94,A95,A96,A97,A98,A99
 *.___________________________________________
 *
       Call Hlimit(100000)
 *
       Call Hropen(1,'CWN','cwn.hbook','N',1024,Istat)
       If (Istat.Ne.0) Then
          Print*, 'Error in opening file ...'
          Stop
       Endif
 *
       Call Hbnt(1,'CWN',' ')
       Call Hbname(1,'BLOCK1',A00,
      +            'A00,A01,A02,A03,A04,A05,A06,A07,A08,A09,'//
      +            'A10,A11,A12,A13,A14,A15,A16,A17,A18,A19,'//
      +            'A20,A21,A22,A23,A24,A25,A26,A27,A28,A29,'//
      +            'A30,A31,A32,A33,A34,A35,A36,A37,A38,A39,'//
      +            'A40,A41,A42,A43,A44,A45,A46,A47,A48,A49'
      +)
       Call Hbname(1,'BLOCK1',A50,
      +            'A50,A51,A52,A53,A54,A55,A56,A57,A58,A59,'//
      +            'A60,A61,A62,A63,A64,A65,A66,A67,A68,A69,'//
      +            'A70,A71,A72,A73,A74,A75,A76,A77,A78,A79,'//
      +            'A80,A81,A82,A83,A84,A85,A86,A87,A88,A89,'//
      +            'A90,A91,A92,A93,A94,A95,A96,A97,A98,A99'
      +)
 *
       Call Hrout(0,Icycle,' ')
       Call Hrend('CWN')
       Close(1)
 *
       End
 </pre></font>
<HR SIZE=6><h1>How to convert HBOOK3 files into HBOOK4 files ?
</h1> The following procedure can be used:
 <p>
 run the following program with either HBOOK3 or HBOOK4.
 <FONT COLOR="#993300"><pre>
 *--         open old hbook3 hstore file
       open(unit=lun,....
 *--         Import all histograms from file to memory
       call hfetch(0,lun)
 *--         open a text file (recfm=f lrecl=80
       open(unit=lun2,form='formatted',status='new')
 *--         write histograms from memory to this file
       call hwrite(o,lun2,0,0,-1)
 *
 </pre></font>
      Then run <b>PAW</b> and convert to a new HBOOK file:
 <FONT COLOR="#993300"><pre>
      PAW > hread 0  filename
      PAW > Histo/file  1  newhbookfile 1024 N
      PAW > Hrout 0
 </pre></font>
<HR SIZE=6><h1>Why LRECL=0 doesn't work in HIST/FILE ?
</h1>For HBOOK/RZ files, the largest record length which can be auto
 detected is <b>LRECL=8192</b>.  Due to an early design mistake the record
 length is hidden in the second record of an RZ file. This means that, before
 the record length can be determined, almost LRECL+200 words should be buffered.
 Increasing this buffer will only push these limit but won't really solve the
 problem. So <b>for all the files with a record length greater than 8192 the
 record must be specified explicitly in the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE">HISTOGRAM/FILE</a>.
 </b><p>
 The
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:CHAIN">CHAIN</a>
 command open the chained files with the automatic record length detection (LRECL=0)
 therefore it is not possible to chain files having a record length greater than 8192 unless
 the chain is built with <FONT COLOR="#993300"><tt>//lunxx</tt></font>. Example:
 <FONT COLOR="#993300"><pre>
  h/file 20 file_1 16384
  h/file 21 file_2 16384
  h/file 22 file_3 16394

  chain chain_1 //lun20 //lun21 //lun22
  cd //chain_1
 </pre></font>
 </b>
<HR SIZE=6><h1>How to access X resources for Paw++ under VAX/VMS ?
</h1>On VMS, the resource file DECW$XDEFAULTS.DAT is
 located in the directory specified by the logical name
 DECW$USER_DEFAULTS.
 <p>
 Any change you make to the DECW$XDEFAULTS.DAT file does not take effect
 until you restart your DECwindows session.
 <p>
 Most applications have a system
 application resource file in the directory pointed to by the logical name
 DECW$SYSTEM_DEFAULTS (e.g. DECW$BOOKREADER.DAT, for
 the DEC supplied information system bookreader,
 or DECW$CLOCK.DAT, for xclock, ...).
 <p>
 You can also create a user application-specific resource file in
 the directory pointed to by the logical name DECW$USER_DEFAULTS:
 <p>
 e.g., for <b>Paw++</b> on VMS,
 you can create a file DECW$PAWPP.DAT in
 your login directory and specify your user preferences for <b>Paw++</b> in
 that file.
 <p>
 For more details can be found in the
 <a href="http://consult.cern.ch/writeup/xusage">
 Guide for the Usage of X Window at CERN
 </a>.
<HR SIZE=6><h1>Is there a way to open HBOOK files directly from tape ?
</h1><b>PAW</b> uses ZEBRA RZ to handle histogram files, which are in direct
 access format. Tapes are not direct access devices, so you cannot
 open files directly from tape. If you first stage the tape file
 to disk, then you can open them successfully.
<HR SIZE=6><h1> How to retrieve the ntuple type (RWN or CWN) in a HBOOK program ?
</h1> Use the logical function <b>HNTNEW</B>:
 <FONT COLOR="#993300"><PRE>
             .
             .
             .
         logical hntnew
             .
             .
             .
         id = 10
         if (hntnew(id)) then
            print*, id,' is a CWN'
         else
            print*, id,' is a RWN'
         endif
             .
             .
             .
 </pre></font>
<HR SIZE=6><h1>Why H/DEL flag an error when the histogram doesn't exist ?
</h1> Instead of using directly <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:DELETE"><tt>H/DEL</tt></a> you should delete
 the histograms via a macro which first test if the histogram exist
 (<a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/KUIP.html#K:FUNCTI"><tt>$HEXIST</tt></a>).
 <br>
 If you try to delete an histogram which doesn't exist you get the
 following error message:
 <FONT COLOR="#993300"><pre>
       PAW > H/DEL 12345
        ***** ERROR in HDELET : Unknown histogram : ID=   12345
       PAW >
 </pre></font>
 To avoid this you can use the following maro:
 <FONT COLOR="#993300"><pre>
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:MACRO">Macro</a> HDEL
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Branching.html#MSB:IFTHEN">If</a> $HEXIST([1]) Then
          H/DEL [1]
       Endif
       <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO_SYNTAX_Definitions.html#MSD:RETURN">Return</a>
 </pre></font>
 This macro will not give an error message if the histogram doesn't exist:
 <FONT COLOR="#993300"><pre>
       PAW > <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/MACRO.html#M:EXEC">Exec</a> HDEL 12345
       PAW >
 </pre></font>
<HR SIZE=6><h1>Unaligned access using PAW on a DEC Alpha running UNIX.
</h1> Using <b>PAW</b> on a DEC Alpha running unix (frequently whilst fitting
 or when <b>PAW</b> accesses external FORTRAN routines), you can obtain many
 error
 messages of the form:
 <FONT COLOR="#993300"><pre>
 Unaligned access pid=27853 <pawX11> va=409dea6c pc=25003604 ra=201515c8 type=ldt
 </pre></font>
 These are merely warning messages that the program has made a memory access to
 a structure (a real*4 variable, for instance) that didn't begin on the most
 efficient address. The compiler(s) try to locate (align) all data structures
 for the fastest memory access, but it's not too hard to mess this up via
 overlayed data structures (FORTRAN equivalence statements, common blocks, etc).
 <p>
 The program still works, it just prints out an error message that the
 memory reference was slow (thereby slowing itself down vastly more!)
 <p>
 The messages can be suppressed with the shell command:
 <FONT COLOR="#993300"><pre>
 uac p noprint
 </pre></font>
<HR SIZE=6><h1>Conversion from NDC coordinates to centimetres
</h1>The following macro do this conversion.
 <FONT COLOR="#993300">
 <pre>
 Macro Ndc2Cm
 *
 NT   = $GRAFINFO('NT')
 XNdc = [1]
 YNdc = [2]
 Sel 1
 XWnMax = $GRAFINFO('WNXMAX')
 YWnMax = $GRAFINFO('WNYMAX')
 XVpMin = $GRAFINFO('VPXMIN')
 XVpMax = $GRAFINFO('VPXMAX')
 YVpMin = $GRAFINFO('VPYMIN')
 YVpMax = $GRAFINFO('VPYMAX')
 Sel [NT]
 Global/Create X
 Global/Create Y
 X = [XWnMax]*(([XNdc]-[XVpMin])/([XVpMax]-[XVpMin]))
 Y = [YWnMax]*(([YNdc]-[YVpMin])/([YVpMax]-[YVpMin]))
 *
 Return
 </pre>
 </FONT>

 Example:

 <FONT COLOR="#993300">
 <pre>
          PAW > Nul
          PAW > Exe ndc2cm .5 .5
          PAW > Mess [X] [Y]
 </pre></font>
<HR SIZE=6><h1>I try to open an Ntuple on an NFS mounted Unix disk from VMS PAW, but I get an error from PAWROP...
</h1> The record format of the Ntuple, as seen from the VMS system, is
 probably Stream (check with a DIR/FULL). You need to provide the correct
 attributes by doing the following: from the VMS system, for each
 of the ntuples you want to access, type:
 <FONT COLOR="#993300"><pre>
 $ set file/att=(rfm:fix,lrl:4096) [NFS_disk]:[directory][ntuple name]
 </pre></font>
 This creates the necessary interface info, and you can then open them
 from your VMS <b>PAW</b> in the usual way:
 <FONT COLOR="#993300"><pre>
 PAW> his/fil 1 [NFS_disk]:[directory][ntuple name]
 </pre></font>
<HR SIZE=6><h1>Running MINUIT in batch, sometimes stops with a "STATUS=CALL LIMIT"
</h1>The total number of call(s) is not constant: it varies from 1000-1300.
 To redefine this default maximum number of calls
 <FONT COLOR="#993300"><tt>MNCOMD</tt></font> should be used.
 For example:

 <FONT COLOR="#993300"><pre>
                CALL MNCOMD(fcn,'minimize 2000',IERR,futil)
 </pre></font>

 will change the call limit to 2000.
 Sometimes it is more convenient to define the value has an integer
 (result of some computation). In that case it is easier to
 use <FONT COLOR="#993300"><tt>MNEXCM</tt></font> instead of
 <FONT COLOR="#993300"><tt>MNCOMD</tt></font>.
 All this is in the <B>MINUIT</b> manual, but it may not
 be very easy to find.
<HR SIZE=6><h1>What is maximum number of variables in a Column Wise Ntuple (CWN) ?
</h1>A <b>C</b>olumn <b>W</b>ise <b>N</b>tuple (CWN) can not have
 more than 50000 <FONT COLOR="#993300"><TT>real*4</TT></font>,
 <FONT COLOR="#993300"><TT>integer</TT></font> or
 <FONT COLOR="#993300"><TT>logical</TT></font> columns.
<HR SIZE=6><h1> "Index out of range" in ntuple commands (Since version 2.07)
</h1> The original question was:
 <hr width="15%">
 <p>
 <em>
    With PAW 2.07 I got the following error on a very basic instruction:
 </em>
 <FONT COLOR="#993300"><pre>
    nt/plot 10.icel(1)
    /NTUPLE/PLOT: Evt 3: Index out of range, end(1) > max(0)
 </pre></font>

 <em>
    whereas the same without index specified works perfectly.
 </em>
 <FONT COLOR="#993300"><pre>
    nt/plot 10.icel
 </pre></font>

 <em>
    ICEL is variable length array variable
 </em>
 <hr width="15%">
 <p>
 Since <b>PAW</b> version 2.07, the ntuple query processor does more
 checking.
 This is the case with this question. Here a variable length
 array is used and, for some events, its dimension
 is zero. For these events <FONT COLOR="#993300"><tt>ICEL(1)</tt></font>
  is not defined.
 So just do:
 <FONT COLOR="#993300"><pre>
    nt/plot 10.icel(1) n>0
 </pre></font>

 where <FONT COLOR="#993300"><tt>n</tt></font> is the dimension of
 <FONT COLOR="#993300"><tt>icel</tt></font>.
 <p>
 More informations on the ntuple query processor are available
 <a href="http://wwwinfo.cern.ch/asd/paw/qp.html">here</a>.
<HR SIZE=6><h1>ERROR in HFNT bad float in column...
</h1>Sometimes when filling Ntuples
 you can get the a message like:
 <FONT COLOR="#993300"><pre>
  ***** ERROR in HFNT bad float in column:        11 line:         1 :
  Negative infinity : ID=       1
 </pre></font>

 This means that you fill the
 ntuple with invalid number(s) (NaN, Infinity etc ...). Be sure
 that the values to give to
 <FONT COLOR="#993300"><tt>HFTN</tt></font>
 are valid. A typical mistake is to forgot to initialise some variables
 (for instance with 0).
 <p>
 <b>HBOOK</B> provides routines to check if a
 <FONT COLOR="#993300"><tt>float</tt></font>
 or a
 <FONT COLOR="#993300"><tt>double precision</tt></font>

 number is valid:

 <FONT COLOR="#993300"><pre>
     ifps(x)     for single precision numbers
     ifpd(x)     for double precision numbers
 </pre></font>

    which return 0 if
 <FONT COLOR="#993300"><tt>x</tt></font> is invalid.
<HR SIZE=6><h1>Customizing Emacs for "kumac" files.
</h1>To get
 <FONT COLOR="#993300"><tt>emacs</tt></font> (or
 <FONT COLOR="#993300"><tt>Xemacs</tt></font>) to understand "kumac" files
 you need the file
 <a href="http://www.desy.de/asgdocs/emacs/xsite15/site-lisp/kumac-mode.el">
 <FONT COLOR="#993300"><tt>kumac-mode.el</tt></font></a> in the directory
 <FONT COLOR="#993300"><tt>~/emacs</tt></font>
 </pre></font>
 and the file <FONT COLOR="#993300"><tt>~/.emacs</tt></font> should be:
 <FONT COLOR="#993300"><pre>
 ; General stuff specific to all versions
 (setq search-repeat-char 10)
 (setq auto-mode-alist (cons '("\\.h\\'" . c++-mode) auto-mode-alist))
 (setq auto-mode-alist (cons '("\\.INC\\'" . fortran-mode) auto-mode-alist))
 (setq auto-mode-alist (cons '("\\.inc\\'" . fortran-mode) auto-mode-alist))
 (setq auto-mode-alist (cons '("\\.tex\\'" . latex-mode) auto-mode-alist))
 (setq auto-mode-alist (cons '("\\.kumac\\'" . kumac-mode) auto-mode-alist))

 (require 'font-lock)
 (add-hook 'emacs-lisp-mode-hook	'turn-on-font-lock)
 (add-hook 'lisp-mode-hook	'turn-on-font-lock)
 (add-hook 'fortran-mode-hook   'turn-on-font-lock)
 (add-hook 'kumac-mode-hook 'turn-on-font-lock)

 (add-hook 'c-mode-hook		'turn-on-font-lock)
 (add-hook 'c++-mode-hook		'turn-on-font-lock)
 (add-hook 'perl-mode-hook	'turn-on-font-lock)
 (add-hook 'tex-mode-hook		'turn-on-font-lock)
 (add-hook 'texinfo-mode-hook	'turn-on-font-lock)
 (add-hook 'dired-mode-hook	'turn-on-font-lock)

 ;; Non-Lucid version specific options (i.e. if on a vt100 etc...)
 ;;
 (cond
  ((not (eq window-system 'x))
   (global-set-key "\C-A" 'isearch-forward)
   (global-set-key "\C-X\C-J" 'save-buffer))
 )

 (setq fortran-continuation-string "+")
 (setq comment-start "*")
 (setq adaptive-fill-mode nil)

 (setq load-path (cons (expand-file-name "~/emacs") load-path))
 (load "kumac-mode")
 </pre></font>
<HR SIZE=6><h1>How to change the line type for ellipses drawing ?
</h1>The command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/GRAPHICS_PRIMITIVES.html#GP:ELLIPS"><tt>ELLIPSE</tt></a>
 uses the <b>HIGZ</b> routine <FONT COLOR="#993300"><tt>IGELLI</tt></font>
 to draw an ellipse.
 <FONT COLOR="#993300"><tt>IGELLI</tt></font>
 (as <FONT COLOR="#993300"><tt>IGBOX</tt></font> to draw boxes)
 is assumed to be a filled area and, as
 such, follows the fill area attributes. That's why the line attributes are
 not active on it.The following routine can be used to draw
 an ellipse with the line type (line style) changed:

 <FONT COLOR="#993300"><pre>
       subroutine ellips(x1,x2,y1,y2)
       dimension x(51),y(51)
       a=(x2-x1)/2.
       b=(y2-y1)/2.
       xm=(x2+x1)/2.
       ym=(y2+y1)/2.
       dt=6.28/50.
       t=0.
       do 10 i=1,51
          x(i)=a*cos(t)+xm
          y(i)=b*sin(t)+ym
          t=t+dt
  10   continue
       call ipl(51,x,y)
       end
 </pre></font>
 To use this routine just do:
 <FONT COLOR="#993300"><pre>
 PAW > nul 0 10 0 10
 PAW > set ltyp 2
 PAW > call ellips.f(1.,8., 2.,6.)
 </pre></font>
 <center><img src="elli.gif"></center>
<HR SIZE=6><h1>How to make a cumulative graph of several cut NTUPLEs ?
</h1>Via a COMIS selection function, possibly combined
 with another online expression or cut as shown in the following example.
 Assume you have 3 files test1.hbook, test2.hbook and test3.hbook with
 the ntuple ID=30 and variables X,Y,Z. You can generate the skeleton
 selection function with
 <FONT COLOR="#993300"><pre>
   PAW > uwfunc 30 test.f
 </pre></font>
 Then edit test.f. The variable CFILE is the current file name in a chain.
 ICHEVT = 1 when you start the first event in the chain. IDNEVT is the
 current event number as usual. Suppose you have now defined an additional
 cut:
 <FONT COLOR="#993300"><pre>
   PAW > cut $5 x>0.and.y>0
 </pre></font>
 Then you can do:
 <FONT COLOR="#993300"><pre>
   PAW > Nt/plot 30.x  $5*test.f
 </pre></font>

 <h3>File test.f</h3>
 <FONT COLOR="#993300"><pre>
       REAL FUNCTION test(XDUMMY)
       REAL
      +   X    ,   Y    ,   Z
 *
       LOGICAL         CHAIN
       CHARACTER*128   CFILE
 *
       COMMON /PAWCHN/ CHAIN, NCHEVT, ICHEVT
       COMMON /PAWCHC/ CFILE
 *
       COMMON/PAWIDN/IDNEVT,OBS(10),
      +   X    ,   Y    ,   Z
 *
 *-* set weight as a function of the file name
       test=1.
       if(cfile.eq.'test1.hbook')test=0.5
       if(cfile.eq.'test2.hbook')test=0.3
       END
 </pre></font>

 <p>

 Original question follows:

 <p>
         I have the following ntuples: 1.nt,2.nt,3.nt. I get the three
  plots from respective ntuples as follows.

 <FONT COLOR="#993300"><pre>
  PAW > hist/file 1 1.nt
  PAW > nt/pl 1.e $cuts.and.1  | weight 1
  PAW > close 1
  PAW > hist/file 1 <FONT COLOR="#FF0000">2.nt</font>
  PAW > nt/pl 1.e $cuts.and.<FONT COLOR="#FF0000">.75</font>  | weight .75
  PAW > close 1
  PAW > hist/file 1 <FONT COLOR="#FF0000">3.nt</font>
  PAW > nt/pl 1.e $cuts.and.<FONT COLOR="#FF0000">.5</font>  | weight .5
  PAW > close 1
 </pre></font>

         I wish to get a cumulative graph of the above three plots. I usually
  define 3 histograms, and add them.

         Is there a way to firstly define the three ntuples as chain:

 <FONT COLOR="#993300"><pre>
  PAW > nt/chain nt 1.nt 2.nt 3.nt
  PAW > cd //nt
 </pre></font>

         and get the same result by a command which works as follows?:

 <FONT COLOR="#993300"><pre>
  PAW > nt/pl $cuts.and.[(wt 1 for 1.nt),(wt .75 for 2.nt),(wt .5 for 3.nt)
 </pre></font>
<HR SIZE=6><h1>How to access the QUEST common block in a C program ?
</h1> You should use <FONT COLOR="#993300"><TT>cfortran.h</TT></FONT>.

 <FONT COLOR="#993300"><pre>
 #include        "cfortran.h"

 typedef struct {
         int     iquest[100];
 } quest_def;

 #define QUEST COMMON_BLOCK(QUEST,quest)

 COMMON_BLOCK_DEF(quest_def,QUEST);

 </pre></font>
 Then in the C program the <FONT COLOR="#993300"><TT>iquest</TT></FONT> variable
 can be used as follows:

 <FONT COLOR="#993300"><pre>
           .
           .
           .
 QUEST.iquest[9] = 0;
           .
           .
           .

 if (QUEST.iquest[0] != 1 ) {
           .
           .
           .
 </pre></font>
 Note that <FONT COLOR="#993300"><TT>IQUEST(1)</TT></FONT> in fortran
 correspond to <FONT COLOR="#993300"><TT>QUEST.iquest[0]</TT></FONT> in C.
<HR SIZE=6><h1>NT/SCAN and unsigned integers (Since version 2.07)
</h1> Since the <b>PAW</b> version <a href="http://wwwinfo.cern.ch/asdcgi/listpawnews.pl/paw.news20722">2.07</a>, unsigned integers are printed in hexadecimal
 format by <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:SCAN"><tt>NT/SCAN</tt></a>. This was done on purpose to avoid confusion with no
 integer. Example:

 <FONT COLOR="#993300"><pre>
          PAW > nt/scan 10 nevent=5 varlis=flag
          +-------+-------------+
          | Event |   flag      |
          +-------+-------------+
          |     1 | z'f'        |
          |     2 | z'f'        |
          |     3 | z'f'        |
          |     4 | z'f'        |
          |     5 | z'f'        |
          +-------+-------------+
          ==> 5 events satisfied the imposed cuts
 </pre></font>

 To have the integer representation of the unsigned integer variables
  it is enough to do:

 <FONT COLOR="#993300"><pre>
          PAW > nt/scan 10 nevent=5 varlis=int(flag) flag
          +-------+--------------+-------------+
          | Event |   int(flag)  |   flag      |
          +-------+--------------+-------------+
          |     1 |  15          | z'f'        |
          |     2 |  15          | z'f'        |
          |     3 |  15          | z'f'        |
          |     4 |  15          | z'f'        |
          |     5 |  15          | z'f'        |
          +-------+--------------+-------------+
          ==> 5 events satisfied the imposed cuts
 </pre></font>
<HR SIZE=6><h1> Is it possible to change from "insert" to "overwrite" input mode when typing at PAW prompt?
</h1> Try, on <b>UNIX</b>, the <b>KUIP</b> command :
 <FONT COLOR="#993300"><pre>
 PAW > RECALL_STYLE KSHO
 </pre></font>
 (N.B. <FONT COLOR="#993300"><tt>RECALL_STYLE ?</tt></font>
  will give you the current setting).
 Putting this in your
 <FONT COLOR="#993300"><tt>pawlogon.kumac</tt></font> will change the
 default setting from "insert" to "overwrite".
 <P>
 Now, if you want to change this setting only for the current line (but
 not change the default setting) typing
 <FONT COLOR="#993300"><tt><CTRL-O></tt></font> switch
 from one mode to another at any time.
<HR SIZE=6><h1>How to access HBOOK files via RFIO and CASTOR ?
</h1><h4> RFIO:</h4>
 The syntax for specifying Rfio/shift files is illustrated below:
 <FONT COLOR="#993300"><pre>
 PAW > his/file 1 shift9:/usera/cp/julian/charm.hbook
 </pre></font>
 i.e. host name followed after a colon by full path name.


 <h4> CASTOR (since 2001 CERNLIB release and at CERN only):</h4>
 To use Castor, you should typically have an account in the <b>TAPES</b>
 service. To access your files from <b>PAW</b> you use the usual file
 commands with the Castor filename.
 <br>E.g. suppose you have created <b>HBOOK</b> histograms
 in a file <tt><FONT COLOR="#993300">pawhists.hbook</font></tt> and put
 them in your Castor directory
 <tt><FONT COLOR="#993300">u/user/pawt</font></tt>, then issue these
 <b>PAW</b> commands to view them:

 <FONT COLOR="#993300"><pre>
 PAW > hi/file 1 /castor/cern.ch/user/u/user/pawt/pawhists.hbook
 </pre></font>
<HR SIZE=6><h1>Which resources are decisive for my application ?
</h1>the local resources (taking
 the file .Xdefaults (or .Xresources) of the machine where I see the display),
 or the remote resources (file of the machine where I am logged in)?

 <p>

 In most cases all X clients (applications) are using the same and current
 setting of the X server (the machine which does the display). In any case
 the command 'xrdb' can be used to get the current settings
 (type 'xrdb -q'), or to set new values. Note that
 having this information in the server (where it is available to all clients)
 instead of on disk, solves the problem in previous versions of X that
 required you to maintain defaults files on every machine
 that you might use.  It also allows for dynamic changing of
 defaults without editing files.
<HR SIZE=6><h1>How to draw a vector element into a comment ?
</h1>The following macro illustrate how to proceed:

 <FONT COLOR="#993300"><pre>
 nul 0 10 0 10
 set chhe 1.5
 v/create x(1) r 100.
 a = x(1)
 itx 1 5 x(1) = [a]
 </pre></font>

 <img src="var.gif">
<HR SIZE=6><h1> Resources for PAW++ on a monochrome display ?
</h1> You need to define the following resources in your
 .Xdefaults file:
 <FONT COLOR="#993300"><pre>
 Paw++*dirlist*1d*iconForeground: black
 Paw++*dirlist*1d*iconBackground: white
 Paw++*dirlist*1d*iconLabelForeground: white
 Paw++*dirlist*1d*iconLabelBackground: black
 Paw++*dirlist*2d*iconForeground: black
 Paw++*dirlist*2d*iconBackground: white
 Paw++*dirlist*2d*iconLabelForeground: white
 Paw++*dirlist*2d*iconLabelBackground: black
 Paw++*dirlist*ntuple*iconForeground: black
 Paw++*dirlist*ntuple*iconBackground: white
 Paw++*dirlist*ntuple*iconLabelForeground: white
 Paw++*dirlist*ntuple*iconLabelBackground: black
 </pre></font>
<HR SIZE=6><h1>How to read in batch an existing Column Wise Ntuple (CWN) ?
</h1>The following example create a CWN and read it back.
 <FONT COLOR="#993300"><pre>
       Program Read_CWNtuple
 *
       Parameter (Nhmax = 100000)
       Common /Pawc/ Hmemor(Nhmax)
       Common /P/    N,K(4,10)
 *
       Call Hlimit(Nhmax)
 *
 *       Create and fill the Ntuple 100
 *
       Call Hropen(10,'p','p.hbook','N',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hbnt(100,'Test','D')
       Call Hbname(100,'P',n,'N[0,10],K(4,N)')
 *
       Do N=1,10
          Do I=1,4
             Do J=1,n
                K(I,J)=I+N*10
             EndDo
          EndDo
          Call Hfnt(100)
       EndDo
 *
       Call Hrout(0,IC,' ')
       Call Hrend('p')
       Close(10)
       Do I=1,10
          Do J=1,4
             K(J,I)=0
          EndDo
       EndDo
 *
 *       Read back the ntuple 100
 *
       Call Hropen(10,'p','p.hbook','U',1024,Ista)
       If (Ista.Ne.0) Stop
       Call Hrin   (100,9999,0)
       Call Hbname (100,' ',0,'$CLEAR')
       Call Hbname (100,'p',n,'$SET')
       Call Hnoent (100,Noent)
 *
       Do I=1,Noent
         Call Hgnt(100,I,Ierr)
         Print*,'N = ',N
         Do J=1,4
            Do L=1,n
               Print*,'K(',J,',',L,') = ',K(J,L)
            EndDo
         EndDo
       EndDo
 *
       Call Hrend('p')
       Close(10)
 *
       End
 </pre></font>
<HR SIZE=6><h1>How to display an histogram with a zoom of the same histogram on top ?
</h1>One possible solution is the following example
 (the command <TT>FUN1</TT> just create a sample histogram):

 <FONT COLOR="#993300"><PRE>
 PAW > opt *
 PAW > fun1 1 cos(x)*sqrt(x) 100 0 12
 PAW > exe zoom 1 30 70
 </PRE></font>

 Where the macro <TT>ZOOM</TT> is:

 <FONT COLOR="#993300"><PRE>
 Macro zoom
  id = [1]
  i1 = [2]
  i2 = [3]
  zone
  colo 9 1 1 1
  h/pl [id]
  set xmgr 2.5
  set ymgu 2.5
  zone 2 2 2 s
  set bcol 1109
  h/pl [id]([i1]:[i2])
  zone
  set bcol
  set xmgr
  set ymgu
 return
 </PRE></font>
 <center>
 <img src="zoom.gif">
 </center>
<HR SIZE=6><h1>How to manage two windows in a HIGZ program ?
</h1>The following example illustrate this topic:
 <FONT COLOR="#993300"><pre>
       Program Two_Windows
       Common /Pawc/ H(20000)
       Dimension Rval(2)
 *
       Call Mzebra (-3)
       Call Mzpaw  (20000,' ')
       Call Iginit (0)
       Call Iopks  (6)
 *
       Iwk1   = 1
       Iwkty1 = 1
       Call Iopwk  (Iwk1,1,Iwkty1)
       Call Igqwk  (Iwk1,'MXDS',Rval)
       Xwkwn1 = Min(1.,Rval(1)/Rval(2))
       Ywkwn1 = Min(1.,Rval(2)/Rval(1))
       Call Iswkwn (Iwk1,0.,Xwkwn1,0.,Ywkwn1)
       Call Iswkvp (Iwk1,0.,Rval(1),0.,Rval(2))
       Call Iuwk   (Iwk1,0)
 *
       Iwk2   = 2
       Iwkty2 = 2
       Call Iopwk  (Iwk2,1,Iwkty2)
       Call Igqwk  (Iwk2,'MXDS',Rval)
       Xwkwn2 = Min(1.,Rval(1)/Rval(2))
       Ywkwn2 = Min(1.,Rval(2)/Rval(1))
       Call Iswkwn (Iwk2,0.,Xwkwn2,0.,Ywkwn2)
       Call Iswkvp (Iwk2,0.,Rval(1),0.,Rval(2))
       Call Iuwk   (Iwk2,0)
 *
       Call Isclip (0)
 *
       Call Iacwk  (1)
       Call Iswn   (2,0.,10.,0.,10.)
       Call Isvp   (2,0.1*Xwkwn1,0.4*Xwkwn1,0.1*Ywkwn1,0.4*Ywkwn1)
       Call Iselnt (2)
       Call Igbox  (0.,10.,0.,10.)
       Call Igterm
       Print*,'Type <CR> ...'
       Read (*,*)
 *
       Call Idawk  (1)
       Call Iacwk  (2)
       Call Isvp   (2,0.1*Xwkwn2,0.4*Xwkwn2,0.1*Ywkwn2,0.4*Ywkwn2)
       Call Iselnt (2)
       Call Igbox  (0.,10.,0.,10.)
 *
       Call Igterm
       Read (*,*)
 *
       Call Igend
 *
       End
 </pre></font>
 <center>
 <img src="2win.gif">
 </center>
<HR SIZE=6><h1>List of the logical unit numbers reserved by PAW and associated packages.
</h1>Some <b>PAW</b> commands (
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/HISTOGRAM.html#H:FILE"><tt>HISTOGRAM/FILE</tt></a>,
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/FORTRAN.html#F:FILE"><tt>FORTRAN/FILE</tt></a> etc ...)
 have a parameter named <FONT COLOR="#993300"><tt>lun</tt></font>. This parameter
 is a "logical unit number" on which are attached files. Some of these
 "logical unit number" are reserved by <b>PAW</b> and associated packages. The
 following table gives the list of the reserved units.
 <p>
 <center>
 <table CELLSPACING=0 CELLPADDING=5 border=1>
 <tr><th> UNIT </th><th> Reserved by ...</th></tr>
 <tr><td>   5 </td><td> KUIP    </td></tr>
 <tr><td>   6 </td><td> KUIP    </td></tr>
 <tr><td>   7 </td><td> KUIP    </td></tr>
 <tr><td>  10 </td><td> HIGZ    </td></tr>
 <tr><td>  11 </td><td> KUIP    </td></tr>
 <tr><td>  12 </td><td> KUIP    </td></tr>
 <tr><td>  13 </td><td> KUIP    </td></tr>
 <tr><td>  14 </td><td> KUIP    </td></tr>
 <tr><td>  15 </td><td> KUIP    </td></tr>
 <tr><td>  16 </td><td> KUIP    </td></tr>
 <tr><td>  17 </td><td> KUIP    </td></tr>
 <tr><td>  18 </td><td> KUIP    </td></tr>
 <tr><td>  19 </td><td> HIGZ    </td></tr>
 <tr><td>  81 </td><td> COMIS   </td></tr>
 <tr><td>  82 </td><td> COMIS   </td></tr>
 <tr><td>  83 </td><td> COMIS   </td></tr>
 <tr><td>  84 </td><td> COMIS   </td></tr>
 <tr><td>  89 </td><td> COMIS   </td></tr>
 <tr><td>  91 </td><td> HIGZ    </td></tr>
 <tr><td>  97 </td><td> COMIS   </td></tr>
 </table>
 </center>
<HR SIZE=6><h1>How to recover a corrupted Ntuple ?
</h1>Sometime it happens that an Ntuple is not entirely readable.
 When analysed in <b>PAW</b>, such ntuples produce the error message:
 <FONT COLOR="#993300"><pre>
 Bad Ntuple header (try RECOVER)
 </pre></font>
 In <b>PAW</b> you might use the command
 <a href="http://wwwinfo.cern.ch/asd/paw/reference_manual/NTUPLE.html#N:RECOVE">
 <tt>RECOVER</tt></a>.
 The recover mechanism can also be performed in a batch program with:

 <FONT COLOR="#993300"><pre>
          CALL HRECOV(ID,' ')
 </pre></font>

 In both cases the file on which the Ntuple resides must be open in Update mode.
<HR SIZE=6><h1>Complex vectors in SIGMA.
</h1>The complex vectors were implemented in the original <b>SIGMA</b>,
 but never properly integrated into <b>PAW</b>. However they can be used
 in "<b>SIGMA</b> only" macros:
 <FONT COLOR="#993300"><pre>
 SIGMA !PRINT
 SIGMA a=array(2,-3#-2)
 SIGMA B=A**0.5
 SIGMA C=A**0.5
 SIGMA AC=A*C
 SIGMA !NOPRINT
 </pre></font>
<HR SIZE=6><h1>How to draw the tick marks on the opposite side of the axis ?
</h1> It is enough to give negative values to the parameters defining
 the tick marks sizes <FONT COLOR="#993300"><tt>XTIC</tt></font> and
 <FONT COLOR="#993300"><tt>YTIC</tt></font>:
 <FONT COLOR="#993300"><pre>
 PAW > SET XTIC -0.3
 PAW > SET YTIC -0.3
 </pre></font>
<HR SIZE=6><h1>Negative weights in HBOOK histograms.
</h1><b>HBOOK</b>'s treatment of negative weights appears to give users trouble.
 A general answer to this question can be the following:
 <BR><BR>
 First of all, and most users understand this, histograms by
 definition should not have negative entries. This is the basic reason why
 they cause trouble: they are not well-defined and should not exist.
 However for some purposes it is rather easy to
 understand how they arise and how they should be treated.
 <BR><BR>
 Rather than build into every histogram operation a special way of treating
 negative entries, which would involve a lot of specialised code and be
 hard to understand and debug, we suggest the introduction of a
 "regularize" operation which would remove in an intelligent way the
 negative entries from a histogram, basically by smoothing or averaging
 negative entries with nearby positive ones to give a result which is
 never negative.  Of course such a routine would have to know what to do
 with "unregularizable" histograms (which contain too many negative entries
 to be averaged);<b> it is up to the users to suggest what they want done
 in these cases</b>.
 <BR><BR>
 In some applications, such as likelihood fits, the existence of negative
 expectations can give overflows in trying to evaluate the log of a negative
 number. In those cases, it is simply meaningless to consider negative weights.
 In other cases, the desired answer may be well defined. That is
 why we suggest the regularization operation, which would give the
 expected answer when it makes sense and a sensible answer in some other
 cases, without modifying anything else in <b>HBOOK</b>.
<HR SIZE=6><h1> Hexadecimal constants in COMIS.
</h1><B>COMIS</B> does not support hexadecimal constants i.e. the
 following declaration <b>does not work</b>:
 <FONT COLOR="#993300"><PRE>
         integer cem_ele
         data cem_ele /'3FF'X/
 </PRE></font>
 <b>only decimal constants</b> can be used.
<HR SIZE=6><h1>How to retrieve the list of the currently attached HBOOK files ?
</h1>Sine <b>PAW</b> version 2.12/10, The common blocks
 <FONT COLOR="#993300"><tt>HCDIRN</tt></font>,
 <FONT COLOR="#993300"><tt>HCDIRC</tt></font> and
 <FONT COLOR="#993300"><tt>HCFILE</tt></font> are visible in
 <b>COMIS</b> programs. So it is very simple to retrieve the list
 of the currently opened file with a <b>COMIS</b> routine like:

 <FONT COLOR="#993300"><pre>
       subroutine listfiles
       PARAMETER (NLPATM=100, MXFILES=50)
       COMMON /HCDIRN/NLCDIR,NLNDIR,NLPAT,ICDIR,NCHTOP,ICHTOP(MXFILES)
      +              ,ICHTYP(MXFILES),ICHLUN(MXFILES)
       CHARACTER*16   CHNDIR,    CHCDIR,    CHPAT    ,CHTOP
       COMMON /HCDIRC/CHCDIR(NLPATM),CHNDIR(NLPATM),CHPAT(NLPATM)
      +              ,CHTOP(NLPATM)
       CHARACTER*80 HFNAME
       COMMON /HCFILE/HFNAME(MXFILES)
 *
       Do I=1,NCHTOP
          J = Lenocc(HFNAME(I))
          Print*,ICHTOP(I),' ',HFNAME(I)(1:J)
       Enddo
 *
       End
 </pre></font>
<HR SIZE=6><h1>How to get the PROB value in a variable after a DIFF command ?
</h1>To get <FONT COLOR="#993300"><TT>PROB</TT></font> value in a variable
 the best is to redirect the output of the <FONT COLOR="#993300"><TT>DIFF</TT>
 </FONT> command into a file with the command
 <FONT COLOR="#993300"><TT>OUTPUT_LP</TT></FONT> and then read the file with
 the appropriate format. The following macro does the job:

 <FONT COLOR="#993300"><pre>
 Macro GetProb
 output_lp 66 junk
 diff [1] [2]
 output_lp -1
 close 66
 appl comis quit
       subroutine readprob
       Character*80 Chline
       vector vprob(1)
       Open(UNIT=67,FILE='junk',FORM='FORMATTED',STATUS='OLD')
       Read (67,10) Chline
       Read (67,10) Chline
       Read (67,10) Chline
  10   Format(A)
       Read (Chline(11:),'(f11.5)') vprob(1)
       Close(67)
       End
 quit
 call readprob
 prob = vprob(1)
 Message [prob]
 return
 </pre></font>
 It is enough to do:
 <FONT COLOR="#993300"><pre>
 PAW > exec getprob id1 id2
 </pre></font>
 to perform the command <FONT COLOR="#993300"><TT>DIFF</TT></FONT>
 on the histograms <FONT COLOR="#993300"><TT>id1</TT></FONT> and
 <FONT COLOR="#993300"><TT>id2</TT></FONT> and get the value of
 <FONT COLOR="#993300"><TT>PROB</TT></font> in
 <FONT COLOR="#993300"><TT>vprob(1)</TT></font> and in the variable
 <FONT COLOR="#993300"><TT>prob</TT></font>.
<HR SIZE=6><h1>What means: " ***** ERROR in IPM : Not enough space in memory" ?
</h1>Very likely the option <FONT COLOR="#993300">ZFL</TT></FONT> or
 <FONT COLOR="#993300">ZFL1</TT></FONT> is on.
 This option allows to create a copy in
 memory of the picture on the screen. This is a memory
 resident data structure and if the space is not available
 this message is printed. Turning this option off will
 fix the problem.
 The error message:
 <PRE><FONT COLOR="#993300">
 **** ERROR in IGTABL : Not enough space in memory
 </FONT></PRE>
 is due to the same problem.
 <P>
 The option <FONT COLOR="#993300">ZFL1</TT></FONT> is often
 used to be able to generate PostScript files with the command
 <FONT COLOR="#993300">PI/PRINT</TT></FONT>. With such big pictures
 (too large to fit in memory)  it is
 nevertheless possible to generate a PostScript file. First the option
 <FONT COLOR="#993300">ZFL1</TT></FONT> should be deactivated with the command
 <FONT COLOR="#993300">OPTION NZFL</TT></FONT>, and then proceed as follow:
 <PRE><FONT COLOR="#993300">
 PAW > For/File 66 filename.ps
 PAW > Metafile 66 -111
      .
      .
      here put your graphic commands
      .
      .
 PAW > close 66
 </FONT></PRE>
<HR SIZE=6><h1>Why MINUIT finds only 10 points on a contour when 100 are requested ?
</h1>This is a known and difficult problem.  You can try changing the
 value of <tt>UP</tt>, which won't find the contours you want, but should at least
 give an idea of the shape.  Maybe a small change would make it work.
 Maybe changing some other parameters like <tt>EPS</tt> could work. The algorithm
 would needs improving for very non-Gaussian cases.
<HR SIZE=6><h1>What is the longest line COMIS can read in a file ?
</h1>The limit is <b>132</b> characters.
<HR SIZE=6><h1>How to include a HIGZ graphic window in a X11/Motif application ?
</h1><b>HIGZ</b> provides this facilities thanks to the C functions
 <FONT COLOR="#993300"><tt>ixsdswi</tt></font>. The X11/Motif application should
 provide a X11 display and a X11 window to this function. Once this function
 has been called, <b>HIGZ</b> uses the provided window as parent to the window
 it creates. The following example shows how to use <FONT COLOR="#993300"><tt>ixsdswi</tt></font>
 <FONT COLOR="#993300"><pre>
 #include &lt;X11/Xlib.h>
 #include &lt;assert.h>
 #include &lt;unistd.h>

 #include "cfortran.h"
 #include "zebra.h"
 #include "higz.h"

 #define PAWC_SIZE 50000


 typedef struct { float PAW[PAWC_SIZE]; } PAWC_DEF;
 #define PAWC COMMON_BLOCK(PAWC,pawc)
 COMMON_BLOCK_DEF(PAWC_DEF,PAWC);
 PAWC_DEF PAWC;

 #define NIL (0)

 main()
 {
       int itype,istat;
       Window w;
       Display *dpy = XOpenDisplay(NIL);
       assert(dpy);
       w = XCreateWindow(dpy, DefaultRootWindow(dpy), 0, 0,
                         500, 500, 0,
                         CopyFromParent, CopyFromParent, CopyFromParent,
                         NIL, 0);
       XMapWindow(dpy, w);
       XFlush(dpy);
       ixsdswi( dpy , w );
 /*
  * Initialisation
  */
       MZEBRA(-3);
       MZPAW(PAWC_SIZE," ");
       IGINIT(0);
       IGWKTY(itype);
       IGSSE(6, itype);

       IGRNG(20.,20.);

       IGBOX(1.,19.,1.,19.);

       IGTERM();

       sleep(10);
 }
 </pre></font>
 The following script should be used to link that example on LINUX:
 <FONT COLOR="#993300"><pre>
 gcc  -c $1.c -g -rdynamic -Df2cFortran
 g77  -o ex01 ex01.c                                \
       /cern/pro/lib/libgrafX11.a                   \
       /cern/pro/lib/libpacklib.a                   \
       -L/usr/X11R6/lib                             \
       -lXt -lXext -lXp -lX11 -lcrypt -ldl  -lnsl -lm
 </pre></font>
<HR SIZE=6><h1>The FUTIL parameter in MINUIT functions.
</h1>The only application we know about that uses
 <FONT COLOR="#993300"><tt>FUTIL</tt></font> is <b>PAW</b>, but there are
 certainly others.  The idea is that inside the user-written (or
 <b>PAW</b>-supplied)
 <FONT COLOR="#993300"><tt>FCN</tt></font>,
 it may be required to fit the data to several different
 functions which are specified outside
 <FONT COLOR="#993300"><tt>FCN</tt></font>, so the names of these functions
 are transmitted to
 <FONT COLOR="#993300"><tt>FCN</tt></font> through <b>MINUIT</B> using the
 last argument in the
 calling sequence to
 <FONT COLOR="#993300"><tt>FCN</tt></font>.  The usage is as follows:
 <br>
 <br>
  Suppose that inside
 <FONT COLOR="#993300"><tt>FCN</tt></font>, the user wants
 to access a function whose name
 is specified at run-time.  Inside
 <FONT COLOR="#993300"><tt>FCN</tt></font>, the function will be called by a
 dummy name, conventionally
 <FONT COLOR="#993300"><tt>FUTIL</tt></font>:

 <FONT COLOR="#993300"><pre>
       SUBROUTINE MAIFCN (NPAR,G,F,U,IFLAG,FUTIL)
       EXTERNAL MAIANI
       ...
       CALL FUTIL(A,B,C)
       ...
       END
 </pre></font>

 In the user's program, he calls <b>MINUIT</B>:

 <FONT COLOR="#993300"><pre>
       EXTERNAL (MAIFCN,MAIANI)
       CALL MINUIT (MAIFCN,MAIANI)
 </pre></font>

 which specifies that the name of the subroutine
 <FONT COLOR="#993300"><tt>FCN</tt></font> will be
 <FONT COLOR="#993300"><tt>MAIFCN</tt></font> and the
 name of
 <FONT COLOR="#993300"><tt>FUTIL</tt></font> will be
 <FONT COLOR="#993300"><tt>MAIANI</tt></font>.  This of course requires that he supply a
 subroutine
 <FONT COLOR="#993300"><tt>MAIANI</tt></font>:

 <FONT COLOR="#993300"><pre>
       SUBROUTINE MAIANI(A,B,C)
 </pre></font>

 which will be called from
 <FONT COLOR="#993300"><tt>MAIFCN</tt></font> with the statement
 <FONT COLOR="#993300"><pre>
       CALL FUTIL(A,B,C)
 </pre></font>

 The above is only of limited usefulness, because if you want to call a
 different subroutine from
 <FONT COLOR="#993300"><tt>MAIFCN</tt></font>, you have to call <b>MINUIT</b> again with a
 different second argument to specify the name of the new routine
 <FONT COLOR="#993300"><tt>FUTIL</tt></font>.
 That is all you can do in "data-card-driven mode".  It is more useful in
 "Fortran-driven mode", where the user can execute commands by calling
 either
 <FONT COLOR="#993300"><tt>MNREAD</tt></font> (which reads in commands from a data stream) or
 <FONT COLOR="#993300"><tt>MNCOMD</tt></font>
 (which executes a single command given in "card" format)  or
 <FONT COLOR="#993300"><tt>MNEXCM</tt></font> (which
 executes a single command given in "argument" format).  All three of the
 above subroutines allow the caller to specify the (new) name of the
 <FONT COLOR="#993300"><tt>FUTIL</tt></font>
 subroutine for each <b>MINUIT</B> command executed.  That is what <b>PAW</b> does.
<HR SIZE=6><h1>How to use HFITH from a C program ?
</h1>The following program gives an example:
 <FONT COLOR="#993300"><pre>
 #include <cfortran.h>
 #include <hbook.h>
 #include <math.h>

 #if defined(__hpux) || defined(_IBMR2)
 # define extname
 #endif

 #ifdef extname
 #define UFIT ufit_
 #else
 #define UFIT ufit
 #endif

 #define PAWC_SIZE 50000

 typedef struct { float PAW[PAWC_SIZE]; } PAWC_DEF;
 #define PAWC COMMON_BLOCK(PAWC,pawc)
 COMMON_BLOCK_DEF(PAWC_DEF,PAWC);
 PAWC_DEF PAWC;

 typedef struct { double dpar[24];
                  double fitfun; } HCFITD_DEF;
 #define HCFITD COMMON_BLOCK(HCFITD,hcfitd)
 COMMON_BLOCK_DEF(HCFITD_DEF,HCFITD);
 HCFITD_DEF HCFITD;

 int h_shape=1000;

 extern float ufit(float *xi)
 {
         float a,b,c,d;
         float y, x;

         x = *xi;
         a=HCFITD.dpar[0];
         b=HCFITD.dpar[1];
         c=HCFITD.dpar[2];
         d=HCFITD.dpar[3];
         HCFITD.fitfun = b*exp(-b*(d-x))*pow(b*sqrt((x-d)*(x-d)),(a-1.))/c;
         y = HCFITD.fitfun;
         return (y);
 }

 void fill(int histo)
 {
 	HFILL(histo,1.,0.,0.0156);
 	HFILL(histo,2.,0.,0.0579);
 	HFILL(histo,3.,0.,0.1189);
 	HFILL(histo,4.,0.,0.1528);
 	HFILL(histo,5.,0.,0.1576);
 	HFILL(histo,6.,0.,0.1382);
 	HFILL(histo,7.,0.,0.0973);
 	HFILL(histo,8.,0.,0.0705);
 	HFILL(histo,9.,0.,0.0541);
 	HFILL(histo,10.,0.,0.0381);
 	HFILL(histo,11.,0.,0.0282);
 	HFILL(histo,12.,0.,0.0211);
 	HFILL(histo,13.,0.,0.0151);
 	HFILL(histo,14.,0.,0.0112);
 	HFILL(histo,15.,0.,0.0092);
 	HFILL(histo,16.,0.,0.0058);
 	HFILL(histo,17.,0.,0.0044);
 	HFILL(histo,18.,0.,0.0032);
 }

 void fit(int histo)
 {
        float par[4],step[4], pmin[4], pmax[4], sig[4], chi2;

        par[0]  = 3.9;
        par[1]  = 0.6;
        par[2]  = 5.3;
        par[3]  = 0.6;
 	pmin[0] = 0.;
 	pmin[1] = 0.;
 	pmin[2] = 0.;
 	pmin[3] = 0.;
 	pmax[0] = 0.;
 	pmax[1] = 0.;
 	pmax[2] = 0.;
 	pmax[3] = 0.;
 	step[0] = -1.;
 	step[1] = -1.;
 	step[2] = -1.;
 	step[3] = -1.;
        HFITH(histo,ufit," ",4 ,par,step,pmin,pmax,sig,chi2);
 }

 main()
 {	
 	int h_shape=1000;
 	char title[80]="test";
 	int step=18;
 	float min=1.;
 	float max=19.;
 	char file[80]="fit.dat";

        HLIMIT(PAWC_SIZE);
 	HBOOK1(h_shape,title,step,min,max,0.);
 	fill(h_shape);
 	fit(h_shape);
 	HRPUT(0,file,"N");
 }
 </pre></font>
 On Linux the following script can be used to produce the executable:
 <FONT COLOR="#993300"><pre>
 gcc -g -c -Df2cFortran -I/cern/pro/include/cfortran fit.c
 g77 -o fit.exe fit.o `cernlib packlib,mathlib` -lm
 </pre></font>
<HR SIZE=6><h1>Corrupted ASCII files after a transfer from Windows.
</h1>After a file transfer from Windows to Linux, ASCII files sometimes
 have the character <FONT COLOR="#993300"><tt>CTRL-M</tt></font> at the
 end of each line. If <b>PAW</b> macros of <b>COMIS</b> files are corrupted
 that way, they cannot be executed properly in <b>PAW</b>. To clean such files
 on Linux you may use the following UNIX script file:

 <FONT COLOR="#993300"><pre>
 sed -e "s/.$//" $1 > $1.tmp
 mv -f $1.tmp $1
 </pre></font>

 You can just copy/paste this two lines in the file
 <FONT COLOR="#993300"><tt>cleanctrl</tt></font> and do:

 <FONT COLOR="#993300"><pre>
 $ chmod +x cleanctrl
 </pre></font>

 and then each time you should clean an ASCII file coming from Windows type:

 <FONT COLOR="#993300"><pre>
 $ cleanctrl tobecleaned.kumac
 </pre></font>
</HTML>
